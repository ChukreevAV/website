<!--#include virtual="/inc/header02.txt" -->
<title>GIS-Lab: Zonal statistics with ZonalStats for QGIS</title>
<!--#include virtual="/inc/header2.txt" -->
<div class="cont">
<div class="col1">

<ul class="path">
   <li class="first"><a href="/">Home</a></li>
   <li><a href="/qa.html">Articles</a></li>
</ul>
<!--Contents start-->
<h1>Zonal statistics with ZonalStats for QGIS</h1>
<p class="ann">Description of the new tool for zonal statistics calculation.</p>
<p class="discuss discuss_top"><span><!--#include virtual="/scripts/forum-comments-num.php?i=9464"--></span></p>

<p>Thematic classification is usually followed by the analysis of the results.
One type of such analysis is zonal statistics calculation.</p>
<p>QGIS already contains Zonal statistic plugin, that calculates several
values (sum, mean value, total count) for pixels by polygonal vector layer.
But this plugin doesn't allow grouping features by some field, which is necessary
when one object is represented by several features. Calculated statistics
are added to shapefile attributes and this complicates it's usage for further
analysis. Also, there is no way to get
 pixels area for singleband binary (0-1) rasters.</p>
<p>Python ZonalStats plugin for opensource GIS QGIS fixes some of these issues and allows to calculate zonal statistics and show short report.</p>
<p>This development is part of the project to facilitate monitoring of FSC
(Forest Stewardship Council) certified forestry enterprises in Russia.</p>

<div style="text-align:center;margin:10px 0;"><a href="http://nextgis.ru" target="_blank"><img height="33" width="100" alt="NextGIS: Open source geospatial solutions" src="http://nextgis.ru/img/nextgis.png" style="margin: 0pt 7px 0pt 0pt; vertical-align: middle;"></a><strong style="font: bold 11px Arial;">Open source geospatial solutions</strong></div>

<p><strong>Оглавление</strong></p>
<ol>
  <li><a href="#01">Installation notes</a></li>
  <li><a href="#02">How does it work</a></li>
  <li><a href="#03">Contacts</a></li>
</ol>

<h2><strong><a name="01" id="01"></a></strong>1. Installation notes</h2>
<p>Plugin is available via GIS-Lab <a href="/programs/qgis/qgis-repo.xml">repository</a>.</p>
<p>ZonalStats is designed for QGIS 1.7.2 or higher and have no additional
dependencies.</p>
<p>You can obtain sources from our SVN:</p>
<pre>svn co http://svn.gis-lab.info/zonalstats zonalstats</pre>

<h2><strong><a name="02" id="02"></a></strong>2. How does it work</h2>
<p>After plugin installation and startup by clicking
<img src="/images/zonalstats-qgis-01.png" alt="Кнопка расширения" width="32" height="32"></img>
main window will appear:</p>

<p align="center"><img src="/images/zonalstats-qgis-02.png" alt="Главное окно расширения" width="508" height="354"></img></p>

<p>At the &laquo;Settings&raquo; tab you can specify all necessary parameters.</p>
<p>First, select raster layer for analysis from &laquo;Raster layer&raquo;
combobox. Usually this is singleband raster resulting from the thematic
classification.</p>
<p><strong>IMPORTANT!</strong> Plugin was developed to analyze classification
results from <a href="/qa/dtclassifier.html">DTclassifier</a> plugin
(0&nbsp;&mdash; feature absence; 1&nbsp;&mdash; feature presence). To use
ZonalStats with rasters that have non-binary values you first will need to
convert them to 0-1.</p>
<p>Combobox &laquo;Polygon layer (zones)&raquo; id used to select input polygonal
vector layer that define zones boundaries. Field that will be used for zones labeling
can be selected in &laquo;Get zones names from&raquo; combobox. If checkbox
&laquo;Group zones by name&raquo; is checked than zones with identical
value of the selected field will be counted as a single zone (and results will be aggregated). By default this
checkbox is unchecked and each feature treated as single zone.</p>
<p>Field &laquo;Save report as&raquo; is used to select filename for analysis
report in HTML format. Additionaly, the plugin creates CSV file with analysis results
that later can be easily loaded in statistical software for further analysis.
By default this file is created whre the report file is with the same filename as
for report but with &laquo;_data&raquo; suffix. In you want to save data
into another directory tick checkbox &laquo;Save data as&raquo; and select
desired destination.</p>
<p>To start analysis press &laquo;OK&raquo; button.</p>
<p>ZonalStats counts number of pixels, that corresponds to some class
and calculates area used by this class.</p>
<p>You can view results directly in plugin in the &laquo;Report&raquo; tab.</p>

<p align="center"><img src="/images/zonalstats-qgis-03.png" alt="Результат анализа" width="508" height="354"></img></p>

<p>Report generated by the plugin will contain three columns:</p>
<ul>
  <li> zones names (from the field selected by user)</li>
  <li>&laquo;Object count&raquo;&nbsp;&mdash; number of features in the zone. Makes
  sense, only when groupping is enabled. This column displays number of features
  that were treated as single zone (number of features with the same name)</li>
  <li>&laquo;Area&raquo;&nbsp;&mdash; area used by class. Measurement units
  depends on layer units (meters, kilometers, feets etc.)</li>
</ul>

<h2><strong><a name="03" id="03"></a></strong>3. Contacts</h2>
<p>If you want report a bug, make suggestion or have a question about
the plugin, please <a href="http://www.nextgis.ru/contact/">contact us</a>.</p>
<div style="text-align:center;margin:10px 0;"><a href="http://nextgis.ru" target="_blank"><img height="33" width="100" alt="NextGIS: Open source geospatial solutions" src="http://nextgis.ru/img/nextgis.png" style="margin: 0pt 7px 0pt 0pt; vertical-align: middle;"></a><strong style="font: bold 11px Arial;">Open source geospatial solutions</strong></div>

<!-- обсуждение на форуме, цифра изменяется при публикации статьи -->
<p class="discuss"><span><!--#include virtual="/scripts/forum-comments-num.php?i=9464"--></span></p>

<div class="links">
<h2>Links</h2>
<ul>
   <li><a href="/qa/dtclassifier-eng.html">Raster classification with DTclassifier for QGIS</a></li>
   <li><a href="/qa/rastercalc-eng.html">Raster algebra in QGIS with RasterCalc</a></li>
</ul>
</div>

<!--Contents end-->
<!--#include virtual="/scripts/date.php" -->
<p class="status"><span>Дата создания: 29.11.2011
<br>Автор(ы): <a href="/forum/memberlist.php?mode=viewprofile&u=5325" target="_blank">Александр Бруй</a></p>
<!--#include virtual="/inc/footer2.php" -->
