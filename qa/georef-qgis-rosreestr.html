<!--#include virtual="/inc/header02.txt" -->
<title>GIS-Lab: Географическая привязка данных в QGIS</title>
<!--#include virtual="/inc/header2.txt" -->
<div class="cont">
<div class="col1">

<ul class="path">
   <li class="first"><a href="/">Главная</a></li>
   <li><a href="/qa.html">Вопросы и ответы</a></li>
</ul>
<!--Contents start-->
<h1>Географическая привязка данных в QGIS: пример привязки топокарты по сетке</h1>
<p class="ann">Описание отдельного случая привязки растровых данных</p>
<p class="discuss discuss_top"><span><!--#include virtual="/scripts/forum-comments-num.php?i=4687"--></span></p>
<p>Общая информация по процессу привязки в QGIS доступна в статье <a href="/qa/georef-qgis.html"> Географическая привязка данных в QGIS</a>.  </p>
            <p>Продемонстрируем пример быстрой привязки растровых материалов на примере абрисов границ субъектов РФ с сайта Росреестра. Рассмотрим подготовку проекта и нюансы процесса привязки.</p>
            <p>Перед началом работы, убедитесь, что:</p>
            <ul>
              <li>Разделитель целой и дробной части в системе - точка, а не запятая, иначе возможно появление ошибки &quot;Невозможно расчитать трансформацию&quot;, если привязка проходит без проблем, то разделитель можно не менять (замечено в Windows 7 64bit). </li>
              <li>Названия рабочих папок и самих растров не содержат кириллицы и пробелов. </li>
            </ul>
            <h2>1. Выбор растра </h2>
            <p>Возьмем один из растров, например вот такой (<a href="/data/samples/rosreestr-93-1.jpg">загрузить исходник для примера</a>):</p>
            <p align="center"><img src="/images/georef-qgis-rosreestr-01.gif" width="500" height="525"></p>
            <p>Изучив растр, можно увидеть, что он по охвату соответствует листу топографической карты масштаба 1:100'000 M37-128. Эта информация позволяет определить, к чему удобнее привязывать этот растр. В нашем случае, мы можем осуществить привязку по опорным точкам - углам топографического листа, которым соответствуют кресты на картах. </p>
            <p>Сохранять в другой формат его не обязательно, можно оставить в JPG. Обратим внимание на две особенности растра сильно ускоряющие его привязку:</p>
            <ol>
              <li>Наличие угловых крестов  (без координат, но нас это не смутит)</li>
              <li>Наличие номенклатурного номера по которому мы можем точно определелить координаты этих крестов. </li>
            </ol>
            <h2>2. Подготовка проекта </h2>
            <p>Запустим новый чистый проект QGIS и загрузим, как векторные (<em>Слой/Добавить векторный слой</em>), следующие слои:</p>
            <ul>
              <li>Разграфка топографических карт масштаба 1:100'000 на РФ (в 1 см - 1 км) (<a href="/qa/topogrids.html">перейти</a> или <a href="/data/topogrid/topo1km-rus.7z">загрузить слой</a>)</li>
              <li>Узловые точки к разграфке топографических карт масштаба 1:100'000 на РФ (отдельный слой) (<a href="/qa/topogrids.html">перейти</a> и <a href="/data/topogrid/topo1km-rus-points.7z">загрузить слой</a>)</li>
              <li>Примерные границы субъектов федерации (<a href="/qa/vmap0.html">перейти</a> или <a href="/data/vmap0/bounds-correct-utf.7z">загрузить слой</a>)</li>
              </ul>
            <p>Задайте соответствующие условные обозначения. Слою границ субъектов задайте прозрачную заливку и увеличьте толщину линий.</p>
            <p align="center"><img src="/images/georef-qgis-rosreestr-02.gif" width="542" height="177"> </p>
            <p>В свойствах слой разграфки топографических карт включите отображение подписей из поля INDEXNUM, настройте по своему вкусу. </p>
            <p align="center"><img src="/images/georef-qgis-rosreestr-03.gif" width="553" height="214"></p>
            <p>Найдите соответствующий лист топографической карты. Для этого:</p>
            <ol>
              <li>Откройте таблицу слоя topo1km-rus</li>
              <li>Укажите в поле поиска имя искомого листа (M38-127, буква M - латинская) и выберите поле поиска INDEXNUM  в котором будет искаться название листа<br>
                <br>
                <img src="/images/georef-qgis-rosreestr-06.gif" width="732" height="137"><br>
                Альтернативный способ поиска, нажать <em>Расширенный поиск</em> и ввести в поле SQL условия INDEXNUM = 'M38-127' (включая одинарные кавычки). <br>
              </li>
              <li>Нажмите Поиск. Будет найдена одна запись.  </li>
              <li>Для удобства можно включить режим <em>&quot;Показать только выбранные записи&quot;</em></li>
              <li>Нажмите кнопку <em>Увеличить до выбранного</em> <img src="/images/georef-qgis-rosreestr-07.gif" width="28" height="27"></li>
              <li>После этого можно снять выделение. </li>
            </ol>
            <p>После увеличения на соответствующем листе топографической карты содержание вида данных должно быть примерно следующим:</p>
            <p align="center"><img src="/images/georef-qgis-rosreestr-04.gif" width="604" height="416"></p>
            <h2>3. Расстановка точек и привязка</h2>
            <p>С общим описанием процесса привязки можно ознакомиться в <a href="/qa/georef-qgis.html">специальной статье</a>. Здесь кратко перечислим последовательность действий.</p>
            <ol>
              <li>Модуль географической привязки данных называется <strong>Привязка растров (GDAL)</strong> (Georeferencer GDAL) и запускается через <em>Модули\Привязка растров (Plugins\Georeferencer)</em>. Если этого модуля в меню Модули нет, необходимо сначала  подключить его через <em>Модули\Управление модулями</em> (<em>Plugins\Plugin manager</em>).</li>
              <li>Загружаем исходный растр</li>
              <li>Устанавливаем тип транформации: Полиномиальное 1</li>
              <li>Расставляем точки привязки щелкая сначала на привязываемом растре, выбирая кнопку &quot;На карте&quot; и щелкая на соответствующей этого углу точке.</li>
              <li>Расставляем таким образом минимум 3, а лучше 4 точки. В ситуации, когда крестов на растре меньше 3 можно получить дополнительные точки например с соседних растров. Другой хороший источник информации для дополнительной привязки - WMS сервер NASA (<em>Слой\Добавить WMS-слой\Сервера по умолчанию\NASA (JPL)</em>, <em>Подключиться</em>, выбрать global mosaic и нажать <em>Добавить</em>) </li>
            </ol>
            <p>Результат:</p>
            <p align="center"><img src="/images/georef-qgis-rosreestr-05.gif" width="581" height="394"></p>
            <p>Как можно видеть, кресты достаточно точно совпали с точками, что для данной задачи (учитывая качество исходных материалов) можно считать решением. Для более качественной проверки результата, проверять его следует третьим, независимым проверочным набором данных.</p>
            <p class="discuss"><span><!--#include virtual="/scripts/forum-comments-num.php?i=4687"--></span></p>
<div class="links">
<h2>Ссылки по теме</h2>
	<ul>
		   <li><a href="/qa/georef-qgis.html">Географическая привязка данных в QGIS</a></li>
	</ul>
</div>
<!--Contents end-->
<!--#include virtual="/scripts/date.php" -->
<p class="status"><span>Дата создания: 07.02.2010
<br>Автор(ы): <a href="/forum/memberlist.php?mode=viewprofile&u=2" target="_blank">Максим Дубинин</a></span></p>
<!--#include virtual="/inc/footer2.php" -->