<!--#include virtual="/inc/header02.txt" -->
<title>GIS-Lab: Географическая привязка растровых данных в ImageWarp</title>
<!--#include virtual="/inc/header2.txt" -->
<div class="cont">
<div class="col1">

<ul class="path">
   <li class="first"><a href="/">Главная</a></li>
   <li><a href="/qa.html">Вопросы и ответы</a></li>
</ul>
<!--Contents start-->
<h1>Географическая привязка растровых данных в ImageWarp</h1>
<p class="ann">Описание одного из самых простых методов пространственной              привязки растровых данных.</p>
<p class="discuss discuss_top"><span><!--#include virtual="/scripts/forum-comments-num.php?i=2329"--></span></p>
            <p>Данный метод является  одним из самых простых и быстрых методов пространственной
              привязки растровых данных не требующий отдельного програмного обеспечения,
              кроме бесплатно распространяемого расширения ImageWarp для Arcview (aвтор: Kenneth R. McVay)
            и модуля Spatial Analyst.</p>
            <p>Обычно трансформацию растровых данных осуществляют
              в других приложениях, средствами Arcview, без привлечения платных
              модулей (таких как, например, Image Analysis) осуществлять трансформацию
              растров невозможно, зато можно использовать средства Spatial Analyst
              для трансформации grid'ов (растровая модель данных используемая
              в Spatial Analyst и Arcinfo Workstation).</p>
            <p>Более широкие возможности по обработке растровых данных
              предоставляют специализированные пакеты, например ERDAS IMAGINE,
              ENVI и другие.</p>
            <p>Если вы все-таки решили привязать растр не выходя
              из Arcview.</p>
            <p>1. Установите расширение <a href="/programs/avenue/imagewarp.zip">ImageWarp</a> (1.3 Mb) .
                Обратите внимание, что для работы с ним необходим модуль Spatial Analyst - совершенно отдельный
                продукт, к тому же платный, так что если у вас его нет, то воспользоваться
                ImageWarp невозможно. При установке расширения необходимо указать папку, куда установлен Arcview GIS, это должна быть папка на один уровень выше папок Ext32 и Bin32. Например: C:\Gis\Arcview3\AV_GIS30\ARCVIEW\</p>
            <p>2. Запустите Arcview и добавьте расширение ImageWarp
                (<b>File\Extensions...</b>), модуль Spatial Analyst добавится
              автоматически (если он установлен, см. пункт 1).</p>
            <p align="center">              <img src="/images/imagewarp-07.gif" alt="imagewarp" width="376" height="305" /></p>
            <p>3. Откройте сессию ImageWarp: Проект - ImageWarp\ImageWarp
            session. Для этого сделайте активным менеджер проекта и выберите из меню ImageWarp.</p>
            <p align="center">              <img src="/images/imagewarp-08.gif" alt="imagewarp" width="464" height="412" /><br />
            </p>
            <p>4. Укажите какой растр вы хотите привязать <b>Image
                    to be rectified</b>, и тему которая будет использоваться в качестве
                    основы к которой будете привязывать растр <strong>Theme to rectify to</strong>. В качестве опорной
                темы может использоваться как растр так и векторный слой. Для этого примера мы используем привязку топографической карты (test.tif) к созданному специально для этого точечному шейп-файлу, где каждая точка - один из углов карты (<a href="txt2points.html">как создать такой файл</a>). </p>
            <p align="center"><img src="/images/imagewarp-09.gif" alt="imagewarp" width="337" height="186" /></p>
            <p>5. Если ваша опорная тема - векторный слой в lat\long,
                    но вы хотите привязать растр в определенную проекцию, имеет смысл
                ее задать. В нашем случае точечная тема с координатами углов находится в географической проекции, а растр мы хотим получить в проекции Альберса, поэтому зададим эту проекцию виду.</p>
            <p align="center"><img src="/images/imagewarp-10.gif" alt="imagewarp" width="412" height="315" /></p>
            <p>6. Создайте новый файл опорных точек (тиков) или загрузите
                    уже существующий. Файл тиков представляет собой обычный файл DBF,
                    один из стандартных форматов таблиц понимаемый Arcview. При желании
                    содержимое этого файла можно подредактировать в Excel или в том
                же Arcview.</p>
            <p align="center"><img src="/images/imagewarp-11.gif" alt="imagewarp" width="325" height="141" /></p>
            <p>7. С помощью инструмента <img src="../images/imagewarp-01.gif" width="22" height="21" /> начинайте расставлять тики попеременно щелкая сначала на опорной
                    теме, потом на растре который вы привязываете. То есть <b>от окна содержащего источник координат TO (в нашем случае содержащего точки)
                к окну, содержащему привязываемый растр </b>а не наоборот, как в другом программном обеспечении.</p>
            <p align="center"><img src="/images/imagewarp-12.gif" alt="imagewarp" width="300" height="522" /></p>
            <p>8. Необходимо расставить несколько точек привязки, в зависимости от выбранной степени преобразования (см. ниже). При желании можно так же:           </p>
            <ol>
              <ul>
                <li>удалить выбранную точку <img src="/images/imagewarp-02.gif" width="23" height="21" /></li>
                <li>удалить все точки <img src="/images/imagewarp-03.gif" width="20" height="20" /></li>
                <li>включить\выключить выбранные точки привязке <img src="/images/imagewarp-04.gif" width="22" height="21" /> отключенные тики будут присутствовать в dbf файле, но не будут
                  участвовать в расчете коэффициентов трансформации</li>
              </ul>
            </ol>
            <p>9. После расстановки тиков нужно расчитать среднеквадратичную
                ошибку (RMS - root mean square error) для заданной степени полинома <img src="/images/imagewarp-05.gif" width="22" height="21" />. Степень
                полинома определяет насколько сильные деформации будет претерпевать
                растр для соответствия расставленным опорным точкам. Обычно используют
                степень полинома не более 2-3. Большие полиномы вносят слишком
                большие искажения в растр. Для расчета RMS для определенной степени
                полинома необходимо определенное количество опорных точек. Число
                точек для полинома N будет равно <b>n = (p + 1) (p + 2) / 2</b>.То
                есть для полинома 1 степени, количество пар точек должно быть
                равно 3, для 2 полинома - 6, и т.д.</p>
            <p> 10. Начать трансформацию <img src="/images/imagewarp-06.gif" width="28" height="23" border="1" /></p>
            <p>11. Выбрать тип интерполяции яркости пикселов, то есть
                                данных находящихся в ячейках растра. Существует 3 варианта (различающихся
                                по количеству соседних пикселов участвующих в расчете результирующего
            значения пиксела на выходе):</p>
            <ul>
              <li>              <b>Cubic Convolution</b> - Кубическая свертка, применяется для
                трансформации аэро- и космической съемки, полноцветных (true color)
                растров, в случае когда требуется максимально сохранить объекты
                визуально. Линейные объекты остаются линиями при повороте, хотя
                количество пикселов определенного значения (цвета) увеличивается,
                появляются пикселы с новыми, промежуточными-интерполированными
                значениями (максимальное количество пикселов участвует в расчете
              яркости результирующего пиксела);</li>
              <li>                <b>Bilinear interpolation </b>- Билинейная интерполяция</li>
              <li>                <b>Nearest Neiboughr </b>- Метод ближайшего соседа, используется
                при трансформации индексированных растров, когда нужно сохранить
                статистику изображения (для расчета яркости результирующего пиксела
                используется только один пиксел). При повороте линейных объектов
                они становятся ступенчатыми, но количество пикселов с определенным
                значением в конечном растре тоже, что и в исходном растре;</li>
            </ul>
            <p>12. Выбрать формат конечного растра <b>BSQ BIP BIL
                    JPG TIF. </b>Любой из этих форматов может быть потом загружен
                    в Arcview, JPG потребует для этого включения специального расширения
                (<b>File\Extensions\JPEG(JFIF) Image Support</b>).</p>
            <p>13. Выбрать размер пиксела.
              Значение 0 - дает возможность программе самой подобрать размер
              пиксела так, чтобы количество рядов\колонок в конечном растре
              максимально соответствовало начальному (размер файла на диске
              начального растра тоже будет примерно равен размеру конечному).
              Это не всегда хорошо, в случае, когда поворот засчет перепроектирования
              велик и растр значительно меняет размеры. В этом случае количество
              рядов\колонок может сильно увеличиться, а 0 заставит программу
              сильно уменьшить разрешение растра, что ухудшит его качество. </p>
            <p align="center"><img src="/images/imagewarp-13.gif" alt="imagewarp" width="353" height="242" border="1" /></p>
            <p>14. Выбрать куда сохранить файл конечного растра.</p>
            <p>ImageWarp переводит растр в грид - растровую модель
              данных используемую Spatial Analyst'ом. Грид может быть перепроектирован
              методами Spatial Analyst. После трансформации грид переводится в
              растр обратно и сохраняется в нужном формате.</p>
            <p>Конечно в целях эффективности и экономии времени следует
              попробовать найти другой способ трансформации, так как перевод в
              грид и обратно в растр требует достаточно много времени. Но для
              первого знакомства с привязкой растров этого вполне достаточно.</p>
            <p class="discuss">
				<span><!--#include virtual="/scripts/forum-comments-num.php?i=2329"--></span>
			</p>
			<div class="links">
			<h2>Ссылки по теме</h2>
			<ul>
               <li><a href="shapewarp-av.html">Привязка векторных данных находящихся в неизвестной или файловой системе координат в Arcview GIS</a></li>
			   <li><a href="/qa/georef-ag.html">Координатная привязка карты в ArcMap</a></li>
			</ul>
			</div>
<!--Contents end-->
<!--#include virtual="/scripts/date.php" -->
<p class="status"><span>Дата создания: 22.10.2002
<br>Автор(ы): <a href="/forum/memberlist.php?mode=viewprofile&u=2" target="_blank">Максим Дубинин</a></span></p>
<!--#include virtual="/inc/footer2.php" -->
