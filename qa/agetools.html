<!--#include virtual="/inc/header02.txt" -->
<title>GIS-Lab: Обрезка полигонов и получение координат с помощью AGETools в ArcGIS</title>
<!--#include virtual="/inc/header2.txt" -->
<div class="cont">
<div class="col1">

<ul class="path">
   <li class="first"><a href="/">Главная</a></li>
   <li><a href="/qa.html">Статьи</a></li>
</ul>

<!--Contents start-->
<h1>Обрезка полигонов и получение координат с помощью AGETools в ArcGIS</h1>

<p class="ann">Описание набора инструментов </p>
<p class="discuss discuss_top"><span><!--#include virtual="/scripts/forum-comments-num.php?i=6251"--></span></p>
 <p>Набор инструментов AGETools (ArcGIS Edit Tools) был разработан  <a href="http://gis-lab.info/forum/memberlist.php?mode=viewprofile&u=8649" target="_blank">Bishop</a> для <a href="http://gis-lab.info/forum/memberlist.php?mode=viewprofile&u=3" target="_blank">taimyr</a> в связи с необходимостью решения ряда задач, <a href="/qa/substract-poly.html">ранее реализованных</a> как расширения для ArcView 3x. Набор инструментов состоит из 2 групп - инструменты работы с полигональными геометриями и инструменты для снятия координат точек.</p>
 <p> Инструментарий решено сделать общедоступным и распространять на основе лицензии GPL v.3, поэтому предоставляется  как готовое расширение, так и исходные коды. Инструментарий работает в ArcGIS 9.x - 10.x. Тестировался на ОС Windows XP (х32 и х64), Windows Server 2003 (х32 и х64), Windows 7 (х32 и х64).</p>
 <p><strong>Оглавление</strong>
     </p>
  </p>
 <ol>
<li><a href="#01">Установка набора инструментов.</a></li>
  <li><a href="#02">Инструментарий для создания сплошных полигональных геометрий.</a></li>
  <li><a href="#03">Инструментарий для снятия координат.</a></li>
</ol>
<h2><strong><a name="01" id="01"></a></strong>1. Установка набора инструментов</h2>
<p><a href="http://gis-lab.info/programs/agetools-setup-0.1.0.zip">  Скачать расширение AGEdit Tools</a> (628 Кб). Для установки заменить расширение файла на .exe и запустить. Будет предложено установить либо обе части расширения, либо любую по выбору.

<p>  <img src="../images/age00.jpg" width="513" height="399">
<p>  Деинсталлировать установленное расширение можно, запустив  &quot;Program Files (Program Files (x86) на 64-разрядных ОС) \AGEditTools\Uninstall.exe&quot;
<p>
  <a href="http://gis-lab.info/programs/agetools_code.zip">Скачать исходный код расширения</a> 860 кб (C++).
<p>
  Оба инструмента уже несколько месяцев активно используются автором статьи в рабочих проектах, и существенных проблем не обнаружено, мало того, инструмент создания полигональных геометрий в отличие от аналога для ArcView 3.x  не даёт массовых топологических ошибок в созданом покрытии. 
<h2><strong><a name="02" id="02"></a></strong>2. Инструментарий для создания сплошных полигональных геометрий</h2>
<p>  <strong>Назначение</strong>
<p>
  Для создания сплошных полигональных покрытий, чаще всего - дешифровочных схем и оцифровки тематических карт/планов. В этих случаях чаще идут следующими путями:
<p>а) созданием единого полигона на всю область работы и "резкой" его на куски. На мой взгляд, медленно и не всегда удобно.   
  <p>б) использованием инструментов, обеспечивающих автоматическую пристыковку вновь созданного полигона (ArcView 3, инструмент Stream Digitize). Недостатки - на сложных границах вешает систему вплоть до крушения, "дырки" внутри создаваемого полигона, если там уже есть объекты, всё равно не прорезает.
    <p>в) созданием линейного слоя границ и конвертацией в полигональный. Недостаток - сразу не видно созданных контуров в виде именно полигонов, поэтому часто требуется дополнительная "резка".
      Мне всегда было удобнее рисовать "всплошную", то есть новый полигон рисуется поверх уже имеющихся и по ним обрезается.     
    <p>Специально для этого, Максимом Дубининым в свое время было создано расширение для ArcView (<a href="/qa/substract-poly.html">Заполнение пустого пространства ограниченного полигонами</a>). Этот метод имел  недостатки - как правило в созданном таким образом слое присутствовало множество топологических ошибок. Но их исправление - дело в целом достаточно простое, а выигрыш в скорости работы полностью компенсировал этот требующий дополнительных операций недостаток. В настоящее время на современных системах, однако, стало достаточно комфортно работать в ArcGIS/ArcMap.    
    <p>      <strong>Работа с расширением</strong>
    <p> После инсталляции расширения в списке задач Task появятся 2 новых пункта - "Усечь геометрию слоем" и   "Усечь слой геометрией", в меню Other Tasks (Другие задачи), в   Editor-Options-Edit-Tasks - это выглядит так :    
    <p>      <img src="../images/age01.jpg" width="505" height="518">    
    <p>      По умолчанию новые пункты меню добавляются в Задачи создания (Edit Task). Если они не появились - выполнить Editor-Options-Edit-Tasks - Add - пункты будут   там, добавить их в задачи и стрелками переместить в удобное место.<br>
      <br>
      <img src="../images/age02.jpg" width="258" height="328"><br>
      <br>
      Инструменты работают так же, как и Create NewFeature (Создать новый объект)- создают полигон,   можно переключатся в потоковой режим и рисовать freehand.  "Усечь   геометрию слоем" - автоматом обрезает вновь созданный полигон по всем   нижележащим. При нажатой клавише Ctrl - обрезка производится по всем   полигональным слоям, доступным  для выборки, без - только по   редактируемому слою.    
    <p>      <strong>Примеры работы</strong>
    <p>
      Усечение только по редактируемому слою:
    
    <p>      <img src="../images/age03.jpg" width="383" height="384">
    <p>
      Усечение по всем слоям, доступным для выборки:
    <p>      <img src="../images/age04.jpg" width="383" height="388">    
    <p> Инструмент "Усечь слой геометрией" - наоборот, вырезает вновь создаваемый полигон   из всех нижележащих, а при нажатом Ctrl - и из других полигональных   слоев, доступных для выборки. <br>
      Также доступен параметр, выделять ли   последний созданный полигон, он включается-выключается через новую   вкладку в Editing Options флажком "Выделить геометрию после операции".
    <h2><strong><a name="03" id="03"></a></strong>3. Инструментарий для снятия координат</h2>

<p><strong>Назначение</strong></p>
<p>  Предназначен для быстрого, без рассчетов и (или) ручных перебиваний координат нужных   точек на карте в любые приложения, как в виде текста, так и в виде 2   полей таблицы, в различных форматах. Например - быстрый   перенос координат нужных точек в базу данных (для последующего   построения точечных слоев типа Event) или переноса координат в текстовый   документ.</p>
<p>  <strong>Работа с расширением:</strong></p>
<p>  После установки расширения в контекстном меню настройки появится новая панель инструментов:</p>
<p>      <img src="/images/age05.jpg" width="283" height="205"></p>
<p> Также ее можно включить в Tools-Customize-Toolbars" (Настройка-Панели инструментов) - поставить флажок на "Снятие координат".</p>
<p>        <img src="/images/age06.jpg" width="453" height="350"></p>
<p>  Появившаяся панель инструментов имеет следующий вид:</p>
<p><img src="/images/age07.jpg" width="369" height="33"></p>
<p>  Назначение кнопок (слева направо):</p>
<p> 1) Собственно инструмент ("перекрестье прицела") снятия координат;<br>
  2) Список выбора формата вывода;<br>
  3) Добавление пользовательских форматов. Открывает окно :</p>
<p><img src="/images/age08.jpg" width="295" height="191"></p>
<p>  Форматы с разделителем [tab] предназначены для вставки в таблицы в 2   смежные выделенные ячейки по горизонтали, с разделителем [ret] - по   вертикали, форматы с [W] содержат также обозначения - с.ш., в.д. Маска   ввода ясна из приведенных примеров. В случае некорректных масок или   пустого значения - будет выдано сообщение об ошибке;<br>
  4) Очистка списка снятых координат (см. инструмент 6);<br>
  5)  Поменять местами X  и Y координаты (также работает для всего списка снятых координат);<br>
  6) Отображение окна со снятыми координатами;</p>
<p><img src="/images/age09.jpg" width="212" height="451"></p>
<p>  Инструмент не только снимает координаты одной точки, но может и их   накпливать, а также добавлять в имеющиеся в проекте таблицы (списки   выбора  таблиц и полей в ней внизу окна). Координаты по умолчанию   добавляются в последнюю запись таблицы, если есть выделенная запись - в   выделенную, если выделено несколько записей - в первую из выделенных.</p>
<p> В окне дублированы кнопки очистки хранящегося в памяти списка координат и и замены порядка X-Y координат.</p>
<p> В текущей версии расширения координаты добавляются только в таблицы формата .dbf и таблицы "родных" геобаз данных ArcGIS.</p>
<p> При изменении формата списком 2 все   координаты в этом окне также поменяют формат, записанные в таблицу -   останутся в ней, как и вводились.<br>
                      <!-- обсуждение на форуме, цифра изменяется при публикации статьи -->   
</p>
<p class="discuss"><span><!--#include virtual="/scripts/forum-comments-num.php?i=6251"--></span></p>

<!-- ссылки -->
<div class="links">
	<h2>Ссылки по теме</h2>
		<ul><li><a href="/qa/substract-poly.html">Заполнение пустого пространства ограниченного полигонами</a></li>
		</ul>
</div>
<!--Contents end-->
<!--#include virtual="/scripts/date.php" -->
<p class="status"><span>Дата создания: 07.02.2011<br>
Автор(ы): <a href="/forum/memberlist.php?mode=viewprofile&u=3" target="_blank">Игорь Поспелов</a></span></p>
<!--#include virtual="/inc/footer2.php" -->

