<!--#include virtual="/inc/header02.txt" -->
<title>GIS-Lab: Координатная привязка карты в ArcMap</title>
<!--#include virtual="/inc/header2.txt" -->
<div class="cont">
<div class="col1">

<ul class="path">
   <li class="first"><a href="/">Главная</a></li>
   <li><a href="/qa.html">Вопросы и ответы</a></li>
</ul>
<!--Contents start-->
<h1>Координатная привязка карты в  ArcMap</h1>
<p class="ann">Самый простой случай привязки в географическую систему координат отсканированной карты.</p>
<p class="discuss discuss_top"><span><!--#include virtual="/scripts/forum-comments-num.php?i=1071"--></span></p>
<p>Координатная (географическая) привязка в ArcMap осуществляется в несколько этапов, последовательность которых зависит от от типа привязываемого материала. Данный пример иллюстрирует один из самых простых случаев, привязку тематической карты, с нанесеннием дополнительной сетки координат, в данном примере привязка осуществляется в географическую систему координат. </p>
<p>Данный пример можно использовать в качестве урока по координатной привязке карты в ArcGIS/ArcMap. Общий вид инструментов и панелей соответствует ArcGIS 9.0, данную методику привязки можно применять и в других версиях ArcGIS, при этом внешний вид инструментов может отличаться от приведенных в статье. В статье используется терминология русифицированной версии ArcGIS, которая не всегда совпадает с общепринятой. </p>
            <p>Для проверки полученных результатов и для того, чтобы попробовать самому, можно использовать <a href="/other/georef-ag-testfiles.rar">этот набор файлов</a>. </p>
            <p><b>Разберем процесс привязки по шагам </b></p>
            <p><img src="/images/1.gif" alt="1" width="33" height="41" align="left" /><strong>Подготовка растра</strong> </p>
            <p>Отсканировать карту с разрешением,
              достаточным для решения поставленных задач. Рекомендуется полностью сохранить координатную сетку, если она есть и оставить зарамочное оформление, если оно не сильно велико.</p>
            <p align="center"><img src="/images/georef-ag-01.gif" width="500" height="268" /></p>
            <p><img src="/images/2.gif" alt="1" width="33" height="41" align="left" /><strong>Координатная сеть</strong> </p>
            <p>Если на карте  не нанесена координатная сетка (например присутствуют только на рамке), можно самостоятельно это сделать в графическом редакторе. Если карта очень мелкого масштаба (страны, континенты), то это не всегда возможно, так как меридианы и параллели в некоторых проекциях не являются прямыми линиями, но так же верно, что для карт часто точность так же не велика. </p>
            <p align="center"><img src="/images/georef-ag-02.gif" width="500" height="268" /> </p>
            <p><img src="/images/3.gif" alt="1" width="33" height="41" align="left" /> <strong>Загрузка данных в ArcGIS</strong> </p>
            <p>Загрузить отсканированную карту, Файл\Добавить данные и слои (File\Add Data) (На вопрос &quot;создавать пирамидальные слои&quot;, ответить &quot;Нет&quot; ).</p>
            <p align="center"><img src="/images/georef-ag-11.gif" alt="добавить данные" width="189" height="327" />  <img src="/images/georef-ag-10.gif" alt="добавить данные" width="491" height="327" /></p>
            <p><img src="/images/4.gif" alt="1" width="33" height="41" align="left" /><strong>Панель пространственной привязки</strong> </p>
            <p>Запустить ArcMap и включить панель пространственной привязки (Вид/Панели инструментов/Пространственная привязка, View\Toolbars\Georeferencing).
              Панель имеет следующий вид:</p>
            <p align="center"><img src="/images/georef-ag-03.gif" width="567" height="71" /></p>
            <p><img src="/images/5.gif" alt="1" width="33" height="41" align="left" /><strong>Таблица связей</strong> </p>
            <p>Нажать на кнопку Таблица (последняя в панели инструментов
              привязки). При этом появится пустая таблица. Уберите галочку в окне
              &quot;Автонастройка&quot;. Отключение автонастройки означает, что в данном случае, карта не будет автоматически трансформироваться после каждой новой точки привязки, в данном случае это было бы неудобно. </p>
            <p align="center"> <img src="/images/georef-ag-04.gif" width="579" height="361" /><br />
            </p>
            <p><img src="/images/6.gif" alt="1" width="33" height="41" align="left" /><strong>Создание связей</strong>  </p>
            <p>С помощью инструмента привязки
              (предпоследняя кнопка), нажимая на пересечение координатных линий (или любой другой точке с известными координатами) на карте и вторично
              щелкая в любом месте карты правой кнопкой и выбрав &quot;Ввести координаты&quot;, ввести правильные координаты для
              точки. Координаты должны вводиться в формате DD.DDDDD (десятичные градусы), если ваши координаты в другом формате, например DD MM SS, необходимо перевести их в нужный (<a href="/qa/dms2dd.html">подробнее о том, как можно это сделать</a>). </p>
            <p>Необходимо повторить этот шаг для всех или большинства точек с известными координатами на карте, чем больше точек привязки, тем более точно будет привязана ваша карта. </p>
            <p>В таблице связей, с каждым новым нажатием, будут появляться
              новые строки, которые при необходимости можно корректировать
              или удалять. </p>
            <p align="center"><img src="/images/georef-ag-05.gif" width="554" height="244" /></p>
            <p> </p>
            <p><img src="/images/7.gif" alt="1" width="33" height="41" align="left" /> <strong>Выбор модели трансформации</strong> </p>
            <p>После расстановки всех точек, в таблице необходимо включить функцию &quot;Автонастройка&quot;.
              При этом карта изменит размеры и положение ориентируясь к координатам
              привязки. При этом точки привязки приблизятся
              к точкам с известными координатами. Если расставлено больше 6 точек, можно попробовать выбрать полиномиальную модель трансформации 2-го порядка учитывающую возможную кривизну линий. Если переключение в этот режим приводит к очевидным сильным искажениям, рекомендуется просмотреть точки на предмет большой средне квадратичной ошибки (<a href="rmse.html">RMSE</a>) и удалить их, пока результат не станет удовлетворительным. </p>
            <p align="center"><img src="/images/georef-ag-06.gif" width="487" height="303" /></p>
            <p><img src="/images/8.gif" alt="1" width="33" height="41" align="left" /><strong>Сохранить связи</strong> </p>
            <p>Внесенные в таблицу координаты привязки рекомендуется сохранить,
              нажав на кнопку &quot;Сохранить&quot;. Таким же образом можно загрузить
              (нажав кнопку &quot;загрузить&quot; и выбрать путь) данную таблицу в дальнейшем. </p>
            <p> <img src="/images/9.gif" alt="1" width="33" height="41" align="left" /><strong>Проверка</strong></p>
            <p>Для проверки привязки можно загрузить существующий слой
              или шейп-файл, про который известно, что он правильно привязан географически и имеет ту же систему координат (в данном случае это граница страны в географической системе координат). Обратите внимание на несовпадение синей линии - границы из векторного слоя и красной линии - той же границы с самой карты. </p>
            <p align="center"><img src="/images/georef-ag-07.gif" width="244" height="177" /></p>
            <p><img src="/images/10.gif" alt="1" width="55" height="41" align="left" /><strong>Дополнительная коррекция</strong> </p>
            <p>Для дополнительной корректировки привязанной карты, можно, используя навигационные инструменты (увеличить, уменьшить и т.д.) добавить дополнительные точки привязки между привязываемой картой и известной границей. Для наблюдения за изменениями расположения карты
              можно оставить опцию &quot;Автонастройка&quot; включенной. Небольшое несовпадение карты и слоя может присутствовать постоянно. Для дальнейшего улучшения привязки, можно также найти связи опорные точки которых расположенные на большом расстоянии
              и удалить их, оставив таким образом все &quot;хорошие&quot; связи.
              Удаление проводится в таблице точек связей.</p>
            <p><img src="/images/11.gif" alt="1" width="42" height="41" align="left" /><strong>Использование полинома 2-го порядка</strong> </p>
            <p>Для более тонкой коррекции, если вы не достигли
              еще совпадения границ слоя и привязываемой карты можно сделать следующее: выбрать в таблице связей в опции &quot;Преобразование&quot; значение
              &quot;Полином 2-го порядка&quot;. При этом карта должна еще больше исказиться, &quot;подойдя&quot;
              под границы шейп-файла. Далее нужно еще раз просмотреть связи точек,
              можно добавить новые и откорректировать уже существующие. У вас должна
              получится примерно следующая ситуация:</p>
            <p align="center"><img src="/images/georef-ag-08.gif" width="500" height="270" /></p>
            <p>При этом нужно помнить, что полного совпадения привязываемой карты и источника координат (другой карты, координатоной сетки и т.д.) как правило достичь невозможно, из-за ошибок сканирования, несоответствия масштабов и других источников ошибок. </p>
            <p><img src="/images/12.gif" alt="1" width="53" height="41" align="left" /><strong>Привязка исходного растра</strong> </p>
            <p>После получения окончательного
              варианта привязки нужно еще раз сохранить все точки привязки в таблице
              связей. После этого, нужно удалить слой с которым вы работали и загрузить
              слой без координат (если вам нужна карта без нарисованных осей). В
              новый файл ArcMap загрузите сначала копию оригинальной карты, далее
              запустите модуль геопривязки, таблицу, загрузить точки из сохраненного
              вами файла. Для проверки можно так же загрузить шейп-файл. Если вы не модифицировали исходный растр или произведенные модификации (нарисованные линии) вас не будут смущать на результате, этот шаг можно пропустить. </p>
            <p><img src="/images/13.gif" alt="1" width="53" height="41" align="left" /><strong>Сохранение результатов</strong> </p>
            <p>После того, как вы убедитесь, что вы максимально
              приблизились к результату - нужно сохранить полученные результаты.
              Для этого необходимо в модуле привязки выбрать кнопку - &quot;Пространственная
              привязка&quot;/ Трансформировать: где нужно указать конечный путь и название файла. Так же
              в опции &quot;размер ячейки&quot; можно округлить число (например
              до 0,001) в сторону уменьшения. После нажатия ОК вы получите файл
              карты привязанный к используемой вами системе координат, который можно будет использовать с любой другой привязанной картой. </p>
            <p align="center"><img src="/images/georef-ag-09.gif" width="295" height="181" /> </p>
            <p><img src="/images/14.gif" alt="1" width="53" height="41" align="left" /><strong>Описание системы координат</strong> </p>
            <p>После привязки рекомендуется с помощью ArcCatalog можно задать созданному растру систему координат. Это делается с помощью меню Свойства (полученного вами файла)/пространственная
              привязка/изменить/выбрать.</p>
            <p class="discuss">
				<span><!--#include virtual="/scripts/forum-comments-num.php?i=1071"--></span>
			</p>
			<div class="links">
			<h2>Ссылки по теме</h2>
			<ul>
               <li><a href="georef-gdal.html">Использование GDAL для привязки растровых материалов</a></li>
			   <li><a href="imagewarp.html">Географическая привязка растровых данных в ImageWarp</a></li>
			</ul>
			</div>
<!--Contents end-->
<!--#include virtual="/scripts/date.php" -->
<p class="status"><span>Дата создания: 06.06.2006
<br>Автор(ы): <a href="/forum/memberlist.php?mode=viewprofile&u=2" target="_blank">Максим Дубинин</a></span></p>
<!--#include virtual="/inc/footer2.php" -->
