<!--#include virtual="/inc/header02.txt" -->
<title>GIS-Lab: Подготовка к работе с треками для OSM: GPSBabel и JOSM</title>
<!--#include virtual="/inc/header2.txt" -->
<div class="cont">
<div class="col1">

<ul class="path">
   <li class="first"><a href="/">Главная</a></li>
   <li><a href="/qa.html">Вопросы и ответы</a></li>
</ul>
<!--Contents start-->
<h1>Подготовка к работе с треками для OSM: GPSBabel и JOSM</h1>
<p class="ann">Как подготовиться к работе с OSM с использованием внешнего программного обеспечения. </p>
<p class="discuss discuss_top"><span><!--#include virtual="/scripts/forum-comments-num.php?i=3628"--></span></p>
<p>Данная статья описывает подготовку к работе с OSM используя  внешний редактор. Подразумевается, что данные для картирования уже собраны,  если это не так, можно пропустить пункты 2, 3, 5, 6. Более простое описание,  описывающее процесс начала работы без использования дополнительно  устанавливаемого программного обеспечения (только веб-браузер и средство для  загрузки треков GPSBabel)  доступно в статье «<a href="/qa/osm-begin.html">Начало работы с  OpenStreetMap</a>». Как и другие описания, эта статья представляет один из возможных подходов к работе с данными OSM. </p>
            <p>Эта статья специально создана для ситуации, когда необходимо  объяснить начинающему пользователю процесс подготовки к картированию. Статья  может быть полезна для организации Mapping Party, в этом случае  рекомендуется, чтобы участники этого события ознакомились с ней до  начала работы. В идеальном случае, читателю рекомендуется попробовать собрать  некоторое количество данных, например небольшой трек и несколько фотографий и  попробовать подготовиться к работе, используя эту инструкцию.</p>
            <p>Данное описание адаптировано для Windows, но все описанное программное  обеспечение существует для Linux, MacOS и  других операционных систем. </p>
            <p>Перед началом работы убедитесь, что создана отдельная папка  для данных, в ней будут храниться загружаемые треки и фотографии.</p>
            <p><strong>Оглавление</strong></p>
            <ol start="1" type="1">
              <li><a href="#installbabel">Установка GPSBabel</a></li>
              <li><a href="#loaddata">Загрузка данных из GPS в файл трека </a></li>
              <li><a href="#loadimages">Получение       изображений</a></li>
              <li><a href="#installjosm">Установка       и подготовка к работе JOSM</a></li>
              <li><a href="#sync">Синхронизация       треков и фотографий </a></li>
              <li><a href="#loadosm">Загрузка данных OSM</a></li>
              </ol>
            <h2><a name="installbabel"></a>1.  Установка GPSBabel</h2>
            <p>Скачайте <a href="http://www.gpsbabel.org/download.html" target="_blank" class="external">GPSBabel</a>  и распакуйте его в отдельную папку. Установка программы не требуется.</p>
            <h2><a name="loaddata"></a>2.  Загрузка данных из GPS в файл трека </h2>
            <p>Данный пример  иллюстрирует работу с GPS типа Garmin 12, 60Csx и подобных.</p>
            <ol start="1" type="1">
              <li>Подключите       GPS к USB или COM порту с помощью соответствующего кабеля</li>
              <li>Вызовите       командный интерпретатор cmd (<em>Пуск/Выполнить</em>) и введите cmd.       </li>
              <li>Перейдите       в папку с GPSBabel<br>
                <br>
                <pre>dir c:\gis\gpsbabel</pre>
                Можно использовать Total       Commander и запустить cmd или следующую команду сразу из командной строки.       </li>
              <li>Выполните следующую команду (где start,stop – текущее число): <br>
                <br>
                <pre>gpsbabel.exe -p "" -t -i garmin -f usb: -x track,start=2009062100,stop=2009062100 -o gpx -F "mytrack-01.gpx"</pre>
                        <br>
                Результатом работы этой программы будет трек в формате GPX с именем файла mytrack-01.gpx.<br>
              </li>
              </ol>
            <h2><a name="loadimages"></a>3. Получение изображений</h2>
            <p>Изображения, полученные в процессе картирования, необходимо  загрузить из фотоаппарата с помощью специального кабеля. Желательно разместить  их в той же папке, где был сохранен трек GPX. Формат изображений — JPG. </p>
            <h2><a name="installjosm"></a>4. Установить и подготовить к работе JOSM</h2>
            <p>Перед началом работы необходимо убедиться в наличие Java. Определить установлена  она можно по наличию пункта Java в Панели управления  (Пуск/Панели управления). Если этот пункт отсутствует, необходимо сначала  загрузить и установить <a href="http://jdl.sun.com/webapps/getjava/BrowserRedirect?locale=en&host=www.java.com:80" target="_blank" class="external">Java</a> .
              После установки — перезагрузите компьютер.</p>
            <p>JOSM  — самый развитый редактор для данных OSM, устанавливаемый отдельно, для  редакции также можно пользоваться и  редактором запускаемым в веб-браузере Potlatch (<a href="osm-begin.html">подробнее</a>).</p>
            <p>Для установки и подготовки к работе JOSM нужно выполнить следующие шаги: </p>
            <ol start="1" type="1">
              <li>Загрузите       JOSM <a href="/programs/josm/josm-latest.jar" target="_blank" class="external">josm-latest.jar</a><br>
                  <br>
                  <a href="http://josm.openstreetmap.de/" target="_blank" class="external">JOSM</a> – активно       развиваемый редактор, поэтому рекомендуется использовать последнюю его       версию. <br>
              </li>
              <li>Во       избежание проблем с отсутствием памяти при записи JOSM, рекомендуется для его запуска       создать командный файл (например josm.bat)       следующего содержания (папки указывают на соответствующее расположение Java и JOSM):<br>
                <br>
                  <pre>"c:\Program Files\Java\jre6\bin\java.exe" -jar -Xmx512M "c:\Gis\Osm\josm-latest.jar"</pre>
                    <br>
                    Ключ -Xmx512M позволяет увеличить количество памяти доступной для JOSM, иначе можно часто ожидать сообщения о ее нехватке. <br>
                    <br>
                    Необходимо проверить соответствие путей к java.exe и josm-latest.jar реальным.       Для командного файла рекомендуется создать ярлык (правая кнопка на       названии файла в проводнике и пункт «Создать ярлык»). Этому ярлыку можно       задать рабочую папку, равную той, где хранится JOSM. <br>
              </li>
              <li>Установите       WebKit для JOSM<br>
                <br>
                WebKit  - браузер используемый JOSM для одновременного показа данных OSM и  спутниковых снимков высокого разрешения предоставленного Yahoo для OSM.
              Для его установки необходимо <a href="http://josm.openstreetmap.de/download/windows/webkit-image.zip" target="_blank" class="external">скачать</a> специальные библиотеки  и распаковать их в папку, где хранится josm-latest.jar. (<a href="http://wiki.openstreetmap.org/wiki/JOSM/Plugins/WMSPlugin" target="_blank" class="external">подробнее</a> на OSM Wiki)</li>
              <li>Запустите JOSM используя созданный ярлык. Убедитесь, что JOSM запускается       корректно и ошибок при загрузке не возникает.</li>
              <li>Добавьте поддержку IRS <br>
                <br>
IRS - данные лучшего разрешения, чем Landsat, но худшего чем высокое разрешение (QuickBird, Ikonos, WorldView). Однако, IRS доступен на большую часть территории Европейской части России. Данные предоставлены ИТЦ Сканэкс и сервисом Kosmosnimki.ru.<br>
<br>
Для добавления поддержки IRS, выберите в меню <em>Правка/Настройки/WMS</em>, нажмите <em>Добавить</em> и введите Имя: IRS и адрес: http://irs.gis-lab.info/?layers=irs&amp;<br>
              <br>
              Проверьте работоспособность IRS увеличив небольшую территорию и выбрав <em>WMS/IRS</em>. </li>
              <li>Зайдите в <em>Правка/Настройки</em></li>
              <li>Выберите закладку <em>Модули</em> <br>
                  <img src="/images/osm-prepare-04.gif" alt="osm" width="70" height="105"><br>
              </li>
              <li>Загрузите список расширений (<em>Скачать список</em>) </li>
              <li>Включите модули: </li>
              <ul>
                <li>AgPifoJ - загрузка и синхронизация изображений с треками</li>
                <li> wmsplugin - использование WMS сервисов с данными дистанционного зондирования</li>
                <li>validator - проверка данных</li>
              </ul>
              <li>Дождитесь их загрузки и перегрузите JOSM</li>
              <li>Убедитесь, что в JOSM появилось меню WMS, в панели слева появилась кнопка <img src="/images/osm-prepare-03.gif" alt="osm" width="35" height="35">, а в меню <em>Файл</em> появился пункт <em>Открыть изображения через AgPifoJ...</em></li>
              </ol>
            <p>Определить, какая версия JOSM установлена и какая версия является основной стабильной и последней, можно просто обратить внимание на основной экран программы, сразу после запуска, который показывает помимо последний обновлений и информацию о версиях.</p>
            <p align="center"><img src="/images/osm-prepare-05.gif" alt="osm" width="705" height="189"> </p>
            <p>После обновления JOSM, не забывайте заходить в список модулей и обновлять их. </p>
            <p>Подсказка: для облегчения установки вы можете воспользоваться готовой сборкой JOSM, с предварительной настройкой и привычным инсталлятором (<a href="http://forum.openstreetmap.org/viewtopic.php?id=4676" target="_blank" class="external">скачать</a>).</p>
            <h2><a name="sync"></a>5. Синхронизация  треков и фотографий </h2>
            <p>Рекомендуется перед началом картирования сфотографировать экран GPS с текущим временем и датой, это очень сильно облегчает синхронизацию. </p>
            <p>Для синхронизации: </p>
            <ol start="1" type="1">
              <li>Запустите       JOSM</li>
              <li><em>Файл/Открыть</em> – выберите сохраненный трек GPX</li>
              <li>Настройте отображение треков -<em> Правка/Настройки</em>, <em>Точки GPS,       Рисовать линии между точками GPS – Все, Отображать крупные точки GPS.</em></li>
              <li>Если       слой точек не виден, выделите его и нажмите 2</li>
              <li>Добавьте фотографии - <em>Файл</em>/<em>Открыть изображения через AgPifoJ...</em></li>
              <li>Выбираем все изображения</li>
              <li>В появившемся меню выберите <em>Я могу сфотографировать экран GPS приёмника</em> <br>
                <br>
                <img src="/images/osm-prepare-01.gif" alt="osm" width="472" height="236"></li>
              <li>Выбираем изображение снимка экрана GPS со временем и вводим в поле <em>Время GPS</em> время с фотографии, часовой пояс при это должен быть нулевым. <br>
                <br>
                <img src="/images/osm-prepare-02.gif" alt="osm" width="528" height="434"></li>
              <li>Нажимаем <em>OK</em> и <em>Совпадения</em>.</li>
            </ol>
            <h2><a name="loadosm"></a>6. Найти и загрузить данные OSM</h2>
            <ol start="1" type="1">
              <li>Запустите       JOSM</li>
              <li>Выберите <em>Файл/Скачать с OSM</em></li>
              <li>Найдите на интерактивной карте ваш район работ и выделите его.<br>
                <br>
                Альтернативный способ, если карта уже открыта в браузере, скопировать       ссылку на этот фрагмент - Permalink, в буфер обмена (Ctrl+C) и вставить в JOSM (<em>Файл/Скачать с OSM/Рамка</em>) </li>
              <li>Нажмите       ОК и дождитесь загрузки данных. </li>
            </ol>
            <p>&nbsp;</p>
            <p>Данные собраны, программное обеспечение настроено и работает, можно переходить с созданию и редактированию  свободных геоданных. Об этом в новых статьях и в <a href="http://wiki.openstreetmap.org/wiki/Main_Page" target="_blank" class="external">Wiki OSM</a>. </p>
            <p class="discuss">
		   <span><!--#include virtual="/scripts/forum-comments-num.php?i=3628"--></span>
		</p>
            <div class="links">
				<h2>Ссылки по теме</h2>
					<ul>
						<li><a href="osm-begin.html">Начало работы с OpenStreetMap</a></li>
						<li><a href="http://forum.openstreetmap.org/viewforum.php?id=21" target="_blank" class="external">Русскоязычный форум OpenStreetMap</a></li>
					    <li><a href="josm-start.html">Основы редактирования данных OpenStreetMap в JOSM</a></li>
					    <li><a href="http://forum.openstreetmap.org/viewtopic.php?id=4676" target="_blank" class="external">Сборка JOSM &quot;все в одном&quot;</a> </li>
					</ul>
			</div>
<!--Contents end-->
<!--#include virtual="/scripts/date.php" -->
<p class="status"><span>Дата создания: 28.07.2009
<br>Автор(ы): <a href="/forum/memberlist.php?mode=viewprofile&u=2" target="_blank">Максим Дубинин</a></span></p>
<!--#include virtual="/inc/footer2.php" -->
