<!--#include virtual="/inc/header02.txt" -->
<title>GIS-Lab: Формат файла географической регистрации (world-файл)</title>
<!--#include virtual="/inc/header2.txt" -->
<div class="cont">
<div class="col1">

<ul class="path">
   <li class="first"><a href="/">Главная</a></li>
   <li><a href="/qa.html">Вопросы и ответы</a></li>
</ul>
<!--Contents start-->
<h1>Формат файла географической регистрации (world-файл)</h1>
<p class="ann">Описание специального файла для географической регистрации изображения </p>
<p class="discuss discuss_top"><span><!--#include virtual="/scripts/forum-comments-num.php?i=4070"--></span></p>
            <p>Для того, чтобы установить систему отношений между
              внутренними пиксельными координатами изображения и реальными географическими или прямоугольными
              координатами в ПО ГИС может использоваться специальный файл называемый
              далее файлом географической регистрации. Файл регистрации может создаваться вручную или в процессе процесса географической привязки изображения, которая часто сопровождается его трансформацией из одной системы координат в другую. </p>
            <p>Наличие подобного файла обуславливает способность
              программы совмещать растровый файл с материалами уже находящимся
              в определенной системе координат. Создание отдельного файла является
              альтернативой внедренной в растровый файл (embedded) привязки (например
              специальные тэги в формате GeoTIFF), главным отличием этих двух
              способов является выделение описания привязки в отдельный файл или
              &quot;прописывание&quot; описания в сам растр.</p>
            <p>Внешний файл привязки имеет больший приоритет, таким
              образом, если вам растр имеет и внедренную привязку и внешний файл,
              в Arcview GIS ориентироваться в географическом пространстве он будет в соответствие
              с координатами из внешнего файла, внутренняя привязка будет игнорироваться.</p>
            <h3>Содержание файла привязки</h3>
            <p>Для полного описания отношений пиксельных координат
              географическим достаточно 6 параметров:</p>
            <p>A - масштаб растра по оси X; размер пиксела по оси
              X (например в 1 единице растра - 20 метров)<br />
              B - масштаб растра по оси Y; отрицательный размер пиксела по оси
              Y<br />
              C, D - параметры поворота (обычно равны нулю)<br />
              E, F - параметры сдвига; X,Y координаты центра верхнего левого пиксела</p>
            <p>Отрицательное значение размера пиксела по оси Y объясняется
              разницей между началом координат изображения и географической системы
              координат. В изображении начало находится в левом верхнем углу,
              в географической системе координат - в левом нижнем.</p>
            <p>Пример содержания типичного файла привязки:</p>
            <table width="217" border="1" align="center" bordercolor="#999999" bgcolor="#E6E6E6" height="32">
              <tr>
                <td><p>20.0000000000000<br />
                    0.00000000000000<br />
                    0.00000000000000<br />
                    -20.000000000000<br />
                    424178.117<br />
                    4313415.907</p></td>
                <td><p><b>A</b><br />
                    <b>C</b><br />
                    <b>D</b><br />
                    <b>B</b><br />
                    <b>E</b><br />
                    <b>F </b></p></td>
              </tr>
            </table>
            <p>При отображении растрового файла в географическом
              пространстве Arcview производит 6-ти параметрическое, аффинное преобразование
              координат, при ненулевых параметрах C,D собственно пересчета значений
              растра не происходит:</p>
            <p>x1 = Ax + Сy + E<br />
              y1 = Dx + By + F</p>
            <p>x,y - исходные файловые координаты растра (x - колонка, y - ряд).</p>
            <h3>Когда создавать файл привязки вручную</h3>
            <p>Если вы уверены, что отсканированный материал не имеет искажений и точно знаете в какой системе координат он находится, точно знаете координаты левого верхнего угла изображения, масштаб и разрешение с которым было отсканировано изображение, то достаточно быстро можно вычислить чему соответствует один пиксел на местности (пространственное разрешение) и создать необходимый файл привязки. В этом случае можно обойтись без вычисления или подбора коэффициентов C и D. </p>
            <p>Если ваш растр в добавок ко всему вышеперечисленному - наклонен на определенный угол или имеет некоторые другие линейные искажения, то также придется вычислить или подобрать коэффициенты C и D. Следует иметь в виду, что при этом изменение самого растра не происходит, используя world-файл с параметрами поворота, растр поворачивается только визуально. </p>
            <p>Однако, как правило, процесс сканирования и хранения бумажных материалов, практически неизбежно приводит к возникновению криволинейных искажений, исправить которые  можно только более сложными <a href="/qa/polynom.html">полиномиальными преобразованиями</a>, осуществить которые с помощью правки world-файла невозможно.</p>
            <h3>Название файла привязки</h3>
            <p>Имя файла привязки должно быть равно имени растрового
              файла, для которого создается файл привязки. </p>
            <p>Существует три способа задавать расширение файла привязки. Распознавание того или иного названия расширения зависит от ПО, QGIS, например, распознает все три типа названий, а Arcview GIS не распознает wld. </p>
            <p>1. Расширение составляется
              из трех букв: первая соответствует первой букве расширения соответствующего
              растрового файла, вторая - третьей букве расширения, третья - буква
              w (world) (<a href="http://support.esri.com/en/knowledgebase/techarticles/detail/17489" target="_blank" class="external">ESRI Knowledge Base</a>). </p>
            <p>Примеры:</p>
            <p>файлу test.jpg будет соответствовать файл привязки
              test.jgw <br />
              файлу test.tif будет соответствовать файл привязки test.tfw</p>
            <p>2. Расширение = wld</p>
            <p>Примеры:</p>
            <p>файлу test.jpg будет соответствовать файл привязки
              test.wld </p>
            <p>Недостаток *.wld в том, что нельзя хранить файлы с разной привязкой и разном графическом формате, но с одним именем в одной папке, файл *.wld будет только один. </p>
            <p>3. К расширению просто прибавляется буква w.  </p>
            <p>Примеры:</p>
            <p>файлу test.jpg будет соответствовать файл привязки
              test.jpgw</p>
            <p class="discuss">
<span>
<!--#include virtual="/scripts/forum-comments-num.php?i=4070"-->
</span>
</p>
<!-- ссылки -->
<div class="links">
	<h2>Ссылки по теме</h2>
		<ul>
			<li><a href="tfw.html">Формат файла привязки Arcview (world-файл)</a></li>
			<li><a href="tfw-example.html">Пример  географической регистрации изображения с помощью world-файла </a></li>
			<li><a href="http://en.wikipedia.org/wiki/World_file" target="_blank" class="external">World file (Wikipedia)</a> </li>
			<li><a href="georef-gdal.html">Использование GDAL для привязки растровых материалов</a></li>
			</ul>
</div>
<!--Contents end-->
<!--#include virtual="/scripts/date.php" -->
<p class="status"><span>Дата создания: 05.03.2004
<br>Автор(ы): <a href="/forum/memberlist.php?mode=viewprofile&u=2" target="_blank">Максим Дубинин</a></span></p>
<!--#include virtual="/inc/footer2.php" -->