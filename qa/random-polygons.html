<!--#include virtual="/inc/header02.txt" -->
<title>GIS-Lab: Генерация случайно распределенных полигонов по полигону-образцу</title>
<!--#include virtual="/inc/header2.txt" -->
<!--Contents start-->
<div class="cont">
<div class="col1">

<ul class="path">
   <li class="first"><a href="/">Главная</a></li>
   <li><a href="/qa.html">Вопросы и ответы</a></li>
</ul>
<h1>Генерация случайно распределенных полигонов по полигону-образцу  </h1>
            <p class="ann">Описание вспомогательного алгоритма и скрипта для статистической оценки объекта</p>
<p class="discuss discuss_top"><span><!--#include virtual="/scripts/forum-comments-num.php?i=2235"--></span></p>
            <p>В задачах проверки уникальности объекта по некоторым характеристикам (например рельеф, NDVI, плотность населения, климатические факторы) часто есть необходимость сгенерировать такой же объект в других местоположениях в некотором количестве. Как правило - такие местоположения являются случайными, но лежат в некоторой определенной области.</p>
            <p>В качестве объекта может выступать точка, линия или полигон и если для случайного распределения точек существует множество готовых инструментов, то для репликации полигонов готового инструмента найдено не было. </p>
            <p>Полученные таким способом множественные репликации дальше могут быть использованы для получения зональной статистики и статистического анализа. Разумеется, тем, кто использует данный подход необходимо будет учесть автокорреляцию. </p>
            <p>Эта статья описывает инструмент для Arcview GIS 3.x</p>
            <ul>
              <li>Используется две исходные темы, первая - содержающую полигон, который надо реплицировать и вторую - представляющую собой границы в которых надо производить репликацию. Обе темы должны быть активны (выделены), должен строго соблюдаться порядок тем. </li>
              <li>Скрипт случайным образом генерирует такой же полигон в другом месте и поворачивается его на случайный угол относительно его центра.</li>
              <li>Осуществляется проверка попадания (полного) в границы, если полигон попадает, то он оставляется, если нет - отбраковывается</li>
              <li>Данная последовательность осуществляется столько раз, сколько реплик полигона нужно сгенерировать.</li>
              <li>Сгенерированные полигоны добавляются к теме содержащей исходный, реплицируемый полигон. </li>
            </ul>
            <p>Особенно внимательно необходимо отнестись к выбору объектов и тем для генерации, иначе есть риск попасть в ситуацию, когда ни один из генерируемых полигонов не попадает в ограничивающую зону, что вызовет зависание программы.</p>
            <p>На иллюстрации: слева - исходная картина, справа - 100 случайных полигонов сгенерированных по образцу. </p>
            <p align="center"><img src="/images/random-polygons-01.gif" alt="случайные полигоны" width="200" height="217" /><img src="/images/random-polygons-02.gif" alt="случайные полигоны" width="200" height="218" /></p>
            <p>Основная часть кода генерации случайных полигонов выглядит следующим образом:  </p>
              <pre>while (i &lt; numiter)
  xshift = Number.MakeRandom(-1000000000, 1000000000)/1000000000
  yshift = Number.MakeRandom(-1000000000, 1000000000)/1000000000
  newpoly = apoly.aspolygon
  newpoly = newpoly.Move(xshift, yshift)
  newpoly = newpoly.Transform(Transform2D.Make.Move(0@0 - newpoly.ReturnCenter).Rotate(Number.MakeRandom(0, 360000)/1000).Move(newpoly.ReturnCenter))
  if (newpoly.IsContainedIn(abound)) then
    rec = aftab.addrecord
    aftab.setvalue(f_shape,rec,newpoly)
    i = i + 1
  end
end</pre>
              <h2 align="center"><a href="/programs/avenue/random-polygons.zip">Скачать расширение</a></h2>
<p class="discuss"><span><!--#include virtual="/scripts/forum-comments-num.php?i=2235"--></span></p>
		<div class="links">
		<h2>Ссылки по теме</h2>
		<ul>
               <li><a href="/qa/zonalstats.html">Расчет зональной статистики в Arcview GIS</a></li>
		</ul>
		</div>
<!--Contents end-->
<!--#include virtual="/scripts/date.php" -->
<p class="status"><span>Дата создания: 12.05.2008
<br>Автор(ы): <a href="/forum/memberlist.php?mode=viewprofile&u=2" target="_blank">Максим Дубинин</a></span></p>
<!--#include virtual="/inc/footer2.php" -->
