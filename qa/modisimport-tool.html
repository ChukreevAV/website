<!--#include virtual="/inc/header02.txt" -->
<title>GIS-Lab: Импорт продуктов MODIS с помощью MODIS-Import-tool</title>
<!--#include virtual="/inc/header2.txt" -->
<div class="cont">
<div class="col1">

<ul class="path">
   <li class="first"><a href="/">Главная</a></li>
   <li><a href="/qa.html">Вопросы и ответы</a></li>
</ul>
<!--Contents start-->
<h1>Импорт продуктов MODIS с помощью MODIS-Import-tool</h1>
<p class="ann"> Описание процесса импорта данных MODIS и  вспомогательной программы облегчающей этот процесс </p>
<p class="discuss discuss_top"><span><!--#include virtual="/scripts/forum-comments-num.php?i=1168"--></span></p>
<p><strong>Задача:</strong> Пакетно перевести имеющиеся продукты MODIS  уровней обработки 2G, 3, 4 в нужную проекцию и формат TIF  с одновременным созданием мозаик из граничащих фрагментов.</p>
<p>Когда количество импортируемых данных MODIS велико, становится сложно <a href="/qa/modisimport.html">использовать MRT</a> для их обработки поштучно. Небольшая программа MODIS-Import-tool может сильно сэкономить время и силы. Для работы с ней нужно внимательно изучить данное описание. Если необходимо импортировать данные MODIS первого уровня обработки, необходимо использовать другую вспомогательную программу <a href="modis-l1-import-tool.html">MODIS-Swath-Import-tool</a>. </p>
            <p>MODIS-Import-tool - генератор пакетных файлов для MRT. Сценарий использования MODIS-Import-tool очень прост, у Вас имеются сотни исходных фрагментов данных MODIS в формате HDF и программное обеспечение MRT, используя MODIS-Import-tool генерируется пакетный файл включающий все необходимые операции по мозаицированию, перепроектированию данных в формате HDF в формат TIF. Далее, после запуска этого пакетного файла, MRT производит необходимые операции без участия оператора.</p>
            <p>Результатом работы программы является файл <strong>!process-modis.bat</strong> или <strong>!process-modis-mosaics.bat</strong> создаваемый в рабочей директории. </p>
            <p>Особое внимание при работе нужно уделить размещению исходных данных. В зависимости от того, нужно ли проводить их склейку или нет, есть два варианта размещения:</p>
            <ol>
              <li>Нужно и склеить и перепроектировать/импортировать данные. Все данные должны быть разложены по папкам, так, чтобы набор, соответствующий одной дате лежал каждый в своей папке. Например, данные можно разложить так:<br />
					<pre>c:\work
	\A2000057
	\A2000089
	\A2000105 и т.д.</pre>
                Кроме папок с данными MODIS в рабочей директории НЕ должно находиться других данных. <br />
                <br />
              В каждой из папок при этом может находиться некоторое количество фрагментов данных <strong>за один промежуток времени</strong>. В качестве рабочей директории в данном случае должна указываться директория общая для всех этих папок (для примера - c:\work\). Утилита пройдет все папки содержащиеся в рабочей, склеит в единый фрагмент и обработает все данные в каждой папке. <br />
              <br />
              Для автоматической сортировки данных можно воспользоваться <a href="/programs/scripts/sortmodis.zip">утилитой сортировки Sort-MODIS</a>. Для ее запуска понадобится <a href="http://www.activestate.com/activeperl/" target="_blank" class="external">интерпретатор языка Perl</a>. Аргументами утилиты являются исходная папка с HDF и выходная папка, для папок групп, куда будут разложены исходные. <br>
              <br>
              <pre>sortmodis.pl inputdir outputdir</pre>
              <br>
              Разложить данные по папкам можно и вручную.</li>
              <li>Нужно только перепроектировать и импортировать данные (т.е. количество фрагментов на один момент времени = 1). Все данные могут лежать в одной папке.</li>
            </ol>
            <p align="center"><img src="/images/modisimport-tool-01.gif" />            </p>
            <p><strong>Настройки программы: </strong></p>
            <p><strong>Path to MRT</strong> - Путь к директории в которую установлен пакет MODIS Reprojection Tool (MRT) и лежат файлы resample.exe и mosaic.exe. Пример: C:\Gis\MRT\bin\</p>
            <p><strong>HDF files folder</strong> - Папка в которой расположены папки с данными MODIS.</p>
            <p><strong>Geographic/Albers/SIN</strong> - поддерживаемые проекции, проекция Альберса пока поддерживается только с параметрами центральный меридиан 45, первая стандартная параллель 52, вторая 64. SIN - синусоидальная проекция на сфере, система координат используемая продуктами MODIS по-умолчанию. Если выбирается эта проекция, то данные импортируются без перепроектирования, как есть. </p>
            <p><strong>Set AOI </strong>- установка участок интереса (area of interest), если значения установлены, выходные данные будут обрезаться по этому участку. Рекомендуем использовать версия MRT 4.0 для правильной интепретации этого параметра. </p>
            <p><strong>Import/no import bands</strong> - все продукты MODIS имеют несколько слоев-каналов, для разных наборов данных каждый канал представляет разные темы. Предполагается, что вам известно какие из каналов нужно импортировать, а какие нет. Для того, чтобы отключить импорт определенного канала, нужно заменить единицу соответствующую его номеру на ноль. Общее количество каналов (количество нулей и единиц) должно оставаться неизменным и определяется после выбора соответствующего продукта (то есть стирать значения нельзя, только менять 0 на 1 и обратно). Пример: 1 1 0 0 0 0 0 0 - импортировать 1 и 2 каналы данных MODIS у которых всего 8 каналов (количество нулей и единиц).</p>
            <p><strong>Overwrite existing files</strong> - перезаписывать существующие файлы. Позволяет не переделывать заново работу по конвертации уже конвертированных файлов. Однако, следует иметь в виду, что MRT остановленный посередине обработки файла оставляет недоделанный результат на диске, что программа сочтет &quot;существующим&quot; файлом и не перезапишет при новой обработке.</p>
            <p><strong>Mosaic then Reproject </strong>- сначала склеить, затем перепроектировать\сконвертировать в TIF. Все файлы находящиеся в каждой папке сначала будут склеены в единое поле, а потом сконвертированы и перепроектированы. Опцию следует использовать, если задача - сгенерировать файл для обработки нескольких фрагментов данных MODIS, которые надо перед этим склеить в единую мозаику. </p>
            <p><strong>MOD Type</strong> - тип данных MODIS, если вашего типа данных в списке нет, выберите один из похожих и внимательно введите соответствующее количество импортируемых и не импортируемых каналов.</p>
            <p>Особенности процесса импорта:</p>
            <ol><li>Если количество каналов в исходных данных переменно, то выбранные каналы будут сдвигаться, пока не импортируется нужное количество. Если оно не достижимо, т.е. в исходном файле меньше каналов, чем задано MODIS-Import-tool, то будут импортированы они все после чего процесс продолжится на следующий файл.<br />
                Пример: данные MOD14A1 (температурные аномалии - пожары) обычно имеют 16 каналов, 8 из которых - ежедневные маски температурных аномалий и 8 - маски качества для этих каналов (QA). Однако, часто некоторые бывают пропущены и количество каналов меньше 16. В случае импорта такого файла, при наборе импортируемых каналов 1 1 1 1 1 1 1 1 0 0 0 0 0 0 0 0 0, то есть импортировать 8 первых каналов, и отсутствия например дней 7 и 8, набор будет сдвинут на QA и вместо 7 и 8 дня будут импортированы 1 и 2 день QA.</li>
              <li>Смешивать разные типы данных MODIS (например MOD14A1 и MOD13Q1) в одних и тех же папках - не рекомендуется. </li>
            </ol>
            <p align="center">Программа находится в стадии разработки, комментарии приветствуются, ошибки исправляются.</p>
            <p>Перед началом работы необходимо установить <a href="/other/libraries.zip">набор библиотек</a>.</p>
            <h2 align="center"><a href="/programs/vb/modis-import-tool.zip">Скачать MODIS-Import-tool</a></h2>
            <p><strong>UPD1:</strong> Спустя несколько лет на официальной странице загрузки MODIS Reprojection Tool появился инструмент <a href="https://lpdaac.usgs.gov/lpdaac/tools/modis_reprojection_tool" target=_blank class=external>MRTBatch</a>, позволяющий аналогично MODIS-Import-tool генерировать пакетный файл для импорта и перепроецирования продуктов MODIS уровней обработки 2G, 3, 4. Указанный инструмент является кроссплатформенным, в отличие от MODIS-Import-tool, который работает только в системах семейства Windows.
            <p><strong>UPD2:</strong> Весной 2011 вышла новая версия MRT 4.1, при установки которой инструмент MRTBatch ставится автоматически.</p>
            <p class="discuss">
				<span><!--#include virtual="/scripts/forum-comments-num.php?i=1168"--></span>
			</p>
			<div class="links">
			<h2>Ссылки по теме</h2>
			<ul>
               <li><a href="modislandprod.html">Продукты MODIS - Land</a></li>
			   <li><a href="/qa/modisimport.html">Импорт продуктов MODIS уровней 2G, 3, 4 с помощью MRT</a></li>
			</ul>
			</div>
<!--Contents end-->
<!--#include virtual="/scripts/date.php" -->
<p class="status"><span>Дата создания: 06.09.2006
<br>Автор(ы): <a href="/forum/memberlist.php?mode=viewprofile&u=2" target="_blank">Максим Дубинин</a></span></p>
<!--#include virtual="/inc/footer2.php" -->
