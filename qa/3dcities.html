<!--#include virtual="/inc/header02.txt" -->
<title>GIS-Lab: Основные стратегии создания 3D моделей городов</title>
<!--#include virtual="/inc/header2.txt" -->
<div class="cont">
<div class="col1">

<ul class="path">
	<li class="first"><a href="/">Главная</a></li>
	<li><a href="/qa.html">Статьи</a></li>
</ul>
<!--Contents start-->
<h1>Основные стратегии создания 3D моделей городов</h1>
<p class="ann">Приведены описания, плюсы и минусы основных стратегий содания трехмерных моделей городов.</p>
<p class="discuss discuss_top"><span><!--#include virtual="/scripts/forum-comments-num.php?i=5799"--></span></p>
<p>Создание трехмерных моделей городов в последнее время становится все более популярным занятием многих ГИС-специалистов. Все больше разговоров ведется о трехмерных геоинформационных системах. Задачи, которые будут  решать такие системы, все еще до конца непонятны, однако трехмерные модели городов создаются уже на протяжении более десятка лет.   </p>
<p>Предлагаемая  классификация стратегий трехмерного моделирования городов по степени автоматизации не претендует на полноту. Технологии трехмерного моделирования за свою относительно короткую историю пережили бурное развитие. Стремительное развитие этого направления связано, в первую очередь, с появлением и началом широкого использования цифровых аэрофотокамер и воздушных лазерных сканеров. Охватить все предлагаемые методики не представляется возможным, однако их можно попробовать сгруппировать по степени автоматизации основных процессов.</p>
<p>В этой статье мы рассмотрим 3 стратегии </p>
<ul>
  <li><a href="#manual">Ручное создание моделей в программах трехмерного моделирования</a></li>
  <li><a href="#full">Полностью  автоматическая генерация 3D моделей</a></li>
  <li><a href="#semi">Полуавтоматическое создание 3D моделей</a></li>
</ul>
<h2><a name="manual"></a>Ручное создание  моделей в программах трехмерного моделирования</h2>
<p class="ill">
    <img src="/images/3dcities-01.gif" width="750" height="510" alt="Рис. 1. Фрагмент 3D модели Санкт-Петербурга">
    <span>Фрагмент 3D <a href="http://www.epochtimes.ru/content/view/36221/11" target="_blank" class="external">модели Санкт-Петербурга</a> (<a href="http://www.youtube.com/watch?v=XFr08ukWH3Q" target="_blank" class="external">видео в движении</a>)</span></p
>
<p>Самый трудоемкий способ. Модели зданий создаются  в таких программах как AutoCAD, ArchiCAD, ArcGIS+3DAnalyst, 3ds Max или Google SketchUp. Моделирование геометрии и текстурирование моделей  проводятся вручную. Для упрощения процесса в городской застройке выделяются  наборы типовых строений. Модели создаются для каждого типа строений и затем  множатся нужное количество раз при размещении на карте. Для ускорения процесса  трехмерные объекты часто получают методом выдавливания зданий по их отпечаткам  на плане города. Высоту, на которую выдавливается каждое здание, получают из  атрибута, содержащего число этажей. Текстурирование  обычно выполняется наземными фотоснимками и  изображениями из библиотек текстур. Данный метод создания 3D моделей городов является  самым старым и хорошо изученным.</p>
<h3>Преимущества</h3>
<p> а) Возможность создания моделей с очень высокой  геометрической детализацией.</p>
<p> б) Для каждого типа строений создается только одна модель. Данная  модель единожды загружается при визуализации, и используется для всех зданий  заданного типа. Это позволяет значительно экономить память и уменьшает размер трехмерной  модели города на диске.</p>
<p> в) Текстуры не содержат изображений посторонних объектов, спроецированных  на стены зданий. Так как текстурирование производится вручную, все изображения перед  текстурирванием обрабатываются оператором. Обработка включает устранение лишних  объектов на фотографиях, таких как деревья или автомобили, выравнивание изображений  по яркости и тону и, часто, удаление теней.</p>
<p> г) Трехмерные здания являются отдельными объектами, с  которыми может быть ассоциирована любая атрибутивная информация.</p>
<h3>Недостатки</h3>
<p> а) Очень высокая трудоемкость. Несмотря на то, что  современные 3D редакторы позволяют ускорить некоторые этапы моделирования, все  равно все они выполняются вручную. </p>
<p> б) Потенциально низкая метрическая точность. Источником  размеров для модели здания обычно служат фотографии фасадов, поэтажный план или  отпечаток здания на плане города. Фотограмметрические измерения по наземным  фотографиям не производятся, так как это слишком затратно и не предусмотрено в 3D редакторах. Плоский план не  несет всей необходимой информации о форме здания. Недостающие размеры  рассчитываются приближенно, часто на глаз. Это конечно не относится к случаю,  когда исходными данными для проектирования является архитектурная модель  здания, использованная при его постройке, либо данные наземного лазерного  сканирования. Однако такой случай – большая редкость.</p>
<p> в) Типизация строений кроме плюсов имеет и недостатки.  Невозможность создать набор типов, описывающий все варианты зданий города,  приводит к обобщению и упрощению модели города. Уникальные здания заменяются  типовой моделью. Особенно это относится к частной застройке, где все  многообразие архитектурных форм часто заменяется одним простым прототипом,  например, серой коробкой с двускатной крышей. </p>
<p> г) Недостаточная фотореалистичность. В качестве  текстур в данном методе обычно используются наземные фотографии. Это  качественные фотографии высокого разрешения. Однако сфотографировать каждое  здание города, да еще со всех сторон не представляется возможным. Недостающие  фотографии заменяются типовыми текстурами из библиотек. Синтезированные таким  образом текстуры выглядят искусственно из-за совмещения фотографии и  библиотечной рисованной текстуры. Кроме того все текстуры выравниваются по  яркости и тону, с фотографий стараются убрать тени. Отсутствие теней на стенах  зданий и поверхности земли также вносит ощущение искусственности. Сложность  процесса получения фотографий и текстурирования приводят к отказу от  фотореалистичных текстур для многих типов зданий. Такие здания раскрашиваются  одним или несколькими цветами, либо полностью покрываются изображениями из  библиотек текстур.</p>
<p class="ill"> <img src="/images/3dcities-02.gif" width="750" height="510" alt="Рис. 2. Пример здания с библиотечными текстурами"> <span>Пример здания с библиотечными текстурами</span></p
>
<p>Описанный метод применяется для наполнения слоя 3D зданий в  Google Earth. Трехмерные модели зданий здесь создаются преимущественно силами  пользователей в разработанной для этой цели программе – Google SketchUp. Опубликованные на  специальном сайте 3D Warehouse  модели проходят модерацию и потом появляются в Google Earth.</p>
<p> Описанный метод применяется и при создании моделей городов с  применением ArcGIS и модуля 3D  Analyst. В основном эти модели включают лишь несколько кварталов города, из-за  огромной трудоемкости процесса. На настоящий момент, автору известна единственная на территории СНГ модель,  покрывающая значительную часть города – это недавно созданная <a href="http://www.epochtimes.ru/content/view/36221/11/" target="_blank" class="external">3D модель Санкт-Петербурга</a>. Но даже эта дорогостоящая модель (по официальным данным   на ее создание было потрачено 26 млн. рублей и несколько лет работы)  детально описывает лишь центральную часть города. Остальные здания представлены  серыми коробками без текстур и точного воспроизведения формы.</p>
<h2><a name="full"></a>Полностью  автоматическая генерация 3D моделей</h2>
<p class="ill"> <img src="/images/3dcities-03.gif" width="750" height="510" alt="Рис. 3. Пример модели C3 Technologies"> <span>Пример модели C3 Technologies</span></p
>
<p>Самая молодая и перспективная технология. Использует алгоритмы  восстановления геометрической формы объектов по их стереоизображениям. Стереоизображения  получают с самолета, для этого используют наклонные цифровые камеры, типа  <a href="http://www.pictometry.com" target="_blank" class="external">Pictometry</a>   или  <a href="http://www.wehrliassoc.com/Professional_Surveyor_October_2008.pdf" target="_blank" class="external">Geosystem 3-OC-1</a>  . Эти же изображения используются как источник текстур фасадов зданий. Для  уточнения геометрии зданий и получения модели рельефа может использоваться  воздушный лазерный сканер.</p>
<p> Ярким примером данной технологии являются модели,  создаваемые шведской компанией <a href="http://www.c3technologies.com" target="_blank" class="external">C3  Technologies</a>  . По утверждению представителей компании, трехмерные модели городов создаются  только по наклонным и вертикальным снимкам без использования данных лазерного  сканирования. Весь процесс полностью автоматизирован. Поиск одних и тех же  точек на перекрывающихся снимках формирует облако точек, описывающее земную  поверхность и возвышающиеся над ней объекты. Затем облако точек триангулируется  с целью получения поверхности. В полученной поверхности выполняется поиск плоскостей  для лучшей передачи стен и крыш зданий. Конечным продуктом является трехмерная  модель местности, представленная с различной степенью детализации и доступная  для <a href="http://www.c3technologies.com/en_demo.php" target="_blank" class="external">просмотра онлайн</a>.</p>
<p> Также существует <a href="http://www-video.eecs.berkeley.edu/~frueh/3d" target="_blank" class="external">технология автоматического построения  трехмерных моделей</a> фасадов зданий, разработанная в университете Беркли, США   . Здесь аэросъемка и данные воздушного лазерного сканирования дополняются  фотоснимками и облаком точек с наземного лазерного сканера. Лазерный сканер и  фотокамера устанавливаются на автомобиль, перемещающийся по улицам и  выполняющий съемку зданий. Лазерный сканер помогает восстановить форму фасадов  зданий и отсечь препятствия, находящиеся перед зданиями: деревья, автомобили,  пешеходы. Также облако точек лазерного сканера помогает восстановить траекторию  движения автомобиля, что необходимо для точного определения положения зданий и  геопривязки фотографий для последующего автоматического текстурирования.</p>
<h3>Преимущества</h3>
<p> а) Высокая скорость создания моделей городов. Благодаря полностью  автоматическому процессу трехмерные модели даже больших городов создаются за дни,  а не за годы, как при использовании полностью ручного моделирования.</p>
<p> б) Высокая фотореалистичность. Текстурирование выполняется  автоматически по аэроснимкам или геопривязанным снимкам наземной камеры. Полное  отсутствие типовых текстур из библиотек. Все фасады зданий выглядят так, как  это было на момент съемки.</p>
<p> г) Низкая стоимость создания модели за счет исключения  ручного труда операторов.</p>
<h3>Недостатки</h3>
<p> а) Недостаточная геометрическая точность модели. Алгоритмы  автоматического восстановления формы объектов по их фотоснимкам или данным  лазерного сканирования, несмотря на значительные успехи в этой области, все еще  несовершенны. Как следствие этого фигуры зданий восстанавливаются с ошибками,  порой довольно грубыми. Вертикальные стены могут оказаться сильно наклоненными,  размеры зданий значительно искажаются. Данный факт исключает возможность  проведения точных измерений (точность которых   соизмерима с точностью исходных данных), по автоматически  сгенерированным моделям.</p>
<p> б) Невозможность отделить объекты строений от поверхности  рельефа или друг от друга. Автоматическое распознавание в настоящее время  неспособно надежно проводить   классификацию объектов и надежно определять их границы. Как следствие  этого автоматически сгенерированные модели городов состоят из одной сплошной  поверхности, включающей в себя здания, деревья и рельеф (технология   C3 Technologies) либо из поверхности рельефа и городских  кварталов (технология университета Беркли).  Так как здания в таких моделях не представлены отдельными объектами, им нельзя  назначить атрибуты. Это усложняет создание адресной базы данных и ограничивает  применение модели. Например, для расчета зашумленности требуется классификация  объектов по типу материала, из которого они состоят, что невозможно сделать, при  отсутствии отдельных объектов. Простой подсчет числа зданий в городе тоже  невозможен.</p>
<p>в) Низкое качество текстур. При автоматическом  текстурировании посторонние объекты, спроецированные на фасады зданий, остаются  на текстурах. На стены попадают деревья и автомобили. Если съемка проводилась в  летний период, густые кроны деревьев могут закрывать большую часть здания. Кроме  того точность положения текстур оказывается низкой. На сторонах здания, снятых  под острым углом, текстуры оказываются смазанными.</p>
<h2><a name="semi"></a>Полуавтоматическое создание 3D моделей</h2>
<p class="ill"><img src="/images/3dcities-04.gif" width="750" height="510" alt="Рис. 4. Пример 3D модели Винницы"><span>Пример 3D <a href="http://www.vin3d.net" target="_blank" class="external">модели Винницы</a> (<a href="http://www.youtube.com/watch?v=-H3ilBTPKkM" target="_blank" class="external">видео в движении</a>)</span></p
>
<p>Данная методика исключает слабые стороны полностью  автоматического процесса генерации моделей городов. Геометрические модели  зданий здесь создаются операторами по аэроснимкам. Этот подход применяется в  <a href="http://www.vingeo.com" target="_blank" class="external">Delta/Digitals</a> и <a href="http://www.cybercity3d.com" target="_blank" class="external">CyberCity-Modeler</a>. Для построения  моделей зданий CyberCity-Modeler позволяет  также использовать данные лазерного сканирования.</p>
<p> Создание  трехмерной  модели здания состоит из измерения оператором характерных точек контура крыши. Измерения  проводятся стереоскопическим методом. Для ускорения процесса применяются  шаблоны, разработанные для основных типов крыш. Сложные формы образуются путем  комбинации простых геометрических фигур. Высота стен зданий не измеряется.  Стены образуются проецированием точек основания крыши на поверхность рельефа.</p>
<p> Описанная методика позволяет создавать модели зданий быстро  и качественно. На одно здание  опытный  оператор (например в Delta/Digitals) тратит от 10 секунд до одной минуты, в зависимости от  его сложности. Точность измерений сопоставима с геометрической точностью исходных  аэроснимков.<br>
  Создание моделей зданий – единственный ручной процесс при генерации  трехмерной модели города. Дальнейшая обработка созданных  моделей производится полностью автоматически.  Текстуры фасадов и крыш извлекаются из тех же снимков, что использовались для  создания геометрии. На этом этапе очень важно, чтобы все стороны здания были  видны на снимках.  Чтобы достичь этого,  используются боковые наклонные камеры либо, специально спроектированные залеты.  При отсутствии боковых наклонных камер залет должен быть запланирован с  более чем 50% межмаршрутным перекрытием либо  с дополнительными маршрутами, направленными перпендикулярно основным.</p>
<h3>Преимущества</h3>
<p> а) Высокая производительность. При создании зданий  используются типовые шаблоны. Благодаря этому на одно здание оператор тратит в  среднем несколько десятков секунд. Что значительно меньше, времени  моделирования здания в 3D редакторе.</p>
<p> б) Высокая геометрическая точность. Положение точек контура  здания измеряется по стереоснимкам. Ошибка определения координат точек в  соизмерима с геометрической точностью снимков. Степень детализации моделей  зданий задается техническим заданием, которое регламентирует, насколько мелкие архитектурные  элементы должны быть воспроизведены.</p>
<p> в) Здания являются отдельными объектами, которым могут быть  назначены любые атрибуты: адрес, год постройки, тип здания, материал стен. Модель  города со зданиями в виде отдельных объектов имеет более широкое применение. Ее  можно использовать для городского планирования, расчета зашумленности,  построения карты распространения радиоволн, прогнозирования затопления.</p>
<p> г) Высокая фотореалистичность. Текстурирование как и в  технологии полностью автоматического моделирования производится автоматически.  Текстуры извлекаются из аэроснимков и выглядят очень естественно. Тени с  текстур не убираются, что создает иллюзию качественного освещения трехмерной  сцены.</p>
<h3>Недостатки</h3>
<p> а) По сравнению с полностью автоматической генерацией  моделей в данном методе присутствует ручной труд операторов. Это повышает  стоимость всей модели и увеличивает время работы над ней.</p>
<p> б) Низкое качество текстур. Текстуры извлекаются из  аэроснимков и имеют низкое разрешение, в сравнении с наземной фотосъемкой. При  недостаточном числе избыточных изображений, может оказаться, что некоторые  стороны зданий вовсе без текстур.</p>
<h3>Использованный пример</h3>
<p> Трехмерная модель Винницы (Украина),  доступная по адресу <a href="http://www.vin3d.net/">http://www.vin3d.net</a>  создана с использованием полуавтоматических  технологий в программном обеспечении НПП «Геосистема». В качестве  исходных данных модели использовались аэроснимки с камеры <a href="http://vingeo.com/Rus/das.html" target="_blank" class="external">3-DAS-1</a>. Время, затраченное на  создание – 1 месяц. Одна из немногих трехмерных моделей, полностью  покрывающая все районы города. Несмотря на ручное создание моделей зданий и  короткие сроки выполнения работ, было смоделировано каждое строение с площадью  более 3 кв. м. </p>
<h2>Заключение</h2>
<p> В течении последних 5 лет мы стали свидетелями появления  коммерческих реализаций и укрепления позиций полностью автоматизированных  методов генерации трехмерных моделей. Очевидно, что за этими методами большое будущее.  Технологию, разработанную в университете Беркли, выкупила компания Google. Microsoft также обладает  подобной технологией. Сервисы  этих  двух  крупнейших провайдеров  географической информации постепенно наполняются трехмерными моделями городов. <br>
  Однако разработка подобных технологий и моделей на их основе не обязательно принадлежит большим корпорациям, что подверждает последний приведенный пример.</p>
<p class="discuss"><span><!--#include virtual="/scripts/forum-comments-num.php?i=5799"--></span></p>
<div class="links">
  <h2>Ссылки по теме</h2>
  <ul>
    <li><a href="http://www-video.eecs.berkeley.edu/~frueh/3d" target="_blank" class="external">Технология автоматической генерации моделей городов, университет Беркли, США</a></li>
    <li><a href="http://www.earsel.org/workshops/SIG-URS-2006/PDF/Poster2_Ulm.pdf" target="_blank" class="external">Программное обеспечение трехмерного моделирования городов  компании CyberCity AG</a></li>
  </ul>
</div>
<!--Contents end-->
<!--#include virtual="/scripts/date.php" -->
<p class="status"><span>Дата создания: 24.07.2010<br>
Автор(ы): <a href="/forum/memberlist.php?mode=viewprofile&u=7327" target="_blank">Александр Бондарец</a></span></p>
<!--#include virtual="/inc/footer2.php" -->
