<!--#include virtual="/inc/header02.txt" -->
<title>GIS-Lab: Среднеквадратичная ошибка (RMSE)</title>
<!--#include virtual="/inc/header2.txt" -->
<!--Contents start-->
<div class="cont">
<div class="col1">

<ul class="path">
   <li class="first"><a href="/">Главная</a></li>
   <li><a href="/qa.html">Вопросы и ответы</a></li>
</ul>
<h1>Среднеквадратичная ошибка (RMSE)</h1>
<p class="ann">Краткая  объяснение что такое RMSE применительно к данным ДЗЗ</p>
<p class="discuss discuss_top"><span><!--#include virtual="/scripts/forum-comments-num.php?i=1639"--></span></p>
<p>Среднеквадратичная ошибка (Root Mean Square Error, RMS Error, RMSE) - расстояние между двумя точками.</p>
            <p>В случае если речь идет о привязке данных, в качестве точек между которыми измеряется расстояние могут выступать:</p>
            <ol>
              <li>Исходная точка и конечная точки (например результат трансформации), в этом случае RMSE будет показателем насколько исходная точка близка к конечной - <strong>текущая ошибка</strong>.</li>
              <li>Желаемое положение выходной точки (точка поставленная пользователем) и результатом ее трансформации (точка поставленная моделью). Трансформация - то или иное математическое преобразование исходных координат в конечные, примером такого преобразования может быть аффинная или полиномиальная трансформация. В данном случае RMSE показывает насколько используемая трансформация позволяет точно приблизить исходную точку к конечной, т.е. RMSE в этом случае - <strong>ошибка трансформации</strong>.</li>
            </ol>
            <p>Как видно на иллюстрации ниже,  выходные точки 1, 2, 3 поставленные оператором (синие) совпадают с трансформированными (расчетными) значениями (зеленые) и не видны из-за точного совпадения, а вот точка 4 поставлена не там, куда бы она попала используя ту же трансформацию, это дает возможность вычислить для нее RMSE, для точек 1, 2, 3 RMSE = 0. </p>
            <p align="center"><img src="/images/rmse-01.gif" alt="процесс привязки" width="586" height="331" /><br />
            Привязываемое изображение слева, изображение используемое в качестве источника координат (привязанное) справа. </p>
            <p>Примечание: здесь и далее в статье, как и в ERDAS IMAGINE Field Guide, RMS определяется как расстояние (длина гипотенузы), что не совсем соответствует определению Root Mean Squared, так как отсутствует компонент усреднения, классический RMS должен вычисляться делением выражения под корнем на N измерений, в этом случае на 2. В данном случае удобнее называть RMS - расстоянием. </p>
            <p>Ошибка RMS рассчитывается по следующей формуле, представляющей из себя формулу вычисления расстояния:  </p>
            <p align="center"><img src="/images/rmse-02.gif" alt="формула вычисления RMSE" width="296" height="58" /></p>
            <p>где x<sub>i</sub>, y<sub>i</sub> - исходные координаты, x<sub>r</sub>, y<sub>r</sub> - конечные координаты </p>
            <p>RMSE выражается как расстояние в единицах исходной системы координат, то есть, если вы привязываете только что отсканированную карту, то RMSE будет выражаться в пикселях (или долях пикселя), если вы производите дополнительную привязку снимка, то RMSE будет показывать значения в метрах. Значение RMSE равное 2 для определенной точки будет означать, что ее исходная координата удалена на 2 пикселя или метра от конечной (расчетной) точки.</p>
            <p>Чтобы лучше понять когда и как можно получить RMSE при привязке можно использовать следующий алгоритм, иллюстрирующую процесс привязки с помощью аффинного преобразования:</p>
            <ol>
              <li>Получение изображения, например сканированием, изображение получает пиксельную систему координат X,Y (колонка, ряд). </li>
              <li>Расстановка трех точек с начальными и конечными координатами. Эти координаты указывают:
                <ul>
                  <li>Начальные координаты - положение точки на непривязанном материале (координаты конкретного пиксела по системе ряд/колонка);</li>
                  <li>Конечные координаты - положение точки на привязанном материале, любом источнике координат, географических или спроектированных.</li>
                </ul>
              </li>
              <li>Три точки - минимальное количество, необходимое для того, чтобы решить систему уравнений аффинного преобразования: <br />
                <p align="center">x<sub>0</sub> = a+ b*<sub></sub>x + c*y<br />
                y<sub>0</sub> = d <sub></sub> + e*x + f*y</p>
                Решение уравнения заключается в нахождении всех шести коэффициентов, например решением системы уравнений:<br />
              <p align="center">x1' = a + b*x1 + c*y1<br />
                y1' = d + e*x1 + f*y1<br />
                x2' = a + b*x2 + c*y2<br />
y2' = d + e*x2 + f*y2<br />
x3' = a + b*x3 + c*y3<br />
y3' = d + e*x3 + f*y3</p>
              Если точек меньше чем минимально необходимо - решить систему невозможно, нельзя найти коэффициенты трансформации и соответственно невозможно произвести пересчет координат. RMSE для точек также вычислить невозможно.</li>
              <li>Расстановка минимально необходимого количества точек для данного преобразования (трех) приводит к тому, что RMSE для каждой точки становится равна 0. Можно производить трансформацию. Однако в таком случае мы не можем сделать выводов о качестве точек, ведь для этого надо рассчитать RMSE, а значит.... </li>
              <li>Ставим дополнительные точки. Появление новых данных как правило приводит к тому, что то положение, куда мы ставим конечную точку в процессе привязки и ее расчетное положение не совпадают. Это делает возможным расчет RMS ошибки. <br />
              </li>
            </ol>
            <p>С примером и математикой расчета полиномиального преобразования 2-ой степени можно прочитать в статье &quot;<a href="polynom-calc.html">Полиномиальные преобразования - вычисления и практика</a>&quot;.</p>
            <p>Помимо RMSE часто также можно увидеть также значения ошибки по одной из осей X или Y. Эти значения являются остатками (residuals) и могут быть рассчитаны для каждой точки. Изучение значений этих ошибок может помочь понять, почему привязанный материал смещен по одной из осей. Это проблема часто возникает при привязке данных полученных при съемке под углом (не в надир). </p>
            <p>Уравнение вычисления RMS для каждой точки можно переписать как:</p>
            <p align="center"><img src="/images/rmse-03.gif" alt="формула вычисления RMSE" width="189" height="38" /></p>
            <p>где XR и YR - остаточные ошибки по X и Y соответственно. </p>
            <p>Графически ошибки по X и Y, а также RMSE соотносятся следующим образом:</p>
            <p align="center"><img src="/images/rmse-04.gif" alt="формула вычисления RMSE" width="471" height="213" /></p>
            <p>Вычислив RMSE для каждой точки, можно также определить общую ошибку по X (Rx), Y (Ry) и общую RMSE (T) используя следующие формулы: </p>
            <p align="center"><img src="/images/rmse-05.gif" alt="формула вычисления RMSE" width="341" height="70" /></p>
            <p>где n - число контрольных точек, i - порядковый номер контрольной точки, d - расстояние между парой точек.</p>
            <p><strong>Связь со средним расстоянием</strong></p>
            <p>Другим, достаточно объективным, способом оценить точность привязки является среднее расстояние, которое очень похоже по формуле на RMSE, но является менее консервативным показателем, так как расстояния не возводятся в квадрат как в RMSE. Выразив расстояние через <em>d</em>, приведем для сравнения формулы вычисления общей RMSE (T) и среднего расстояния (MD): </p>
            <p align="center"><img src="/images/rmse-08.gif" alt="формула вычисления RMSE" width="428" height="79" /></p>
            <p align="center"><img src="/images/rmse-07.gif" alt="формула вычисления среднего расстояния" width="426" height="66" /> </p>
            <p>RMSE является более общеупотребимым в литературе.</p>
            <p>Другим распространенным способом описания точности набора измерений являются квантили дробные стандартному отклонению (сигма).</p>
            <p><strong>Вклад точки в общую RMSE </strong></p>
            <p>Для того, чтобы вычислить вклад точки в общую ошибку (E<sub>i</sub>), необходимо разделить RMSE этой точки (R<sub>i</sub>) на общую RMSE.</p>
            <p align="center"><img src="/images/rmse-06.gif" alt="формула вычисления RMSE" width="74" height="60" /> </p>
            <p><strong>Допуск RMSE </strong></p>
            <p>В большинстве случаев, вместо того, чтобы усложнять тип трансформации (например переходить к более высоким порядкам полиномиальных преобразований) имеет смысл допустить некоторую ошибку. Величину допустимой RMSE можно представить как окно, окружающее точку с желаемыми координатами, положением расчетной точки внутри которого считается корректным. Например, если допуск RMSE равен 2, то расчетный пиксел может находится в двух пикселях от указанного оператором и являться допустимым. Величина допустимой ошибки зависит от типа и точности данных, задачи и точности контрольных точек. </p>
            <p>Важно помнить, что RMSE указывается в пикселях, поэтому, если привязываются данные Landsat имеющие разрешение 30 метров и задача осуществить привязку с точностью не меньше тех же 30 метров, то RMSE не должна превышать 1.00 (пикселя). </p>
            <p><strong>Оценка RMSE</strong></p>
            <p>Если RMSE расчитана и найдена слишком высокой, есть 4 варианта решения проблемы:</p>
            <ol>
              <li>Найти и удалить контрольные точки с большой RMSE, подразумевая, что это наименее точные точки. Это чревато еще возникновением еще больших ошибок, если отбраковываемая точка - единственная на большой участок изображения.</li>
              <li>Увеличить допуск RMSE.</li>
              <li>Увеличить сложность функции трансформации, которая более точно будет соответствовать введенным точкам. RMSE точек при этом уменьшится, однако использование сложных криволинейных функций может привести к нежелательным сильным искажениям растра.</li>
              <li>Оставить только точки в которых Вы уверены, что они правильны. </li>
            </ol>
            <p align="right"><em>В статье использованы материалы ERDAS IMAGINE Field Guide</em> </p>
            <p class="discuss">
				<span><!--#include virtual="/scripts/forum-comments-num.php?i=1639"--></span>
			</p>
			<div class="links">
			<h2>Ссылки по теме</h2>
			<ul>
               <li><a href="polynom.html">Полиномиальные преобразования</a></li>
               <li><a href="polynom-calc.html">Полиномиальные преобразования - вычисления и практика</a></li>
			</ul>
			</div>
<!--Contents end-->
<!--#include virtual="/scripts/date.php" -->
<p class="status"><span>Дата создания: 27.07.2007
<br>Автор(ы): <a href="/forum/memberlist.php?mode=viewprofile&u=2" target="_blank">Максим Дубинин</a></span></p>
<!--#include virtual="/inc/footer2.php" -->