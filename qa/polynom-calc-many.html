<!--#include virtual="/inc/header02.txt" -->
<title>GIS-Lab: Полиномиальные преобразования - математика для большого количества точек</title>
<!--#include virtual="/inc/header2.txt" -->
<div class="cont">
<div class="col1">

<ul class="path">
   <li class="first"><a href="/">Главная</a></li>
   <li><a href="/qa.html">Вопросы и ответы</a></li>
</ul>
<!--Contents start-->
<h1>Полиномиальные преобразования - математика для большого количества точек</h1>
            <p class="ann">Математические выкладки решения задачи, применяемой при привязке данных</p>
            <p><strong>Введение</strong></p>
            <p>При операции географической привязки данных, то есть перевода данных из локальной системы координат в географическую или прямоугольную, сам пересчет обычно происходит &quot;за сценой&quot; и его особенности часто понятны пользователю только интуитивно. Эта статья показывает полный алгоритм пересчета и может быть использована для реализации алгоритмов привязки данных в своем ПО и просто для более полного понимания того, что происходит на самом деле. Для менее насыщенного формулами описания рекомендуем ознакомиться со статьей &quot;<a href="polynom.html">Полиномиальные преобразования</a>&quot;. Указанная статья, хотя и содержит формулы преобразований, не показывает детальной их реализации, однако представляет важную информацию о  применении данных преобразований на практике. Для того, чтобы посмотреть примеры реализации подобных преобразований, рекомендуем ознакомиться со статьей &quot;<a href="polynom-calc-many-examples.html">Полиномиальные преобразования - примеры реализации для большого количества точек</a>&quot;, которая показывает примеры реализации на языке R и Excel. </p>
            <p>Так как одно из наиболее часто используемых преобразований при привязки - полиномиальное преобразование 2-й степени, мы иллюстрируем наши расчеты на его примере. Вычисления для <a href="affine-math.html">аффинного преобразования</a> (оно же полиномиальное преобразование 1-й степени) выполняются аналогичным образом, с меньшим количеством коэффициентов.</p>
            <p>Данная статья иллюстрирует случай, когда количество точек привязки больше минимально необходимого (n = 6). В случае если равно точек 6 следует ознакомиться со отдельными статьями (<a href="polynom-calc.html">математика</a>, <a href="polynom-calc-examples.html">примеры реализации</a>).</p>
            <p><strong><a name="01" id="01"></a>Математика</strong></p>
            <p>Решение задачи трансформации сводится к нахождению коэффициентов системы уравнений. Напомним, что в случае полиномиального преобразования 2-й степени, система уравнений выглядит следующим образом:</p>
	        <p align="center"><img src="/images/polynom-calc-01.gif" alt="система уравнений" width="295" height="65" /> </p>
	        <p>где:</p>
	        <p>x,y - координаты в исходной системе координат (известны) <br />
	          x<sup>'</sup>,y<sup>'</sup> - координаты в конечной системе координат (известны)<br />
            a<sub>0-5</sub>,b<sub>0-5</sub> - коэффициенты (неизвестны)</p>
	        <p>Таким образом, имея 12 неизвестных, нам понадобится минимум 6 пар точек с известными координатами до и после трансформации (x1,y1; x2,y2; x3,y3; x4,y4; x5,y5; x6,y6 и x1',y1'; x2',y2'; x3',y3'; x4',y4'; x5',y5'; x6',y6'), но обычно используется большее число точек (x1,y1 ... xn,yn), что делает возможным вычисление ошибки, здесь рассматривается именно этот случай:</p>
	        <p align="center"><img src="/images/polynom-calc-many-02.gif" alt="система уравнений" width="340" height="160" /></p>
	        <p>Или, перегруппируя этот набор уравнений по x и y:</p>
	        <p align="center"><img src="/images/polynom-calc-many-03.gif" alt="система уравнений" width="352" height="183" /> </p>
	        <p>Каждая группа используется соответственно для получения коэффициентов a<sub>i</sub> и b<sub>i</sub>. Точек в этом случае больше, но условие возможности умножения матриц, согласно которому умножение возможно если количество колонок в левой матрице равно количеству рядов в правой - сохраняется. Поэтому рядов в основной матрице (и соответственно точек привязки) может быть сколько угодно. В матричной форме это выглядит следующим образом, для a и b:</p>
	        <p align="center"><img src="/images/polynom-calc-many-04.gif" alt="система уравнений" width="305" height="192" /></p>
	        <p align="center"> <img src="/images/polynom-calc-many-05.gif" alt="система уравнений" width="300" height="195" /></p>
	        <p>В случае <a href="polynom-calc.html">минимально необходимого количества точек</a>, основная матрица Х является квадратной и ее можно инвертировать, для получение коэффициентов, каждая часть уравнения должна быть умножена на обратную матрицу с коэффициентами, например для коэффициентов a:</p>
	        <p align="center"><img src="/images/polynom-calc-many-06.gif" alt="система уравнений" width="497" height="389" /></p>
	        <p>В случае когда n&gt;7, основная матрица не квадратная и подобное решение уже <a href="http://ru.wikipedia.org/wiki/Обратная_матрица" target="_blank" class="external">не подходит</a>, так как ее нельзя инвертировать. </p>
	        <p>Не вдаваясь в подробности его вывода, решение такой системы в матричной форме будет выглядеть следующим образом:</p>
	        <p align="center"><img src="/images/polynom-calc-many-07.gif" alt="система уравнений" width="679" height="348" /></p>
	        <p>Или в упрощенной нотации:</p>
	        <p align="center"><img src="http://upload.wikimedia.org/math/e/9/5/e9544013f68c666c2584f65cff135fe1.png" width="150" height="27"> </p>
	        <p>Умножив правую и левую часть на инвертированный продукт умножения, получим матричную форму уравнения для вычисления коэффициентов, так же известную как <a href="http://en.wikipedia.org/wiki/Linear_least_squares" target="_blank" class="external">метод наименьших квадратов</a>: </p>
	        <p align="center"><img src="/images/polynom-calc-many-08.gif" alt="система уравнений" width="692" height="377" /> </p>
	        <p>Или в упрощенной нотации:</p>
	        <p align="center"><img src="http://upload.wikimedia.org/math/6/1/7/6175dc54794802efc09514e028381db0.png" width="169" height="28"></p>
	        <p></p>
	        <p>Таким образом, для решения данной системы, наше программное обеспечение должно уметь производить операции получения обратной матрицы, транспонирование и умножения матриц.
	          <!-- Второй раздел -->
</p>
	        <p>Полученный набор коэффициентов подставляется потом в исходные уравнения и задача получения новых координат решается для каждого пиксела исходного растра, получая таким образом результат в выходной системе координат.</p>
	        <p class="discuss">
				<span><!--#include virtual="/scripts/forum-comments-num.php?i=2049"--></span>
			</p>
			<div class="links">
			<h2>Ссылки по теме</h2>
			<ul>
               <li><a href="polynom.html">Полиномиальные преобразования</a></li>
			   <li><a href="rmse.html">Среднеквадратичная ошибка (RMSE)</a></li>
			   <li><a href="polynom-calc-examples.html">Полиномиальные преобразования - примеры реализации</a></li>
			</ul>
			</div>
            <!--#include virtual="/scripts/date.php" -->
<!--Contents end-->
<!--#include virtual="/inc/footer2.php" -->
