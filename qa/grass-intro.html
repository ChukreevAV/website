<!--#include virtual="/inc/header02.txt" -->
<title>GIS-Lab: Начало работы с GRASS для Windows используя командную строку</title>
<!--#include virtual="/inc/header2.txt" -->
<div class="cont">
<div class="col1">

<ul class="path">
   <li class="first"><a href="/">Главная</a></li>
   <li><a href="/qa.html">Вопросы и ответы</a></li>
</ul>
<!--Contents start-->
<h1>Начало работы с GRASS для Windows используя командную строку </h1>
<p class="ann">Первые шаги в освоение GRASS для Windows с управлением через командную строку </p>
<p class="discuss discuss_top"><span><!--#include virtual="/scripts/forum-comments-num.php?i=2237"--></span></p>
            <p><strong>Оглавление</strong></p>
            <ol>
              <li><a href="#01">Запуск</a></li>
              <li><a href="#02">Выбор рабочей области</a></li>
              <li><a href="#03">Создание карты </a></li>
            </ol>
            <!-- Первый раздел -->
            <p>Данная статья иллюстрирует начало работы с winGRASS, первой версией ГИС GRASS работающей в ОС Windows без эмуляции (так как работали под Windows <a href="grass-install.html">предыдущие версии GRASS</a>), для данной статьи использовалась версия GRASS 6.3. </p>
            <p>Подразумевается что GRASS был установлен под Windows с тестовыми наборами данных South Dakota (spearfish) и North Carolina, примеры иллюстрируют работу именно с этими наборами данных. Напомним, что по умолчанию эти данные устанавливаются в папку C:/Documents and Settings/user/My Documents/GIS DataBase, при установке GRASS нужно не забыть указать, что их необходимо установить.</p>
            <p>Подробное описание работы с GRASS можно найти на странице <a href="/docs/grass/index.html">обучающего пособия по GRASS</a>. </p>
            <p>Хотя GRASS имеет и графический интерфейс, в данной статье мы рассматриваем только вариант работы из командной строки, как наиболее продуктивный засчет возможности автоматизации. Также показываются некоторые общие особенности работы командного интерпретатора, с которыми придется столкнуться пользователю, начинающему работу с GRASS. </p>
            <h2><strong><a name="01" id="01"></a></strong>1. Запуск</h2>
            <p>Первый запуск GRASS проще осуществить из командного интерпретатора Windows (Пуск/Запустить):</p>
            <pre>cmd</pre>
            <p>Переместимся в папку в которую установлен GRASS (в нашем случае c:\gis\grass) и запустим его с ключем -text, который запустит GRASS в консольном режиме (без графического интерфейса).</p>
            <pre>cd c:\gis\grass
grass63.bat -text</pre>
            <p>В дальнейшем для запуска GRASS удобно создать ярлык с полной командой запуска:</p>
            <pre>c:\gis\grass\grass63.bat -text</pre>
            <h2><strong><a name="02" id="02"></a></strong>2. Выбор рабочей области</h2>
            <p>Появившееся окно даст возможность выбрать начальную область (location) и набор данных (mapset). Введем в поле LOCATION слово list и нажмем ESC+ENTER:</p>
            <p align="center"><img src="../images/grass-intro-01.gif" alt="grass" width="652" height="331" /></p>
            <p>Появится окно, которое покажет доступные области, которые должны были быть установлены вместе с GRASS:</p>
            <p align="center"><img src="../images/grass-intro-02.gif" alt="grass" width="668" height="331" /></p>
            <p>Выйдем обратно в окно выбора области нажав ENTER. Введем в поле LOCATION одно из названий областей, которые мы имеем, допустим это будет South Dakota, название должно точно соответствовать тому, которое выводилось в списке list'ом, иначе будет предложено создать новую область. Если имя области введено верно, GRASS выведет краткую информацию о программе, версию GRASS и название текущей рабочей области.</p>
            <p align="center"><img src="../images/grass-intro-03.gif" alt="grass" width="668" height="331" /></p>
            <p>Перед тем как вводить команды нужно определиться, как получить по ним справку, ее помощью придется воспользоваться не раз. Справка к команде вызывается ключем help. Если название команды вводится без параметров, то обычно ничего не происходит, командой возвращается пустая строка. Например если ввести команду вывода списка слоев:</p>
            <pre>g.list</pre>
            <p>То результатом будет просто пустая строка. Для того, чтобы для любой команды посмотреть ее параметры, необходимо выполнить эту команду с ключом -help.</p>
            <pre>g.list -help</pre>
            <p>Результатом будет описание данной команды и ее параметров. Параметры вводятся как есть, имя от значения отделяется пробелом, иногда те или иные названия параметров можно опускать (например type=, map= и другие, обычно эти параметры указываются без квадратных скобок в системе помощи). Например, посмотрим все-таки список векторных слоев в выбранной нами области, это можно сделать двумя способами: </p>
            <pre>g.list type=vect
g.list vect</pre>
            <p align="center"><img src="../images/grass-intro-04.gif" alt="grass" width="668" height="331" /></p>
            <p>Теперь мы знаем какие слои находятся в текущей области и начнем создавать на их основе карту.</p>
            <h2><strong><a name="03" id="03"></a></strong>3. Создание карты</h2>
            <p>Удобный способ автоматизации вывода карт, использование команды ps.map с соответствующим файлом - описанием карты. Описание представляет из себя текстовый файл, где перечислены слои, с параметрами их визуализации, а также зарамочное оформление карты и другие элементы. </p>
            <p>Общий формат файла описания карты состоит из набора блоков, начинаемых определенной командой из следующего списка:</p>
            <p>[ border | colortable | comments | copies | eps | geogrid | greyrast | grid | group | header | labels | line | mapinfo | maploc | maskcolor | outline | paper | point | psfile | raster | read | rectangle | region | rgb | scale | scalebar | setcolor | text | vareas | vlines | vpoints | vlegend | end ]</p>
            <p>Подробная информация о каждой команде доступна на <a href="http://grass.ibiblio.org/grass63/manuals/html63_user/ps.map.html" target="_blank" class="external">странице описания модуля ps.map</a> GRASS Wiki. </p>
            <p>Каждая команда имеет ряд возможных параметров. Общий формат задания команд следующий:</p>
            <pre>команда {слой}
       {параметры}
{end}</pre>
            <p>Команды могут включать и не включать имя слоя, некоторые команды не связаны с каким-либо слоями, например показывание легенды или шкалы масштаба. У команды также может не быть параметров, в этом случае слово end не обязательно.</p>
            <p>Рассмотрим пример такого файла по частям, все слои используемые в этом примере находятся в области South-Dakota. Для начала, укажем слой рельефа в качестве фонового.</p>
            <pre>raster elevation.10m
</pre>
            <p>На него положим точечный слой археологичестких памятников с точками синего цвета и гидрологию, так же синего цвета с толщиной линии 2. </p>
            <pre>
vpoints archsites
        color blue
        size 10
end

vlines streams
        color blue
        width 2
end
</pre>
            <p>Так же нанесем две сетки, одну - прямоугольную, через каждые 10 тысяч метров, красного цвета, с подписыванием каждой линии, а другую - географическую, синего цвета, также подписанную на каждой линии, которые проложим через каждые 30 минут. </p>
            <pre>grid 10000
        color red
        numbers 1 red
end

geogrid 10 m
        color blue
        numbers 1 blue
end
</pre>
            <p>Поместим на карту легенду: </p>
            <pre>vlegend
        where 4.5 0
        font Courier
        fontsize 12
        end</pre>
            <p>Полученный map-файл нужно экспортировать в графический формат ps и/или pdf с помощью команд ps.map и ps2pdf:</p>
            <pre>ps.map input=dakota.map output=dakota.eps<br />ps2pdf dakota.eps dakota.pdf<br /></pre>
            <p>Результирующая карта должна выглядеть примерно таким образом:</p>
            <p align="center"><img src="../images/grass-intro-05.gif" alt="grass" width="400" height="326" /> </p>
            <p>Как было указано выше для команды g.list, некоторые из названий параметров можно опускать, также можно сокращать другие названия параметров, например, приведенной выше команде ps.map соответствует такая форма, с сокращениями in (вместо input) и out (вместо output):</p>
            <pre>ps.map in=dakota.map out=dakota.eps
</pre>
<p class="discuss">
	<span><!--#include virtual="/scripts/forum-comments-num.php?i=2237"--></span>
</p>
			<div class="links">
			<h2>Ссылки по теме</h2>
			<ul>
               <li><a href="/qa/grass-intro-gui.html">Начало работы с GRASS для Windows через графический интерфейс wxPython</a></li>
			   <li><a href="/docs/grass/tutorial60/index.html">Учебное руководство по ГИС GRASS 6.0</a></li>
			</ul>
			</div>
<!--Contents end-->
<!--#include virtual="/scripts/date.php" -->
<p class="status"><span>Дата создания: 12.05.2008
<br>Автор(ы): <a href="/forum/memberlist.php?mode=viewprofile&u=2" target="_blank">Максим Дубинин</a></span></p>
<!--#include virtual="/inc/footer2.php" -->