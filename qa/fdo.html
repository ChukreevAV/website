<!--#include virtual="/inc/header02.txt" -->
<title>GIS-Lab: Feature Data Objects - комплекс решений для доступа к пространственным данным</title>
<!--#include virtual="/inc/header2.txt" -->
<div class="cont">
<div class="col1">

<ul class="path">
   <li class="first"><a href="/">Главная</a></li>
   <li><a href="/qa.html">Вопросы и ответы</a></li>
</ul>
<!--Contents start-->
<h1>Feature Data Objects - комплекс  решений для доступа к пространственным данным</h1>
<p class="ann">Описание Feature Data Objects </p>
<p class="discuss discuss_top"><span><!--#include virtual="/scripts/forum-comments-num.php?i=2869"--></span></p>
            <p><a href="http://fdo.osgeo.org/" target="_blank" class="external">Feature Data Objects</a> (далее FDO) – это комплекс  решений от компании Autodesk,  разработанный на основе библиотек GDAL и OGR,  предоставляющий возможность создания прикладных программ для географических  информационных систем с эффективными инструментами для преобразования, хранения  и изменения пространственных данных.</p>
            <p>FDO – создан для разработчиков приложений ГИС в  виде продуманного API (Application   Programming Interface), функционал которого  может быть расширен при помощи таких языков программирования как Microsoft C#.NET, Microsoft Visual Basic.NET и, конечно же, Microsoft Visual C++.NET.  Все структуры данных соответствуют стандартам Open Geospatial Consortium (OGC).</p>
            <h2>Оглавление</h2>
            <ol>
                  <li><a href="#01">Что такое Feature Data Objects (FDO)?</a></li>
                  <li><a href="#02">Введение в Feature Data Objects</a></li>
                  <li><a href="#03">Обзор провайдеров данных</a></li>
                  <li><a href="#04">Системные требования FDO API</a></li>
                  <li><a href="#05">Начало работы с FDO</a></li>
                  <li><a href="#06">Установка и конфигурация провайдеров данных FDO</a></li>
            </ol>
            <p><img src="/images/1.gif" alt="1" width="33" height="41" align="left" /><a name="01" id="01"></a><strong>Что такое Feature Data Objects (FDO)?</strong></p>
	    <p>Доступ к пространственным данным при помощи FDO осуществляется при  помощи основных объектов класса Provider.  Так, например, объект класса MySQL Provider создает соединение с  источником данных MySQL Server, который содержит в  себе географическую информацию. После того как соединение установлено,  средствами FDO можно выбрать часть или все данные необходимые для визуализации или анализа.  Выбор данных происходит аналогично команде Select, которая так часто используется в запросах SQL.</p>
	    <p>Работу SHP (ESRI Shape Files) провайдера пространственных данных можно представить  примерно такой схемой: создание соединения с источником  данных SHP &gt;  cоздание запроса SQL для выбора пространственных  данных &gt;  выполнение запроса SQL &gt;  возвращение набора пространственных объектов.</p>
	    <p>Каковы выгоды от использования такой  технологии? Можно сразу заметить, что отсутствует основная операция  «конвертации» данных. Благодаря библиотеке абстракций GDAL, работающей с большинством  форматов пространственных данных напрямую, FDO способен создавать множество соединений с  источниками данных, без  какого-либо преобразования информации. Кроме  «чтения-на-лету» FDO также способен  изменять или добавлять новые пространственные объекты!</p>
	    <p>Необходимые требования к контекстному  содержанию источников данных от FDO такие:</p>
	    <ul type="square">
          <li>Источник       данных может содержать одно или несколько хранилищ данных. Хранилищем       данных (data store) называется       пространство на диске (или любом другом        информационном носителе), которое хранит географические       данные.</li>
	      <li>Хранилище       данных может содержать одну или несколько схем данных (feature scheme) - информации о структуре       географических данных, а также одно или несколько пространственных       содержаний (spatial context). Здесь под пространственным       содержанием подразумевается неструктурированный набор географических       данных.</li>
	      <li>Схема       данных может содержать один или несколько классов (feature classes) пространственных объектов. Здесь под классом пространственных объектов подразумевается       структурированный набор географических данных.</li>
	      <li>Класс       пространственных объектов может содержать одно поле геометрических данных (feature geometry properties) (геометрических        структур пространственного объекта), а также одно или       несколько полей атрибутивных данных (non-feature geometry properties – это данные, которые       не имеют геометрических данных, но однозначно определяющие свойства       пространственного объекта). Класс пространственных объектов может быть       любым другим типом геометрических данных, совместимых с FDO.</li>
	    </ul>
	    <p>Геометрическая структура пространственного  объекта в представленной координатной системе, может быть выражена в двух (2D),  в трех (3D), а иногда даже и в четырех измерениях (4D).  Представление геометрической информации в FDO основано на OpenGIS Simple Features Implementation Specification for SQL (version 1.1, document 99-049), который можно найти на сайте <a href="http://www.opengeospatial.org/standards" target="_blank" class="external">www.opengeospatial.org/standards</a>.</p>
	    <p>Структура географических данных FDO может быть сохранена  в формате XML. FDO XML формат базируется на стандарте OpenGIS Consortium Geography Markup Language (version 2.1.1, document 02-009), который можно найти на сайте <a href="http://www.opengeospatial.org/standards/gml" target="_blank" class="external">www.opengeospatial.org/standards/gml</a>. Структурой  географических данных FDO является всего лишь информация о схематическом представлении данных, которая не  зависит от местоположения источника данных.</p>
	    <h3>FDO API</h3>
	    <p>FDO API доступен в двух  основных модификациях: первая – Enterprise, а вторая – Open Source, а также для двух платформ: Windows и Linux. Enterprise версия FDO API содержит в себе все компоненты версии Open Source, а также некоторые дополнительные  компоненты, например провайдер данных для SDF (Spatial Data Format от Autodesk). Open Source версия содержит в  себе исключительно компоненты Open Source.</p>
	    <p>Версия Enterprise реализована в качестве основного компонента  для таких программных продуктов как: AutoCAD Map 3D, AutoCAD Civil 3D, Autodesk MapGuide Enterprise и Autodesk Topobase. FDO API в контексте этих  программных продуктов может оказаться не столь содержательным для разработчика,  поскольку он ориентирован именно на эти программные продукты. То есть API для AutoCAD Map 3D прежде всего  построен на платформе AutoCAD,  а AutoCAD не предназначался для ГИС. Таким образом, FDO API для AutoCAD Map 3D нужно было так  изменить, чтобы он безупречно работал с платформой AutoCAD.</p>
	    <p>Версия OpenSource реализована в виде  исходного кода, который можно найти и скачать на сайте Open Source Geospatial Foundation <a href="http://fdo.osgeo.org/downloads" target="_blank" class="external">http://fdo.osgeo.org/downloads</a> в виде архивов.  Наименование проекта «fdo». Документация  содержит в себе инструкции по инсталляции программного комплекса на  соответствующей платформе.</p>
	    <p><img src="/images/2.gif" alt="2" width="33" height="41" align="left" /><a name="02" id="02"></a><strong>Введение в Feature Data Objects</strong></p>
	    <p>Цели этой статьи:</p>
	    <ol>
	      <li>Описание установки компонентов FDO, для создания приложения ГИС, использующих соединения с источниками  пространственных данных</li>
	      <li>Описание настройки провайдеров данных,  использующих данные соединения. </li>
	      </ol>
	    <p>«Настройка и конфигурация провайдеров данных»  позволяет создавать или удалять учетные записи пользователей, распределять  ролевую политику для пользователей, создавать или уничтожать хранилища  пространственных данных, а также создавать или уничтожать пространственные  содержания. Но не все провайдеры данных поддерживают настройку и конфигурацию.  Более подробная информация содержится в разделе Совместимость методов провайдеров данных.</p>
	    <p>Провайдеры данных, основанные на технологии RDBMS, за исключением Microsoft SQL Server, требуют установки  специальных компонентов RDBMS,  без которых полная функциональность этих провайдеров данных не гарантируется.  Более подробная информация по установке и настройке компонентов RDBMS будет рассмотрена в  следующем разделе. Если компонент RDBMS для Microsoft SQL Server уже установлен и настроен, то рекомендуется  просмотреть последовательность его установки и настройки.</p>
	    <p>В последующих разделах будут рассмотрены  наиболее важные объекты классов, и их методы, которые нужно использовать для  создания соединений с источниками данных, но подробное описание их  функционирования в эту статью включаться не будет. За подробной информацией об объектах классов и их методах рекомендуется  обратиться к <a href="http://fdo.osgeo.org/files/fdo/docs/FDO_API/index.htm" target="_blank" class="external">FDO API reference documentation</a> по адресу <a href="http://fdo.osgeo.org/files/fdo/docs/FDO_API_managed/index.htm" target="_blank" class="external">http://fdo.osgeo.org/files/fdo/docs/FDO_API_managed/index.htm</a>.</p>
	    <p><a href="http://fdo.osgeo.org/files/fdo/docs/FDG_FDODevGuide.pdf" target="_blank" class="external">FDO developer’s guide</a>также содержит в себе полное описание  структур и типов данных FDO API, который может стать  отличным руководством для тех, кто хочет разработать ГИС на основе FDO. “FDO developer’s guide” снабжен примерами в виде исходного кода, где подробно  разбираются возможности создаваемого Вами ГИС-приложения на основе FDO.</p>
	    <p>Документация, которую можно найти и  скачать на сайте <a href="http://fdo.osgeo.org/documentation.html" class="external">http://fdo.osgeo.org/documentation.html</a> поможет  немедленно приступить к  разработке специализированных программных продуктов на базе FDO. Следует обратить  внимание на следующую документацию:</p>
	    <ul type="square">
          <li><em>FDO ReadMe </em><a href="http://fdo.osgeo.org/files/fdo/docs/FET_TheEssentialFDO/index.html" class="external">http://fdo.osgeo.org/files/fdo/docs/FET_TheEssentialFDO/index.html</a></li>
	      <li><em>FDO Developer’s Guide </em><a href="http://fdo.osgeo.org/files/fdo/docs/FDG_FDODevGuide/index.html" class="external">http://fdo.osgeo.org/files/fdo/docs/FDG_FDODevGuide/index.html</a></li>
	      <li><em>Building FDO Open Source </em><a href="http://fdo.osgeo.org/files/fdo/docs/OpenSourceBuild__README.html" class="external">http://fdo.osgeo.org/files/fdo/docs/OpenSourceBuild__README.html</a></li>
	      <li><em>FDO API Reference </em><a href="http://fdo.osgeo.org/files/fdo/docs/FDO_API/index.htm" class="external">http://fdo.osgeo.org/files/fdo/docs/FDO_API/index.htm</a></li>
	      <li><em>FDO API Reference – Managed </em><a href="http://fdo.osgeo.org/files/fdo/docs/FDO_API_managed/index.htm" class="external">http://fdo.osgeo.org/files/fdo/docs/FDO_API_managed/index.htm</a></li>
	      <li><em>OSGeo FDO Provider for ArcSDE       API Reference </em><a href="http://fdo.osgeo.org/files/fdo/docs/ArcSDE/index.html" class="external">http://fdo.osgeo.org/files/fdo/docs/ArcSDE/index.html</a></li>
	      <li><em>OSGeo FDO Provider for MySQL API       Reference </em><a href="http://fdo.osgeo.org/files/fdo/docs/MYSQL/index.html" class="external">http://fdo.osgeo.org/files/fdo/docs/MYSQL/index.html</a></li>
	      <li><em>OSGeo FDO Provider for ODBC API       Reference </em><a href="http://fdo.osgeo.org/files/fdo/docs/ODBC/index.html" class="external">http://fdo.osgeo.org/files/fdo/docs/ODBC/index.html</a></li>
	      <li><em>OSGeo FDO Provider for SDF API       Reference </em><a href="http://fdo.osgeo.org/files/fdo/docs/SDF/index.html" class="external">http://fdo.osgeo.org/files/fdo/docs/SDF/index.html</a></li>
	      <li><em>OSGeo FDO Provider for SHP API Reference </em><a href="http://fdo.osgeo.org/files/fdo/docs/SHP/index.html" class="external">http://fdo.osgeo.org/files/fdo/docs/SHP/index.html</a></li>
	      <li><em>OSGeo FDO Provider for WMS API Reference </em><u><a href="http://fdo.osgeo.org/files/fdo/docs/WMS/index.html" class="external">http://fdo.osgeo.org/files/fdo/docs/WMS/index.html</a></u></li>
	      <li><em>OSGeo FDO Provider for WFS API Reference </em><u><a href="http://fdo.osgeo.org/files/fdo/docs/WFS/index.html" class="external">http://fdo.osgeo.org/files/fdo/docs/WFS/index.html</a></u></li>
	      <li><em>Autodesk FDO Provider for Oracle API Reference </em>(входит в комплект продуктов Autodesk)</li>
	      <li><em>Autodesk FDO Provider for Raster API Reference </em>(входит в комплект продуктов Autodesk)</li>
	      <li><em>Autodesk FDO Provider for SQL Server API       Reference </em>(входит в комплект продуктов Autodesk)</li>
	      </ul>
	    <p>Примечание: Документация о  провайдере данных FDO Providerfor WFS не содержит никаких  данных о его архитектуре и API,  но его функционал полностью доступен, и может быть использован посредством FDO API.</p>
	    <p><img src="/images/3.gif" alt="2" width="33" height="41" align="left" /><a name="03" id="022"></a><strong>Обзор провайдеров данных</strong></p>
        <p>В этом разделе дано краткое описание файловых  провайдеров данных и провайдеров данных   на основе реляционных баз данных. Здесь все провайдеры данных названы  полными именами, однако в данной статье могут быть использованы и их краткие  названия. Провайдеры данных от Autodesk поставляются только вместе с соответствующими программными продуктами, а  остальные провайдеры данных доступны согласно спецификациям Open Geospatial Consortium (OGC).</p>
        <table width="85%" align="center">
          <tr>
            <td><p>Наименование провайдера</p></td>
            <td><p>Описание провайдера</p></td>
            </tr>
          <tr>
            <td>OSGeo FDO Provider for ArcSDE</td>
            <td>Обеспечивает доступ к базам географических данных ESRI ArcSDE в режиме  чтения и записи (ESRI ArcSDE в свою очередь базируется на СУБД Oracle или Microsoft SQL Server). Поддерживает импорт и экспорт схем базы данных, добавление, выбор,  изменение и удаление записей в схеме базы данных, но не поддерживает создания  или удаления схем.</td>
          </tr>
          <tr>
            <td>OSGeo FDO Provider for MySQL</td>
            <td>Обеспечивает доступ к базам данных MySQL Server в режиме  чтения и записи. Поддерживает пространственные типы данных и запросы.  Достаточно содержательный API позволяет не только  получать информацию, но и обрабатывать ошибки, создавать новые соединения и  получать список всех хранилищ данных. Архитектура MySQL поддерживает разнообразные хранилища данных на его основе.</td>
          </tr>
          <tr>
            <td>OSGeo FDO Provider for ODBC</td>
            <td>Обеспечивает доступ к базам данных ODBC в режиме чтения записи. К сожалению, поддерживает  исключительно объекты свойственные точкам с координатами X, Y и Z (источники данных на основе Microsoft Access, тут остаются «не у дел», если они хранят  пространственную информацию так же, как, например, Oracle или Microsoft SQL Server). Не поддерживает создания или удаления схем. Обычно используется для  непосредственного задания положения объекта в пространстве.              </td>
          </tr>
          <tr>
            <td>OSGeo FDO Provider for SDF</td>
            <td>Обеспечивает доступ к хранилищу данных на основе SDF в режиме чтения и записи. Специальный формат SDF, который был разработан Autodesk, поддерживает объекты со сложной геометрией, и  обладает высокой производительностью при больших объемах данных, полностью  совместим с другими продуктами Autodesk, использующими данный формат. Поддерживает  «пространственное индексирование» и полностью может заменить обычное хранилище  географических данных. Последняя версия FDO поддерживает только формат версии 3.0 и выше.</td>
          </tr>
          <tr>
            <td>OSGeo FDO Provider for SHP</td>
            <td>Обеспечивает доступ к пространственным и  атрибутивным данным на основе ESRI Shape в режиме чтения и записи, которые делятся на три основных файла для  геометрии, индексирования и атрибутивных данных. Каждый файл SHP и ассоциированный с нимфайл DBF – это класс пространственных объектов. Может  заменить обычное хранилище данных, но не поддерживает многопользовательское  редактирование.</td>
          </tr>
          <tr>
            <td>OSGeo FDO Provider for WFS</td>
            <td>Обеспечивает доступ к пространственным и  атрибутивным данным на основе WFS в режиме  чтения.Web File Service поддерживает клиент-серверное подключение с одним  или несколькими серверами данных, предоставляющих пространственную информацию в  формате Geographic Markup Language (GML). Связь с  серверами данных WFS, хранится в формате XML, за  исключением геометрической информации, которая хранится в формате GML. В данный момент документация о провайдере данных FDO Provider for WFS не содержит никаких данных о его архитектуре и API, но его функционал полностью доступен, и может быть использован  посредством FDO API.</td>
          </tr>
          <tr>
            <td>OSGeo FDO Provider for WMS</td>
            <td>Обеспечивает доступ к пространственным и  атрибутивным данным на основе WMS в режиме  чтения. Web Mapping Service предоставляет картографическую информацию в соответствующей координатной  системе в форматах PNG, GIF и JPEG, а также помимо растровых форматов еще и в  векторных Scalable Vector Graphics (SVG) или Web Computer Graphics Metafile (Web CGM).</td>
          </tr>
          <tr>
            <td>Autodesk FDO Provider for Oracle</td>
            <td>Обеспечивает доступ к базам данных Oracle в режиме чтения и записи. Поддерживает пространственное индексирование,  продолжительные транзакции и блокировки данных. Достаточно содержательный API позволяет не только получать информацию, но и  обрабатывать ошибки, создавать новые соединения и получать список всех хранилищ  данных.</td>
          </tr>
          <tr>
            <td>Autodesk FDO Provider for Raster</td>
            <td>Обеспечивает доступ к пространственным данным в  растровых форматах в режиме чтения. Поддерживает разнообразные файловые  форматы, которые часто используются в ГИС: JPEG, PNG, MrSID и другие. Также поддерживает ориентированные в координатной системе  растровые изображения, например, такие как GeoTIFF, GRID, Coverages, а также  космические снимки.</td>
          </tr>
          <tr>
            <td>Autodesk FDO Provider for SQL Server</td>
            <td>Обеспечивает доступ к базам данных Microsoft SQL Server в режиме чтения и записи. Поддерживает создание,  изменение и удаление схем, а также пространственные и непространственные типы  данных.</td>
          </tr>
        </table>
        <p>&nbsp;</p>
        <p><img src="/images/4.gif" alt="2" width="33" height="41" align="left" /><a name="04" id="023"></a><strong>Системные требования FDO API</strong></p>
        <h3>Операционная система и провайдеры данных, основанные на RDBMS</h3>
        <p>Требования к  операционной системе и провайдерам данных, основанных на технологии RDBMS, описаны в  документации для провайдеров данных и соответствуют версиям Open Source и Enterprise.</p>
        <h4>Среда для разработки приложений на основе FDO</h4>
        <p>FDOAPI написан на языке Microsoft Visual C++.NET,  поэтому все примеры использования объектов классов в этой статье также будут  приводиться на языке С++. Однако в статье будут описаны примеры на эквивалентных  языках программирования, например на Microsoft Visual C#.NET или Microsoft Visual Basic.NET.
        <h4>Microsoft Windows XP Service Pack 2</h4>
          <p> Наибольшая часть исходного кода FDO API требует установленной среды программирования Microsoft Visual  Studio 2005 (Express, Standard или Professional редакций).</p>
        <h4>RedHat Enterprise Linux 3</h4>
        <p> Среда  программирования основана на GNU.</p>
        <p>&nbsp;</p>
        <p><img src="/images/5.gif" alt="2" width="33" height="41" align="left" /><a name="05" id="024"></a><strong>Начало работы с FDO</strong></p>
        <h3>Установка FDO</h3>
        <h4>OpenSource</h4>
        <p>Установка FDO Open Source Edition достаточно хорошо описана  в <a href="http://fdo.osgeo.org/documentation.html" target="_blank" class="external">Building FDO Open Source</a>. В данном документе содержится  инструкция по сборке библиотек FDO и их последующей  установке</p>
        <h4>Enterprise</h4>
        <p>          FDO Enterprise Edition устанавливается  в виде компонентов для таких программных продуктов, как AutoCAD Map 3D, AutoCAD Civil 3D, Autodesk MapGuide Enterprise и Autodesk Topobase.  Исходный код FDO API доступен на языках Microsoft Visual C++.NET и Microsoft Visual C#.NET в контексте  программного продукта AutoCAD Map 3D 2009, а Autodesk MapGuide Enterprise 2009 Server дополнен исходным кодом FDO API на языке Microsoft Visual C#.NET.</p>
        <h3>Доступ к документации</h3>
        <p>Документация FDO API специально создана на базе doxygen, таким образом,  чтобы поддерживались ссылки на заголовки других документов или заголовки для  исходного кода. Doxygen формирует документацию на базе html,  благодаря этому сохраняется общая структура документа и ссылки на их заголовки (можно дать ссылку  на статью про doxygen на гислаб) </p>
        <p>В случае обращения к документации FDO API, укажите вкладку с надписью «Classes» с правой стороны и из открытого списка выберите  класс, описание которого интересует. Документация расположена в каталоге  установки  FDO <em>&lt;install directory&gt;\Dosc\HTML\FDO_API</em>.        </p>
        <h3>Создание соединения и доступа к пространственным данным</h3>
        <p>Создание  соединения выполняется следующим образом:</p>
        <ol>
          <li>Создайте или выберите  из реестра провайдер данных.</li>
          <li>Создайте менеджер  соединений.</li>
          <li>Создайте соединение.</li>
          <li>Определите тип  источника данных.</li>
          <li>Получите список  файлов источника данных.</li>
          <li>Получите состояние  соединения.</li>
          <li>Получите свойства  соединения.</li>
          <li>Получите значения  свойств соединения.</li>
          <li>Установите свойства  соединения.</li>
          <li>Откройте соединение.</li>
          <li>Откройте  продолжительное соединение.</li>
          <li>Получите список  файлов источника данных, если они существуют.</li>
         </ol>
        <h4>Создание в реестре провайдера данных</h4>
        <p>Метод GetProviders класса FdoProviderRegistry возвращает содержимое файла providers.xml, который расположен в папке <em>&lt;</em><em>install</em><em>&gt;\</em><em>bin</em>для Windows,  или в папке <em>\</em><em>usr</em><em>\</em><em>local</em><em>\</em><em>fdo</em><em>-&lt;</em><em>version</em><em>&gt;\</em><em>lib</em> для Linux,  что, по своей сути является реестром провайдеров данных.</p>
        <p>Когда создается  соединение, можно использовать одно из имен провайдеров данных, возвращенных  данным методом в виде массива строк.</p>
        <h4>Создание менеджера соединений</h4>
        <p>Менеджер  соединений создает новые соединения.</p>
        <p>Метод GetConnectionManager класса FdoFeatureAccessManager управляет созданными  или уже имеющимися соединениями.</p>
        <h4>Создание соединения</h4>
        <p>Метод CreateConnection класса FdoConnectionManager создает новое  соединение.</p>
        <h4>Определение типа источника данных</h4>
        <p>Источник данных может  быть представлен в виде файлов, баз данных или ресурса на веб-сайте. Провайдеры могут  определять тип соответствующего источника данных, для которого в данный момент  создано соединение. Например, провайдеры для SDF, SHP или  растровых источников данных,  могут иметь  только один тип «File». Провайдеры для Oracle, MySQL, ArcSDE или SQL Server создают соединения с базами данных, и потому  имеют только один тип «Database Server». Провайдеры для WFS и WMS создают соединения с  ресурсами на веб-сайтах, и потому имеют только один тип «Web Server».  Провайдеры для ODBC могут создавать соединения как с файлами, так и с базами данных и потому  определены типом «Unknown».</p>
        <p>Вы можете определить  тип источника данных, после того как создали соединение с ним, при помощи метода  GetProviderDatastoreType, который определен в  классе FdoIConnectionInfo.</p>
        <h4>Получение  списка файлов источника данных</h4>
        <p>Если открыто  соединение с источником данных, тип которого определен как «File»,  Вы можете получить список файлов, которые содержатся данным источником. Для  соединения с источником данных через провайдер SDF, список будет представлен только *.sdf  файлами. Для соединения с источником данных через провайдер SHP, список будет  представлен файлами *.shp, а также  дополнительными файлами *.shx, *.dbf,  *.prj. Провайдер SHP может  создавать соединение и с папками, содержащими файлы *.shp,  *.shx, *dbf и *.prj.  Для соединения с источником данных через растровый провайдер, список будет  представлен файлами растровых форматов, например *.jpg,  и соответствующими файлами *.jgw и *.xml.</p>
        <p>Метод GetDependentFileNames класса FdoIConnectionInfo возвращает массив строк в виде имен файлов  источника данных.</p>
        <h4>Получение свойств соединения</h4>
        <p>Первое, что можно  сделать, это получить информацию о соединении при помощи метода GetConnectionInfo класса FdoIConnection.</p>
        <p>Затем можно получить  свойства соединения при помощи метода GetConnectionProperties класса FdoIConnectionInfo, этот метод возвращает упорядоченный массив  значений свойств соединения.</p>
        <p>Упорядоченный массив  свойств соединения представлен классом FdoIPropertyDictionary. Все методы этого класса обеспечивают получение значений  свойств соединения по имени свойства, а также значений по умолчанию или  определенных перечислением значений.</p>
        <h4>Получение значений свойств соединения</h4>
        <p>Свойства соединения  могут быть представлены определенными значениями:</p>
        <ol>
          <li>user names </li>
          <li>passwords </li>
          <li>file path names </li>
          <li>URLs </li>
          <li>symbolic host names </li>
          <li>service identifiers </li>
          <li>data store names </li>
        </ol>
        <p>Каждый провайдер  данных снабжен уникальным списком наименований свойств. Более подробную  информацию о наименовании свойств смотрите в документации “FDO developer’s guide”.</p>
        <h4>Установка значений свойств соединения</h4>
        <p>Установка значений  свойств соединения осуществляется при помощи методов класса FdoIPropertyDictionary.</p>
        <h4>Откройте соединение</h4>
        <p>Открытие соединения  осуществляется при помощи метода Open для класса FdoIConnection. Прежде чем обращаться к методам соединения,  убедитесь, что соединение открыто при помощи метода GetConnectionState.</p>
        <h4>Откройте продолжительное соединение</h4>
        <p>Каждый провайдер данных, основанный на технологии RDBMS, в настройках соединения имеет свойство, определяющее имя источника  данных. При создании соединения имя источника данных можно не указывать, и тогда  соединение можно называть «продолжительным». Во время инициализации соединения  необходимо указать имя источника данных, хотя смысл продолжительных соединений  в том, что они могут быть установлены для различных источников данных с  различными именами. Необходимо только изменить значение соответствующего свойства  в настройках соединения.</p>
        <p>Если создается  продолжительное соединение с источником данных, используя провайдер данных ArcSDE, то можно убедиться  в том, что возвращаемый специальным методом список имен источников данных  всегда содержит только одно наименование.</p>
        <h4>Получите список файлов источника данных, если  они существуют</h4>
        <p>Список файлов  источника данных можно получить и после соединения с ним. Соответствующий метод  определит список имен файлов, если провайдер данных имеет соответствующий тип.</p>
        <h3>Особенности при использовании некоторых провайдеров  данных</h3>
        <h4>ArcSDE Provider</h4>
        <p>          Этот тип провайдера  пространственных данных может быть использован для подключения к источнику  данных на основе ArcSDE,  который, в свою очередь, создает соединение с базами данных типа Oracle или Microsoft SQL Server.</p>
        <p>После подключения  необходимо получить информацию о количестве и содержанию схем пространственных  данных, после чего можно смело использовать стандартные команды INSERT,  DELETE, UPDATE и SELECT.</p>
        <h4>MySQL Provider</h4>
        <p>          Здесь необходимо  указать информацию, определяющую наименование источника данных и имя  пользователя, создающего подключение к базе данных, затем создать схему  пространственных данных, после чего можно использовать стандартные команды.</p>
        <h4>SDF, SHP и ODBC Provider</h4>
        <p> Здесь необходимо  создать схему пространственных данных, после чего можно использовать  стандартные команды.</p>
        <h4>WFS и WMS Provider</h4>
        <p>Здесь необходимо  получить информацию о содержании схем пространственных данных, после чего можно  использовать стандартные команды.</p>
        <h3>Совместимость методов провайдеров данных</h3>
        <p>Можно также  определить совместимость методов провайдеров данных, чтобы получить  представление о возможности выполнения некоторых методов, поддерживаемых этим  провайдером.</p>
        <p>Параметры  совместимости можно получить посредством использования объекта соединения,  причем не имеет значение открыто или закрыто в данный момент соединение. Эти  параметры указывают значения, определяющие совместимость некоторых методов  провайдера данных, который использует данное соединение. Например: параметры  совместимости для Oracle или Microsoft SQL Server указывают на то, что провайдер данных  использующий соединение с этими источниками, поддерживает команду UPDATE,  но в процессе выполнения этой команды Вы можете получить сообщение об ошибке,  связанное с тем, что указанная учетная запись пользователя базы данных не имеет  разрешения на изменение данных в указанном источнике.</p>
        <p>Используя информацию о совместимости методов провайдеров данных, можно  избежать получения сообщения об ошибках, а также возможности использование  команд UPDATE, INSERT, DELETE а также других. Для этого используйте перечисленные ниже методы FdoICommandCapabilities, FdoIConnectionCapabilities, FdoIExpressionCapabilities, FdoIFilterCapabilities, FdoIRasterCapabilities, FdoISchemaCapabilities, FdoITopologyCapabilities класса FdoIConnection.</p>
        <h3>Особенности при использовании реестра учетных записей</h3>
        <p>Реестр учетных  записей или пользователей очень часто используется в реляционных базах данных. API провайдеров данных  включают в себя методы для создания, изменения или удаления учетных записей из  реестра таких баз данных как Oracle, MySQL Server или Microsoft SQL Server. Можно также  определять разрешения для созданных или уже имеющихся в реестре базы данных  учетных записей. Однако для этого необходимо создать продолжительное  соединение, где учетная запись должна иметь все разрешения, присущие  администратору. Все методы представлены объектом класса FdoUserManager. Создать объект этого класса можно методом FroUserManager.Create.</p>
        <h3>Совместимость методов реестра учетных записей</h3>
        <p>Совместимость методов  реестра учетных записей не отражена непосредственно через APIпровайдеров данных. Поэтому информация о  совместимости методов реестра учетных записей не может быть предоставлена  соответствующим методом FdoIConnection.GetCommandCapabilities. Однако можно использовать свойства FdoUserManager.SupportsDatastoreGrants и FdoUserManager.SupportsWindowsAuthentification, чтобы  проконтролировать выполнение методов данного класса. Определение типа  провайдера данных неформально указывает на то, можно ли выполнить тот или иной  метод данного класса.</p>
        <h3>Особенности при использовании методов источников данных</h3>
        <p>Среди всех  провайдеров данных только несколько из них могут осуществлять операции  создания, уничтожения источников данных а также получения список всех  источников данных. К таким можно  отнести три провайдера данных на основанных на технологии RDBMS: Oracle, MySQL Server, а также Microsoft SQL Server, и один провайдер  данных, основанный на файловой технологии SDF(Spatial Data File). Используйте метод FdoICommandCapabilities, чтобы определить возможность  оперирования методами провайдеров данных.</p>
        <h4>Oracle, MySQL Server и Microsoft SQL  Server</h4>
        <p>Выполните следующую  последовательность действий, чтобы создать или уничтожить источник данных:</p>
        <ol>
          <li>Создайте  продолжительное соединение к источнику данных под учетной записью  администратора.</li>
          <li>Создайте источник  данных посредством выполнения метода FdoICreateDataStore, или уничтожьте его  выполнением FdoIDestroyDataStore.</li>
          <li>Определите свойства  соединения.</li>
          <li>Определите список  наименований свойств соединения, прежде чем устанавливать определенные значения  перечисленным свойствам.</li>
          <li>Синхронизируйте  объект соединения методом Execute.</li>
          <li>Чтобы проверить  результат действий выполните метод FdoIListDataStores текущего объекта  класса соединения. Выполните метод Execute, и теперь можно  получить список всех источников данных текущего соединения в соответствующем  значении списка свойств соединения. Этот список включает все доступные  источники данных по умолчанию. При использовании метода FdoICreateDataStore по умолчанию можно не указывать список  источников данных, чтобы не создавать их.</li>
        </ol>
        <h4>SDF</h4>
        <p>          Выполните следующую  последовательность действий, чтобы создать или уничтожить источник данных:</p>
        <ol>
          <li>Создайте источник  данных посредством выполнения метода FdoICreateDataStore, чтобы создать  источник данных SDF,  или уничтожьте его выполнением FdoIDestroyDataStore. Выполнение этих  методов доступно даже при закрытом соединении.</li>
          <li>Чтобы проверить  результат действий проверьте список файлов в каталоге, что был указан в  соединении. Так как провайдер данных SDF не поддерживает метод FdoIListDataStores.</li>
        </ol>
        <h3>Особенности использования методов источников  пространственных содержаний</h3>
        <p>Пространственное  содержание (spatial context) определяется  свойством, которое необходимо при создании соединения с источником данных, а  затем упрощает работу с геометрическими данными. Следующие методы  непосредственно определены в объектах класса соединения: FdoIActivateSpatialContext, FdoICreateSpatialContext, FdoIDestroySpatialContext, FdoIGetSpatialContexts и оперируют объектами  пространственного содержания. Соединение с источником данных должно быть  открыто в момент выполнения данных методов. Все указанные провайдеры данных  поддерживают метод FdoIGetSpatialContexts. Перечисленные  провайдеры данных ArcSDE, Oracle, MySQL Server и Microsoft SQL Server поддерживают методы FdoICreateSpatialContext и FdoIDestroySpatialContext. А вот провайдер данных SDF поддерживает метод FdoICreateSpatialContext, но не поддерживает метод FdoIDestroySpatialContext.</p>
        <p><img src="/images/6.gif" alt="2" width="33" height="41" align="left" /><a name="06" id="025"></a><strong>Установка и конфигурация провайдеров данных FDO</strong></p>
        <h3>Установка FDO Provider for ArcSDE</h3>
        <h4> Установка  и конфигурация ArcSDE Client Software для Windows</h4>
        <p> Полная  функциональность провайдера данных для ArcSDE может быть обеспечена при условии, что  необходимые компоненты ArcSDE 9.3 SDK уже установлены и  готовы к работе. Если же они отсутствуют, то необходимо сначала их приобрести.  Подробную информацию по приобретению компонентов ArcSDE 9.3 SDK можно найти на сайте <u><a href="http://www.esri.com/software/arcgis/arcgisengine/how_to_buy.html">http://www.esri.com/software/arcgis/arcgisengine/how_to_buy.html</a></u>.  После приобретения компонентов следуйте инструкциям по их установке. После  установки убедитесь, что соответствующие библиотеки присутствуют в каталоге  установки ArcSDE 9.3 SDK:</p>
        <ol>
          <li>pe93.dll </li>
          <li>sde93.dll </li>
          <li>sg93.dll </li>
        </ol>
        <p>Перед тем, как  конфигурация компонентов ArcSDE 9.3 SDK завершена, необходимо установить ArcSDE Server, к которому будет обращаться ArcSDE Client. Проверено, что ArcSDE Server и ArcSDE Client не обязательно должны иметь одну и ту же  версию. Например, версии 9.0 и 9.1 совместимы между собой, также как и версии  9.0 и 9.3.</p>
        <p>Несмотря на то, что  соединение ArcSDE Client напрямую создает  соединения с Oracle или Microsoft SQL Server, FDO Provider for ArcSDE не гарантирует  прямого соединения с Oracle или Microsoft SQL Server, минуя ArcSDE Server.</p>
        <p>ArcSDE Server обеспечивает соединение только с источниками  данных, которые основаны на технологии RDBMS, поэтому может создавать прямые соединения с Oracle и Microsoft SQL Server, например ArcSDE Server for Oracle может создавать и  поддерживать соединения с источниками данных Oracle, а ArcSDE Server for SQL Server поддерживает соединения с Microsoft SQL Server. Необходимо учесть,  что при установке ArcSDE Server, нужно настроить  параметры порта приема и передачи данных, которые необходимо указывать при  создании соединения с источником данных. ArcSDE Server использует эти  настройки, чтобы определить количество портов для приема и передачи сообщений,  а также установки определенного протокола для опроса серверов данных. FDO Provider for ArcSDE API построен таким образом, чтобы параметры  порта для приема и передачи данных, можно было указывать непосредственно в  строке соединения.</p>
        <p>Также необходимо  создать определенную группу пользователей для каждой базы данных, к которой  будут создаваться соединения, использующие учетные записи этой группы  пользователей. Для этого необходимо создать соединение с базой данных,  используя учетную запись администратора, что имеет право создавать или удалять  группу пользователей.</p>
        <h4>Установка  и конфигурация ArcSDE Client Software для Linux</h4>
        <p>Полная функциональность провайдера данных для ArcSDE может быть обеспечена при условии, что необходимые компоненты ArcSDE 9.3 SDK уже  установлены и готовы к работе. Если же они  отсутствуют, то необходимо сначала их приобрести. Подробную информацию по  приобретению компонентов ArcSDE 9.3 SDK можно найти на сайте <u><a href="http://www.esri.com/software/arcgis/arcgisengine/how_to_buy.html">http://www.esri.com/software/arcgis/arcgisengine/how_to_buy.html</a></u>.  После приобретения компонентов следуйте инструкциям по их установке. После  установки убедитесь, что соответствующие библиотеки присутствуют в каталоге  установки ArcSDE 9.3 SDK и зарегистрированы в  реестре LD_LIBRARY_PATH:</p>
        <ol>
          <li>libpe93.so </li>
          <li>libsde93.so </li>
          <li>libsg93.so </li>
        </ol>
        <p>Конфигурация  установленных компонентов в целом такая же, как и для Windows,  за исключением того, что установка библиотек производится в каталог для служб и  сервисов.</p>
        <h3>Установка FDO Provider for MySQL Server </h3>
        <p>Полная  функциональность провайдера данных будет обеспечена при установленном  программном обеспечении MySQL Server Database 5.0, если у вас не  установлен ни один из компонентов, то рекомендуется найти и скачать их на сайте <a href="http://dev.mysql.com/downloads/mysql/5.0.html">http://dev.mysql.com/downloads/mysql/5.0.html</a>, затем необходимо выполнить установку  в стандартный каталог <em>С:\</em><em>Program</em><em>Files</em><em>\</em><em>MySQL</em><em>\</em><em>MySQL</em><em>Server</em><em> 5.0</em>.</p>
        <p>После установки MySQL Server Database необходимо выполнить  его конфигурацию вручную. Во время установки многие параметры принимают  значения по умолчанию, достаточно нажимать кнопку «Далее» во время установки.  Если возникнет необходимость изменить конфигурации компонентов, то необходимо  запустить MySQL Server Instance Configuration Wizard.</p>
        <p>Конфигурация  компонентов MySQL Server Database предлагает множество параметров по  умолчанию. Но  изменять необходимо только те параметры конфигурации, которые <strong>не перечисляются  ниже</strong>, так как эти параметры MySQL Server может настроить самостоятельно:</p>
        <p>Детальная  конфигурация.</p>
        <ol><ul><li>Установка  многофункциональная база данных.</li>
          <li>Конфигурация InnoDB Tablespace  Settings.</li>
          <li>Установка DSS или OLAPA.</li>
          <li>Установка TCP/IP протоколов  связи (используя порт 3306).</li>
          <li>Установка Strict Mode.</li>
          <li>Установка UTF-8 Encoding в качестве  стандартного декодирования данных.</li>
          <li>Установка  наименования сервиса для Windows (например, Service  Name = MySQL)</li>
          <li>Конфигурация SecuritySettings для изменения параметров безопасности базы  данных.</li>
        </ul>
		        </ol>

        <p>После установки  необходимо убедиться, что в каталоге, куда был установлен MySQL Server Database, присутствует  каталог <em>\</em><em>bin</em>. Каталог должен в  себе содержать файл <em>libmysql</em><em>.</em><em>dll</em>, что, по сути,  является провайдером данных для MySQLServer.</p>
        <p>Конфигурация  компонентов MySQL Server Database сохраняется в файле, который должен быть  расположен в <em>C</em><em>:\</em><em>Program</em><em>Files</em><em>\</em><em>MySQL</em><em>\</em><em>MySQL</em><em>Server</em><em> 5.0\</em><em>my</em><em>.</em><em>ini</em>. Этот файл будет  использован сервисами MySQL Server во время запуска.</p>
        <h4>Установка и конфигурация MySQL Client Software для Linux</h4>
        <p>Полная  функциональность провайдера данных будет обеспечена при установленном  программном обеспечении MySQL Server Database 5.0, если у вас не  установлен ни один из компонентов, то рекомендуется найти и скачать его на  сайте <a href="http://dev.mysql.com/downloads/mysql/5.0.html">http://dev.mysql.com/downloads/mysql/5.0.html</a> в формате архивного файла (zipped tarfile).  Затем следуйте инструкциям по установке, расположенным на этом же сайте <a href="http://dev.mysql.com/doc/refman/5.0/en/index.html">http://dev.mysql.com/doc/refman/5.0/en/index.html</a>. Затем выберите  пункт 2. Installing and Upgrading MySQL, в предложенном списке выберите пункт 2.8. Installing MySQL on Other Unix-Like Systems.</p>
        <p>Конфигурация  компонентов провайдера данных заключается в непосредственной настройке всех  сервисов MySQL Server Database, а также установки паролей для двух  созданных учетных записей по умолчанию.</p>
        <p>Настройка сервисов MySQL Server Database описана в  документации на сайте <a href="http://dev.mysql.com/doc/refman/5.0/en/index.html">http://dev.mysql.com/doc/refman/5.0/en/index.html</a>, в разделе 2. Выберите пункт 2. Installing and  Upgrading MySQL, в предложенном списке выберите пункт 2.10.2 Unix  Post-Installation Procedures. Затем перейдите в конец статьи «…If you install MySQL from a source distribution, or using a binary  distribution format, that does not install MySQL Server automatically, you can  install it manually», и найдите строку shell&gt; chkconfig –-add mysql.</p>
        <p>Настройка учетных  записей описана в том же разделе 2. Выберите пункт 2. Installing and Upgrading MySQL,  а затем предложенном списке выберите пункт 2.10.3 Securing the Initial MySQL Accounts. Следуйте указаниям, описанным в данном  разделе для установки паролей для двух созданных по умолчанию учетных записей.</p>
        <h3>Установка FDO Provider for ODBC</h3>
        <p>Сначала необходимо  установить UnixODBC Driver Manager, а затем установить и настроить компоненты ODBC. По умолчанию  поддерживается только провайдер для EasySoft ODBC Oracle.</p>
        <h4>Установка и конфигурация ODBC для Linux</h4>
        <p>Установите UnixODBC Driver Manager, который можно найти  и скачать на сайте <a href="http://www.unixodbc.org/">http://www.unixODBC.org</a>. Для  примера:</p>
        <p>Скачиваем архивный  файл <em>unixODBC</em><em>-2.2.11.</em><em>tar</em><em>.</em><em>gz</em>, а затем распаковываем его в каталог <em>\</em><em>unixODBC</em><em>-2.2.11\</em>, и, наконец, в каталоге <em>\</em><em>unixODBC</em><em>-2.2.11\</em> выполняем следующую  последовательность команд:</p>
        <pre>./configure –-prefix=/usr/local/unixODBC
make
make install &lt;текущий каталог&gt;</pre>
        <p>В данной статье были рассмотрены только основные принципы установки и  работы с FDO. Следующие статьи будут посвящены примерам  использования FDO для решения разнообразных задач и создания  прикладных программ для ГИС, куда также будет включен и исходный код на Microsoft C#.NET и Microsoft Visual Basic.NET.</p>
        <p align="right">        E-mail: <a href="mailto:thinkingaboutgis@yahoo.com">thinkingaboutgis@yahoo.com</a></p>
        <p>&nbsp;</p>
        <p class="discuss">
		   <span><!--#include virtual="/scripts/forum-comments-num.php?i=2869"--></span>
		</p>
            <div class="links">
				<h2>Ссылки по теме</h2>
				<ul>
					<li></li>
					</ul>
			</div>
<!--Contents end-->
<!--#include virtual="/scripts/date.php" -->
<p class="status"><span>Дата создания: 19.02.2009
<br>Автор(ы): <a href="/forum/memberlist.php?mode=viewprofile&u=7035" target="_blank">Евгений Челядинов</a></span></p>
<!--#include virtual="/inc/footer2.php" -->
