<!--#include virtual="/inc/header02.txt" -->
<title>GIS-Lab: Привязка векторных данных находящихся в неизвестной или файловой системе координат</title>
<!--#include virtual="/inc/header2.txt" -->
<!--Contents start-->
<div class="cont">
<div class="col1">

<ul class="path">
   <li class="first"><a href="/">Главная</a></li>
   <li><a href="/qa.html">Вопросы и ответы</a></li>
</ul>
<h1>Привязка векторных данных находящихся в неизвестной или файловой системе координат </h1>
<p class="ann">Решение задачи с которой часто приходится сталкиваться при работе с непривязанными векторными данными.</p>
<p class="discuss discuss_top"><span><!--#include virtual="/scripts/forum-comments-num.php?i=1473"--></span></p>
<p>На заре ГИС, пользователи (особенно начинающие) мало внимания внимания уделяли присваиванию системы координат создаваемым данным. Зачастую, отсканированные материалы, минуя процесс географической привязки сразу отправлялись на оцифровку, такое явление нередко и в наши дни и является типичной ошибкой начинающих пользователей. Результатом такого подхода обычно являются данные, не имеющие географической системы координат, которые, соответственно, невозможно наложить на другие - привязанные данные, трансформировать в другую систему координат, производить по ним вычисления длин, углов, координат объектов и т.д.</p>
            <p>В качестве локальной системы координат, в принципе, может выступать любая неизвестная вам СК. То есть если Вы получили набор данных, который, как заведомо известно, находится в определенной географической или прямоугольной СК, но определить ее Вам не удалось, можно рассматривать эти данные как данные в локальной СК и трансформировать их в нужную вам систему используя подход описанный ниже. </p>
            <p>Работа по повторной оцифровке данных, как правило, занимает больше времени чем трансформация полученных данных из локальной (файловой) системы координат, поэтому информация как изменить СК данных с локальной на географическую рано или поздно может сэкономить некоторое время. Однако, следует отметить, что, по возможности, следует все же следовать пути: </p>
            <p align="center"> Непривязанный растр -&gt; Привязанный растр -&gt; Вектор</p>
            <p> поскольку можно возникнуть необходимость что-либо доцифровать или использовать сам растр в качестве подложки, поэтому иметь привязанный растр всегда полезно.</p>
            <p>Принцип привязки векторных данных в локальной системе координат ничем не отличается от привязки растровых. Поэтому, в принципе, имея набор точек привязки (тиков) использованных для привязки векторного набора данных, можно, используя его, привязать и растровый материал, использованный для получения этих векторных данных. </p>
            <p>Независимо от ПО, исходной и конечной системы координат, для привязки имеющегося набора данных (как и вообще для привязки любых данных) понадобится источник координат: точки GPS или уже привязанный материал (растровый, векторный). </p>
            <p>Принцип работы:</p>
            <ol>
              <li>Загрузить привязываемый набор данных и набор данных к которому будет осуществляться привязка;</li>
              <li>Расставить точки привязки (в терминологии ArcGIS: displacement links), <strong> ОТ</strong> непривязанного <strong>К</strong> привязываемому набору данных;</li>
              <li>Выбрать модель трансформации (аффиная, полиномиальная и т.д.) в зависимости от количества расставленных точек привязки;</li>
              <li>Запустить процесс трансформации, который создаст новый набор данных или изменит существующий;</li>
              <li>Проверить качество привязки, т.е. соответствие только что привязанного набора данных тому набору данных, который использовался в качестве источника правильных координат. </li>
            </ol>
            <p>В зависимости от ПО, данная задача решается несколько по разному:</p>
            <p><img src="/images/1.gif" alt="1" width="33" height="41" align="left" /> <strong>Arcview GIS</strong></p>
            <p>При работе в Arcview GIS, для выполнения операции трансформации необходимо воспользоваться бесплатным расширением <a href="http://arcscripts.esri.com/details.asp?dbid=10088" target="_blank" class="external">Shapewarp</a>. (<a href="shapewarp-av.html">подробное описание работы с ним</a>) </p>
            <p><img src="/images/2.gif" alt="1" width="33" height="41" align="left" /> <strong>ArcGIS</strong></p>
            <p>В ArcGIS выполнить эту операцию несколько легче, с точки зрения удобства интерфейса, но принцип работы остается таким же. </p>
            <p>Для трансформации используется панель Spatial Adjustment (View\Toolbars\Spatial Adjustment). Для начала работы необходимо загрузить трансформируемый набор данных и начать его редактирование (Editor\Start editing). Далее следует следовать общему принципу работы. </p>
            <p align="center"><img src="/images/shapewarp-01.gif" alt="панель Spatial Adjustment" width="405" height="225" /></p>
            <p>Внимание, перед выполнением данной операции настоятельно рекомендуется сделать запасную копию данных.</p>
            <ol>
              <li>Открыть ArcGIS</li>
              <li>Загрузить привязываемый набор данных</li>
              <li>Включить панели Editor и Spatial Adjustment</li>
              <li>Начать редактирование привязываемого набора данных, Editor\Start Editing</li>
              <li>Указать трансформируемый набор данных, выбрать трансформацию всех объектов, Spatial adjustment\Set adjust data, All features in these layers.</li>
              <li>Загрузить данные к которым осуществляется привязка (если привязка осуществляется по набору известных координат, то можно этот этап пропустить или создать из этого набора точечный shape-файл)</li>
              <li>Используя инструменты Displacement links и Modify displacement links расставить векторы привязки (внивание: ОТ привязываемого материала - К привязанному). Если привязка осуществляется к набору координат, т.е. второй - привязанной темы нет, то вектора привязки надо расставить таким образом, чтобы их начало стояло в точке на привязываемой карте, конец вектора может быть в любом месте, на следующем шаге он будет изменен.</li>
              <li>Если вы привязываете к некой уже привязанной теме, то этот шаг можно пропустить. Если привязка осуществлялась к набору координат, то далее нужно открыть таблицу векторов привязки и в полях X и Y destination указать правильные координаты для каждой точки (X - долгота, Y - широта). Координаты вводятся в формате dd.ddddddd (десятичные градусы). Если ваши координаты в отличном от этого формате, <a href="/qa/dms2dd.html">необходимо их пересчитать</a>.  </li>
              <li>Выбрать метод трансформации, выбор метода зависит от количества векторов привязки, которые вы расставили.</li>
              <li>После этого на панели Spatial Adjustment станет доступной опция Adjust, которую и надо выбрать. В результате этой операции привязываемый векторный набор данных должен визуально измениться.</li>
              <li>Теперь нужно либо сохранить внесенные изменения, либо, чтобы более дальновидно, сохранить их под новым именем. Для этого нужно правой кнопкой мыши выбрать привязываемую тему (темы)  и выбрать Data\Data export. Соответственно, сохранять изменения в исходной теме не нужно.  </li>
              <li>Критический момент данной операции - проверка качества привязки, здесь может пригодиться любой shape-файл на ту же территорию, про который заранее известно, что он правильно привязан. Если вы еще не сконвертировали набор координат в точечный shape-файл, <a href="/qa/txt2points-ag.html">то стоит это сделать</a> сейчас, чтобы можно было, наложив точки, к которым осуществлялась привязка можно было оценить насколько она удалась, т.е. точки которые расставлялись в процессе соответствуют точкам с известными координатами. </li>
            </ol>
            <p class="discuss">
				<span><!--#include virtual="/scripts/forum-comments-num.php?i=1473"--></span>
			</p>
			<div class="links">
			<h2>Ссылки по теме</h2>
			<ul>
               <li><a href="/qa/georef-ag.html">Координатная привязка карты в ArcMap</a></li>
			</ul>
			</div>
<!--Contents end-->
<!--#include virtual="/scripts/date.php" -->
<p class="status"><span>Дата создания: 15.04.2007
<br>Автор(ы): <a href="/forum/memberlist.php?mode=viewprofile&u=2" target="_blank">Максим Дубинин</a></span></p>
<!--#include virtual="/inc/footer2.php" -->