<!--#include virtual="/inc/header02.txt" -->
<title>GIS-Lab: Нахождение точки пересечения двух линий по углам и двум известным точкам (биангуляция)</title>
<!--#include virtual="/inc/header2.txt" -->
<div class="cont">
  <div class="col1">

<ul class="path">
   <li class="first"><a href="/">Главная</a></li>
   <li><a href="/qa.html">Вопросы и ответы</a></li>
</ul>
<!--Contents start-->
<h1>Нахождение точки пересечения двух линий по углам и двум известным точкам (биангуляция)</h1>
<p class="ann">Немного простейшей геометрии для решения задачи биангуляции. Применение в орнитологии.</p>
<p class="discuss discuss_top"><span><!--#include virtual="/scripts/forum-comments-num.php?i=189"--></span></p>
<h3>Задача</h3>
<p>Найти точку пересечения двух прямых отложенных
  от двух точек с известными координатами и азимутов от этих точек.</p>
<p><img src="/images/biangulation-01.gif" width="661" height="441" /></p>
<h3>Применение</h3>
<p>Для изучения поведения животных часто используют радиотелеметрический метод: исследуемый объект помечается радиопередатчиком, который испускает радиосигнал определенной частоты и далее исследователь при помощи приемника и принимающей антенны следит за перемещениями этого объекта. Одним из возможных способов определения точного местоположения объекта является метод биангуляции. Для этого исследователю требуется взять 2 азимута на исследуемый объект с точек с известными координатами. Местоположение объекта будет соответствовать точке пересечения этих двух азимутов. Координаты точек, с которых засекаются азимуты можно снять с помощью спутникового навигатора (GPS), либо азимуты снимаются с реперных точек, координаты которых известны заранее. Азимут в этом случае – направление на источник наиболее сильного сигнала, исходящего от меченного передатчиком объекта, измеряемое обычно в градусах.</p>
            <p align="center"><img src="/images/biangulation-03.gif" alt="Радиотелеметрия на практике" width="300" height="299" /><img src="/images/biangulation-04.gif" alt="Полевой набор для радиотелеметрии" width="398" height="299" /></p>
            <p>Перед расчетами необходимо точки полученные с помощью GPS перевести в спроецированную систему координат, например соответствующую зону UTM, это можно сделать с помощью <a href="/qa/gps-dnrgarmin.html">DNRGarmin</a>. </p>
            <p>Для того чтобы рассчитанное местоположение исследуемого объекта наиболее точно соответствовало реальному положению нужно учитывать следующее: </p>
            <p>1) необходимо стараться дождаться  момента, чтобы ошибка определения координат в навигаторе была как можно меньше.</p>
            <p>2) чтобы угол между азимутами стремился к 90 градусам (по крайней мере, был больше 30 и меньше 150 градусов). </p>
            <p>Расстояние, с которого следует снимать азимут, зависит от дальности действия передатчика, при этом применяется эмпирическое правило, что погрешность в определении азимута увеличивается на 1 метр с удалением от исследуемого объекта на каждые 10 м. Т.о. при снятии азимута с расстоянием до объекта 100 м погрешность составит 10 м. Однако, это правило применимо на ровной открытой местности. Следует учитывать, что неровности рельефа и древесно-кустарниковая растительность экранируют и отражают сигнал. Следует избегать нахождения в непосредственной близости от исследуемого объекта, т.к. во-первых, слишком сильный сигнал затруднит определение точного азимута, а, во-вторых, в некоторых случаях будет невозможно рассчитать точку пересечения из-за того, что второй азимут будет проходить за точкой снятия первого азимута. Временной интервал между снятием пары азимутов должен быть минимизирован, но, конечно, зависит от подвижности исследуемого животного.</p>
            <h3>Решение</h3>
            <p>Задача решается с помощью простейшей геометрии и решения
              системы уравнений.<br />
              Для начала из точки и азимута получаем уравнение прямой, для этого:</p>
            <p>Из уравнения общего вида:</p>
            <p><i><b>ax + by + c = 0</b></i></p>
            <p>при условии, что b&lt;&gt;0 получаем</p>
            <p><i><b>y = kx + d</b></i>, где <i><b>k=-(a/b)</b></i>, <i> <b>d=-(c/b)</b></i></p>
            <p>таким образом, получаем</p>
            <p><b><i>k=tan(a)<br />
              d=y-tan(a)*x<br />
              b=1</i></b></p>
            <p>Далее решив систему уравнений:</p>
            <p><b><i>k1x + d1 = y<br />
              k2x + d2 = y</i></b><br />
              <br />
              Получаем координаты X и Y общей точки двух прямых (точки пересечения).</p>
            <p>В уравнении необходимо предусмотреть два особых случая,
              когда прямые параллельны (k1=k2). </p>
            <p>Так как мы имеем дело не с векторами и не с лучами, то есть у линий нет начала и конца, то так же необходимо предусмотреть случай пересечения прямых вне области интереса, т.н. ложное пересечение. Решение этой задачи достигается измерением азимута из ложной точки a3 на точку 2, если азимут a3 = a2, то пересечение ложное, обратный азимут от полученной точки обратно на исходные 2 не должен быть равен одному из исходных азимутов. </p>
            <p><img src="/images/biangulation-05.gif" width="694" height="552" /> </p>
            <p>Необходимая процедура на языке Avenue выглядит так:</p>
            <pre><b> a1rad = (90-a1)*pi/180<br /> a2rad = (90-a2)*pi/180</b>
'в случае если линия параллельна оси абсцисс<br /><b> if ((a1 = 0) or (a1 = 180)) then<br />    l1a = 1<br />    l1b = 0<br />    l1c = x1<br /> else<br />    l1a = -(a1rad.tan)<br />    l1b = 1<br />    l1c = y1 - (a1rad.tan*x1)<br /> end<br /> if ((a2 = 0) or (a2 = 180)) then<br />    l2a = 1<br />    l2b = 0<br />    l2c = x2<br />else<br />    l2a = -(a2rad.tan)<br />    l2b = 1<br />    l2c = y2 - (a2rad.tan*x2)<br />end<br />D1 = l1a*l2b<br>D2 = l2a*l1b<br>D3 = D1 - D2<br></b>'Если линии параллельны, в поле результата записываются несуществующие значения<b><br />if (D3 = 0) then<br />    resX = 9999<br />    resY = 9999<br />else
    resX = ((l1c*l2b) - (l2c*l1b))/D3<br>    resY = ((l1a*l2c) - (l2a*l1c))/D3
end</b></pre>
            <p>Здесь находится <a href="/programs/avenue/biangulation.zip">расширение для Arcview GIS</a> для расчета точек пересечения двух прямых,
              включая проверку ложных пересечений. </p>
            <p>В качестве исходных данных для работы используется точечная тема Arcview
              (в формате shape или заданная как <b>Event theme</b> таблица). Тема
              должна быть выделена (активна). Пары исходных координат (засечек) в таблице
              должны располагаться друг за другом. </p>
            <p>Названия полей должны быть следующими:<br />
              <b>X</b> - долгота<br />
              <b>Y</b> - широта<br />
              <b>Bear</b> - азимут (угол от оси Y по часовой стрелке) <br />
              (скрипт легко модифицируется если у вас другие названия полей).</p>
            <p>В названиях полей не должно содержаться символа <b>#</b>.
              Такие поля следует переименовать. Покрытия Arcinfo некоторые поля
              которых как правило содержат такой символ нужно сконвертировать
              в shape-файл и также переименовать поля, убрав #.</p>
            <p>Результатом работы скрипта является shape-файл в атрибутивной
              таблице которого будут находится расчетные координаты точки пересечения
              для каждой пары засечек. Полей в исходной таблице может быть больше
              чем 3 (x, y, bear), дополнительные поля перенесутся в результирующую
              тему. Они будут заполнятся значениями из первой точки пары из исходной
              таблицы.</p>
			<div class="links">
			<h2>Ссылки по теме</h2>
			<ul>
               <li><a href="http://www.college.ru/mathematics/courses/planimetry/content/chapter10/section/paragraph4/theory.html" target="_blank" class="external">Уравнение прямой</a></li>
			   <li><a href="http://perm.psu.ru/school136/samos_m2.htm" target="_blank" class="external">Решение линейных систем уравнений (систем уравнений 1-й степени) 
                    с двумя неизвестными</a></li>
			   <li><a href="/qa/cep.html">Вычисление радиуса окружности ошибки для оценки точности GPS-измерений</a></li>
			   <li><a href="/qa/smooth-locerror.html">Усреднение данных о перемещении с учетом ошибки локации</a></li>
			   <li><a href="/qa/mcp-locerror.html">Построение минимального конвексного полигона с учетом ошибки локации</a></li>
			</ul>
			</div>
<!--Contents end-->
<!--#include virtual="/scripts/date.php" -->
<p class="status"><span>Дата создания: 04.07.2006
<br>Автор(ы): <a href="/forum/memberlist.php?mode=viewprofile&u=2" target="_blank">Максим Дубинин</a></span></p>
<!--#include virtual="/inc/footer2.php" -->
