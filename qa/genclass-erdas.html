<!--#include virtual="/inc/header02.txt" -->
<title>GIS-Lab: Методологический аппарат ERDAS IMAGINE для классификации изображений (выдержки)</title>
<!--#include virtual="/inc/header2.txt" -->
<div class="cont">
<div class="col1">

<ul class="path">
   <li class="first"><a href="/">Главная</a></li>
   <li><a href="/qa.html">Вопросы и ответы</a></li>
</ul>
<!--Contents start-->
<h1>Методологический аппарат ERDAS IMAGINE для классификации изображений (выдержки) </h1>
<p class="ann">Черновой перевод соответствующей главы из Tour guide</p>
<p class="discuss discuss_top"><span><!--#include virtual="/scripts/forum-comments-num.php?i=186"--></span></p>
<p><b>Классификация</b> - процесс сортировки (распределения
              по классам) элементов изображения (пикселов) на конечное число классов
              на основе значений их атрибутов (DN - digital numbers). Если пиксел
              удовлетворяет некому условию классификации, он относится к определенному
              классу, который соответствует этому условию.</p>
            <p><b>Статья очень сырая, представляет
              из себя выдержки из ERDAS Manual, многие вещи
              не до конца понятны и поэтому возможно плохо объяснены или вообще
              пропущены, будем рады если кто-то возьмется исправить.</b></p>
            <p><b>1. Классификация без обучения (Unsupervised classification)</b></p>
            <p><b>ISODATA </b>(Итерационная самоорганизующаяся методика
              анализа данных - <b>I</b>terative <b>S</b>elf-<b>O</b>rganizing <b>D</b>ata <b>A</b>nalysis <b>T</b>echnique)</p>
            <p>Алгоритм использующийся для классификации без обучения
              (безэталонной классификации) - базируется на кластерном анализе.
              Для формирования кластеров используется формула минимального спектрального
              расстояния.<br />
              Кластеризация начинается с произвольно заданных значений (средних)
              или средних значения взятых из существующих сигнатур. После отнесения
              всех возможных пикселов к одному из классов, центры классов сдвигаются
              и процесс повторяется полностью сначала (следующая итерация).<br />
              Процесс продолжается до тех пор пока не будет достигнуто максимальное
              количество итераций или достигнут максимальный процент пикселов
              не изменивших свой класс (предел сходимости - convergence threshold).
              Например если ПС=0,95, это значит, что процесс кластеризации закончится
              как только количество пикселов не поменявших свой класс между итерациями
              достигнет 95%. Другими словами если только 5% или меньше пикселов
              поменяют свой класс процесс классификации закончится (центры классов
              будут установлены равным тем, которые участвовали в кластеризации
              на последней итерации).</p>
            <p>Иннициирующие (начальные) центры классов могут рассчитываться
              несколькими путями:<br />
              1. Путем вычисления заданного количества средних значений (кол-ва
              классов) по всему изображению вдоль диагонали (diagonal axis), распределение
              центров классов равномерное;<br />
              2. Путем вычисления заданного количества средних значений (кол-ва
              классов) по растру рассчитанному по методу главных компонент (PCA).<br />
            </p>
            <p>Распределение центров классов по главным осям также
              может быть рассчитываться по разному:<br />
              1. По методу стандартных отклонений (Std. deviations), чем большее
              количество стандартных отклонений задается, тем большее количество
              классов может попасть в &quot;хвост&quot; распределения (при (=1
              большее количество классов попадет в основную массу пикселов);<br />
              2. Автоматически, в зависимости от количества классов, на основе
              предположения, что данные распределены нормально (Гауссово-распределение).<br />
              <br />
              <b>Классификация с обучением (Supervised classification)</b><br />
              Классификация осуществляемая с помощью обучения по некоторым эталонам
              с созданием для каждого из них соответствующей сигнатуры, которые
              в дальнейшем и используются для определения центров классов.</p>
            <p>Правила классификации, как и сами сигнатуры могут
              быть параметрические и непараметрические.</p>
            <p>Параметрические правила:</p>
            <ul>
              <li>максимальное подобие</li>
              <li>расстояние Махаланобиса</li>
              <li>минимальное расстояние</li>
            </ul>
            <p>Непараметрические правила:</p>
            <ul>
              <li>пространство признака (Feature space)</li>
              <li>правило параллелепипеда</li>
            </ul>
            <p>В процессе классификации могут быть также рассчитаны
              статистические параметры (на основе только сигнатуры, а не целого
              изображения), которые затем будут включены в результирующий тематический
              растр.</p>
            <p>Также в процессе классификации может создаваться файл
              расстояний (distance file) который в последствии может использоваться
              утилитой Пороговое значение (Threshold)<br />
            </p>
            <p><b>Редактор сигнатур (Signature editor)</b></p>
            <p>Набор инструментов служащих для создания и манипуляций
              с сигнатурами.</p>
            <p>Сигнатура (эталон) - область с заданным классом, использующаяся
              для дальнейшей классификации с обучением по этому/этим эталонам.</p>
            <p>Добавить эталоны можно несколькими способами:<br />
              1. Инструмент AOI-point, polygon <br />
              2. Инструмент AOI-region grow<br />
              3. Выбор из пространства признака (Feature space) связанного с классифицируемым
              изображением (link), пространство признака строится по 2-м осям
              (каналам изображения). По одной оси откладывается значение пиксела
              от 0 до 255 одного канала (X), по другой значение пиксела от 0 до
              255 другого канала (Y). При распределении близком к нормальному,
              форма графика - эллипс (<b>Feature\Create\Feature space layers</b>). </p>
            <p>Сигнатуры могут быть параметрическими и непараметрическими.</p>
            <p>Сигнатуры выбираемые из пространства признака являются
              непараметрическими и требуют расчета статистики (<b>Feature statistics</b>),
              после чего они становятся параметрическими.<br />
              Параметрические сигнатуры основываются на статистических параметрах
              выборки-эталона (например среднем значении или матрице сходимости
              - covariance matrix). Набор параметрических сигнатур можно использовать
              для классификации одним из статистических алгоритмов, например максимального
              подобия (maximum likelihood).</p>
            <p>Непараметрические сигнатуры основываются не на статистических
              параметрах, а на дискретных объектах, полигонах, прямоугольниках
              в пространстве признака (Feature space). Эти объекты используются
              для определения границ классов. Непараметрический алгоритм классификации
              использует набор таких сигнатур для того чтобы назначить пикселу
              класс основываясь на положении значения этого пиксела либо внутри
              либо снаружи одного из непараметрических классов в пространстве
              признака. Непараметрические сигнатуры могут создаваться в процессе
              классификации с обучением.</p>
            <p>Между непараметрическими и параметрическими сигнатурами
              возможен переход, для этого для непараметрической сигнатуры рассчитывается
              статистика.<br />
              В процессе классификации могут использоваться оба типа сигнатур.<br />
            </p>
            <p><b>Проверка сигнатур (evaluation)</b></p>
            <p>Сушествует несколько способов проверки сигнатур, некоторые
              из них применимы только к одному из типов (только к параметрическим
              или только к непараметрическим)</p>
            <p>1. Предупредительная проверка (Alarm) - выделение
              пикселов которые возможно будут отнесены к классу определенному
              сигнатурой(ами). Отнесение или неотнесение пиксела к классу определяется
              правилом параллелепипеда (Parallelepiped decision rule). <b>View\Image
              Alarm</b></p>
            <p>Правило параллелепипеда: Вектор, образующий диагональ
              параллелепипеда, равен сумме трёх векторов, исходящих из той же
              вершины и образующих его рёбра. </p>
            <p align="center"><img src="/images/parallel.gif" width="165" height="209" /></p>
            <p>Пределы параллелепипеда (limits) могут определяться
              вручную или автоматически, рассчитываясь как минимум-максимум для
              каждого слоя в конкретной сигнатуре или как определенное количество
              стандартных отклонений от среднего значения сигнатуры.<br />
              Значение каждого пиксела проверяется на попадание \ непопадание
              в пределы параллелепипеда заданные исходной сигнатурой или вручную.</p>
            <p>2. Матрица пересечений (Contingency Matrix) - метод
              проверки сигнатур созданных из AOI на основе изображения. Этот метод
              проверяет только значения пикселов в пределах существующих сигнатур,
              которые тоже могут быть неоднородны в силу различных причин. Результатом
              анализа является таблица содержащая N+1 столбцов (дополнительный
              суммирующий столбец) и N+1 рядов (дополнительный суммирующий ряд),
              N-количество выбранных для анализа сигнатур. <b>Evaluate\Contingency</b></p>
            <table width="75%" border="1">
              <tr bgcolor="#CCCCCC">
                <td bgcolor="#CCCCCC" width="22%"><p><b>Classified Data</b></p></td>
                <td width="29%"><p><b>agri1</b></p></td>
                <td width="14%"><p><b>agri2</b></p></td>
                <td width="16%"><p><b>forest</b></p></td>
                <td width="19%"><p><b>forest2</b></p></td>
              </tr>
              <tr>
                <td bgcolor="#CCCCCC" width="22%"><p><b>agri1</b></p></td>
                <td width="29%"><p>237</p></td>
                <td width="14%"><p>3</p></td>
                <td width="16%"><p>0</p></td>
                <td width="19%"><p>0</p></td>
              </tr>
              <tr>
                <td bgcolor="#CCCCCC" width="22%"><p><b>agri2</b></p></td>
                <td width="29%"><p>2</p></td>
                <td width="14%"><p>662</p></td>
                <td width="16%"><p>0</p></td>
                <td width="19%"><p>0</p></td>
              </tr>
              <tr>
                <td bgcolor="#CCCCCC" width="22%"><p><b>forest</b></p></td>
                <td width="29%"><p>0</p></td>
                <td width="14%"><p>0</p></td>
                <td width="16%"><p>450</p></td>
                <td width="19%"><p>55</p></td>
              </tr>
              <tr>
                <td bgcolor="#CCCCCC" width="22%"><p><b>forest2</b></p></td>
                <td width="29%"><p>0</p></td>
                <td width="14%"><p>0</p></td>
                <td width="16%"><p>50</p></td>
                <td width="19%"><p>445</p></td>
              </tr>
              <tr>
                <td bgcolor="#CCCCCC" width="22%"><p><b>Column Total</b></p></td>
                <td width="29%"><p>239</p></td>
                <td width="14%"><p>665</p></td>
                <td width="16%"><p>500</p></td>
                <td width="19%"><p>500</p></td>
              </tr>
            </table>
            <p>3. Создание маски из сигнатуры пространства признака
              - метод отображающий на изображении маску из сигнатуры полученной
              из графика пространства признака. В качестве входящей сигнатуры
              может использоваться только сигнатура непараметрическая полученная
              из пространства признака (Feature space). <b>Feature\Masking\Feature
              space to image</b></p>
            <p>4. Объекты сигнатур - метод представления сигнатур(ы)
              в пространстве признака, полезно использовать для визуального определения
              пересекающихся сигнатур. Если объекты в пространстве признаков пересекаются
              и пересекаются их сигнатуры, значит в этих сигнатурах есть одинаковые
              по значению пикселы. Сигнатуры в пространстве признаков могут представляться
              как точки, прямоугольники и эллипсы с определенным стандартным отклонением. <b>Feature\Objects</b></p>
            <p>5. Гистограммы - построение гистограммы по одной или
              более сигнатурам, по одному или более каналам. <b>View\Histogram</b></p>
            <p>6. Разделимость сигнатур - метод расчета статистической
              разницы между двумя сигнатурами, величина разницы показывает насколько
              одна сигнатура отдалена от другой. Этот метод может также использоваться
              для определения наиболее подходящих для классификации каналов. В
              процессе подсчета разделимости используется N комбинаций M каналов
              (M-количество каналов, N-соответствующее количество комбинаций:
              1 канал - 6 вариантов, 2-15, 3-20, 4-15, 5-6, 6-1). <b>Evaluate\Separability</b> </p>
            <p>Расстояние может рассчитываться по следующим формулам:<br />
              · Спектральное эвклидово расстояние между двумя средними значениями<br />
              · Расстояние Джефриса-Матцушиты<br />
              · Расхождение<br />
              · Трансформированное расхождение</p>
            <p>Результатом работы алгоритма является отчет в текстовой
              форме в котором указываются варианты каналов с лучшей средней и
              минимальной разделимостью.</p>
            <p align="center"><img src="/images/genclass-erdas.gif" width="488" height="117" /></p>
            <p>7. Проверка статистики - расчет статистики для выбранной
              сигнатуры. Рассчитываемые значения: минимум, максимум, среднее,
              стандартное отклонение отдельно по каналам, также рассчитывается
              ковариационная матрица NxN, где N - число каналов. <b>View\Statistics</b></p>
            <p><b>Оценка качества классификации (Evaluation)</b></p>
            <p>1. Задание прозрачности (classification overlay) -
              метод позволяющий отключить (сделать прозрачными) все классы кроме
              проверяемого и управлять его видимостью</p>
            <p>2. Пороговое значение (thresholding) - метод определяющий
              какие из пикселов были вероятнее всего, классифицированы неправильно,
              такие пикселы переносятся в класс &quot;неклассифицированные&quot;
              (unclassified), с тем чтобы в последствии подвергнутся дальнейшей
              обработке и классификации.<br />
              Метод основывается на обработке файл расстояний (distance file),
              получаемого в процессе классификации с обучением. Файл расстояний
              представляет собой копию классифицируемого изображения, но пикселы
              у него имеют значения указывающие расстояние от значения классифицируемого
              пиксела до среднего значения класса к которому он отнесен. Чем больше
              это расстояние, тем больше вероятность, что пиксел был классифицирован
              неправильно. </p>
            <p>Управлять пороговым значением можно численно, изменяя
              значение Хи-квадрат и интерактивно - устанавливая порог на гистограме.<br />
              Хи-квадрат - распределение в отличие от нормального (имеющего колоколообразную
              симметричную форму) имеет максимум в начале шкалы и плавно снижается.
              По форме распределения можно судить о качестве класса.</p>
            <p>Если методом классификации было &quot;минимальное
              расстояние&quot;, то значение пиксела в файле расстояний представляет
              собой Эвклидово спектральное расстояние между значением классифицируемого
              пиксела и средним класса к которому он отнесен. В этом случае в
              процессе задания порогового значения появляется возможность задать
              для каждого класса расстояние напрямую (distance threshold).</p>
            <p>Если методом классификации было &quot;расстояние Махаланобиса&quot;
              или &quot;максимальное подобие&quot;, то это значение равно расстоянию
              Махаланобиса. В этом случае в процессе задания порогового значения
              появляется возможность задать для каждого класса в процентном отношении
              количество неправильно классифицированных пикселов (confidence level).</p>
            <p>Метод позволяет определить пороговое значение для
              каждого класса, после которого пиксел будет считаться классифицированным
              неправильно.</p>
            <p>Расстояния в конкретном классе представляются гистограммой,
              по оси Х которой откладывается расстояние (от 0), а по оси Y - количество
              пикселов. Как правило, неправильно классифицированные пикселы располагаются
              в хвосте гистограммы.</p>
            <p>3. Перекодировка (recode, reclass)<br />
              4. Оценка точности (accuracy assessment)</p>
            <p class="discuss">
				<span><!--#include virtual="/scripts/forum-comments-num.php?i=186"--></span>
			</p>
<!--Contents end-->
<!--#include virtual="/scripts/date.php" -->
<p class="status"><span>Дата создания: 06.06.2002
<br>Автор(ы): <a href="/forum/memberlist.php?mode=viewprofile&u=2" target="_blank">Максим Дубинин</a></span></p>
<!--#include virtual="/inc/footer2.php" -->