<!--#include virtual="/inc/header02.txt" -->
<title>GIS-Lab: Растровые операции в QGIS с помощью GdalTools</title>
<!--#include virtual="/inc/header2.txt" -->
<div class="cont">
<div class="col1">

<ul class="path">
   <li class="first"><a href="/">Главная</a></li>
   <li><a href="/qa.html">Вопросы и ответы</a></li>
</ul>
<!--Contents start-->
<h1>Растровые операции в QGIS с помощью GdalTools</h1>
<p class="ann">Обзор расширения и его возможностей</p>
<p class="discuss discuss_top"><span><!--#include virtual="/scripts/forum-comments-num.php?i=5545"--></span></p>

<p>Gdal Tools (или Raster tools) это расширение для свободной ГИС QGIS. Основная цель расширения&nbsp;&mdash; упростить
работу с утилитами командной строки GDAL, путем предоставления пользователю графического интерфейса для наиболее
востребованных операций.</p>
<p>Изначально расширение разрабатывалось силами Faunalia, чуть позже к работе присоединился ГИС-Лаб. Иконки инструментов
создал Robert Szczepanek, некоторые этапы разработки спонсировались Silvio Grosso.</p>
<p>На момент первого анонса (сентябрь 2009 г.) расширение состояло всего из двух инструментов: gdalbuildvrt и
gdal_contour. Сейчас количество интегрированных инструментов приближается к 20.</p>
<p align="center"><img src="/images/gdaltools-03.gif" alt="Меню" width="243" height="438"></p>
<p><strong>Оглавление</strong></p>
<ol>
	  <li><a href="#01">Получение и установка</a></li>
	  <li><a href="#02">Основные возможности</a></li>
</ol>

<!-- Первый раздел -->
<h2><strong><a name="01" id="01"></a></strong>1. Получение и установка</h2>
<p>Расширение существует в двух версиях:
<ul>
  <li>стабильная  (v 1.2.0, на момент написания статьи)</li>
  <li>экспериментальная (потенциально нестабильная, но с новыми возможностями)</li>
</ul></p>
<p>Обе версии доступны из репозитория Faunalia. Для установки экспериментальной версии необходимо включить отображение
экспериментальных расширений в Установщике расширений, если этого не сделать будет установлена стабильная версия GdalTools.
Так как стабильная версия GDAL Tools включена в состав QGIS 1.5.0, пользователи этой версии могут не утруждать себя установкой,
но при желании или необходимости могут заменить ее на экспериментальную версию из репозитория.</p>
<p>Для установки расширения из репозитория необходимо выполнить следующие действия:
<ul>
  <li>открыть установщик расширений (&laquo;Модули-Загрузить модули&raquo;)</li>
  <li>перейти на вкладку &laquo;Репозитории&raquo; и добавить сторонние репозитории нажатием на кнопку &laquo;Добавить сторонние репозитории&raquo;</li>
  <li>перейти на вкладку &laquo;Параметры&raquo; и включить экспериментальные расширения (&laquo;Показывать все модули, включая помеченные как экспериментальные&raquo;)</li>
  <li>вернуться на вкладку &laquo;Модули&raquo;, найти в списке Gdal Tools</li>
  <li>выделить строку с модулем и нажать &laquo;Установить модуль&raquo;</li>
  <li>подождать, пока расширение скачается и установится</li>
  <li>по заросу перезапустить QGIS</li>
</ul></p>
<p>Для работы расширения необходимо наличие GDAL/OGR и соответствующих Python-байндингов. В случае использования установщика
OSGeo4W, нужные пакеты называются gdal16 и gdal16-python. При работе в среде Windows Vista/Seven возможно появление
сообщений об ошибках, способы решения проблем можно посмотреть на <a href="http://gis-lab.info/forum/viewtopic.php?f=35&t=5050">форуме ГИС-Лаб</a>
и в <a href="http://trac.osgeo.org/osgeo4w/ticket/161">багтрекере OSGeo4W</a>.</p>
<p>Пользователям MacOS X после установки расширения необходимо открыть настройки модуля и указать каталог с утилитами GDAL</p>
<p><img src="/images/gdaltools-01.png" alt="Настройка путей" width="407" height="317"></img></p>

<!-- Второй раздел -->
<h2><strong><a name="02" id="02"></a></strong>2. Принцип работы</h2>
<p>При вызове любого инструмента пользователю предоставляется возможность указать исходные данные (это может быть как
загруженный в QGIS слой, так и файл на диске) и настроить некоторые параметры инструмента.</p>
<p><img src="/images/gdaltools-02.png" alt="Настройка инструмента" width="433" height="571"></img></p>
<p>В нижней части окна отображается команда, выполняющая заданное действие. При желании ее можно скопировать и выполнить
непосредственно из командной строки. Это может быть полезно если надо использовать дополнительные опции, отсутствующие в
настройках инструмента.</p>

<h2><strong><a name="03" id="03"></a></strong>3. Доступные инструменты</h2>
<p>Сейчас в GdalTools присутствуют следующие инструменты:</p>
<ul>
  <li>Создать виртуальный растр (каталог)&nbsp;&mdash; построение «виртуального» растра (на базе gdalbuildvrt)</li>
  <li>Изолинии&nbsp;&mdash; построение изолиний. Генерация изолиний по цифровой модели рельефа (DEM) (на базе gdal_contour).</li>
  <li>Растеризация&nbsp;&mdash; используется для переноса векторных данных (точки, линии, полигоны) в растровый файл. Векторные даные берутся из
  OGR-совместимого источника данных, и должны быть в той же системе координат, что и растр. Перепроецирование &laquo;на лету&raquo; не предусмотрено (на базе gdal_rasterize).</li>
  <li>Векторизация&nbsp;&mdash; создание векторных полигонов для всех соседних пикселей растра, имеющих один и тот же цвет (значение).
  Для каждого полигона в атрибутивную таблицу записывается соответствующее значение растра. Используя растровую маску можно задать область для обработки (на базе gdal_polygonize).</li>
  <li>Мозаика&nbsp;&mdash; создает мозаику из исходных растров. Все изображения должны быть в одной системе координат и иметь одинаковое число каналов,
  но разрешение может быть разным, и растры могут перекрываться. В местах перекрытия часть, соответсвующая последнему изображению, будет записана поверх ранних (на базе gdal_merge).</li>
  <li>Отсеивание&nbsp;&mdash; находит растровые полигоны с размером меньше заданного порога (в пикселях) и заменяет их на значение, соответсвующее
  наибольшему соседнему растровому полигону. Результат отсеивания может быть записан как в существующий, так и в новый файл (использует gdal_sieve).</li>
  <li>Близость&nbsp;&mdash; строит карту близости растра, в которой указаны расстояния от центра каждого пикселя к центру ближайшего целевого пикселя.
  Целевыми пикселями будут все пиксели исходного растра, значения которых попадают в набор указанных величин (использует gdal_proximity).</li>
  <li>Сбросить в черный&nbsp;&mdash; сканирование изображение и замена почти черных (или почти белых) пикселей возле рамки на пиксели
  с точным значением цвета. Часто используется для &laquo;коррекции&raquo; аэрофотоснимков, сжатых с потерями, чтобы можно было задать прозрачный цвет при создании мозаики (использует nearblack).</li>
  <li>Перепроецирование&nbsp;&mdash; перевод растровых данных из одной проекции в другую, работает пофайлово и в пакетном режиме (на базе gdalwarp).</li>
  <li>Интерполяция&nbsp;&mdash; создает регулярную сетку (растр) на основе рассеяных данных, полученных из OGR-совместимого источника. Исходные даные будут
  интерполированы одним из доступных методов для получения значений узлов (на базе gdal_grid).</li>
  <li>Конвертация&nbsp;&mdash; преобразование растровых данных в разные форматы, работает пофайлово и в пакетном режиме (на базе gdal_translate)</li>
  <li>Информация&nbsp;&mdash; выводит информацию об указанном файле (формат, размер, система координат и др.). В работе использует gdalinfo.</li>
  <li>Добавить проекцию&nbsp;&mdash; добавляет или заменяет информацию о проекции растровых данных. Работает пофайлово и в пакетном режиме, есть возможность рекурсивного
  обхода каталогов. Работает на базе gdalwarp.</li>
  <li>Построить пирамиды&nbsp;&mdash; используется для создания или восстановления уменьшенных копий изображения (пирамид). Наличие
  пирамид несколько увеличивает скорость отрисовки растра. Может работать пофайлово и в пакетном режиме, использует gdaladdo.</li>
  <li>Обрезка&nbsp;&mdash; позволяет вырезать прямоугольный фрагмент растра или нескольких соседних растров и сохранить этот фрагмент в отдельный файл (на базе gdal_merge).</li>
  <li>RGB в PCT&nbsp;&mdash; конвертация RGB растра в индексированный, работает пофайлово и в пакетном режиме (использует rgb2pct).</li>
  <li>PCT в RGB&nbsp;&mdash; конвертация индексированного растра в RGB-растр любого поддерживаемого формата, работает пофайлово и в пакетном режиме (использует pct2rgb).</li>
</ul>

<p>Сообщать об ошибках и оставлять пожелания по улучшению можно в <a href="https://trac.osgeo.org/qgis/">багтрекере QGIS</a>.</p>


<!-- обсуждение на форуме, цифра изменяется при публикации статьи -->
<p class="discuss"><span><!--#include virtual="/scripts/forum-comments-num.php?i=5545"--></span></p>
<!-- ссылки -->
<div class="links">
	<h2>Ссылки по теме</h2>
		<ul>
			<li><a href="https://trac.faunalia.it/GdalTools-plugin/" target="_blank" class="external">Страница расширения</a></li>
		</ul>
</div>
<!--Contents end-->
<!--#include virtual="/scripts/date.php" -->
<!--#include virtual="/inc/footer2.php" -->
