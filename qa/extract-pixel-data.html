<!--#include virtual="/inc/header02.txt" -->
<title>GIS-Lab: Получение значений пикселей по полигональным профилям из многоканальных растровых данных в Arcview </title>
<!--#include virtual="/inc/header2.txt" -->
<!--Contents start-->
<div class="cont">
<div class="col1">

<ul class="path">
   <li class="first"><a href="/">Главная</a></li>
   <li><a href="/qa.html">Вопросы и ответы</a></li>
</ul>
<h1>Получение значений пикселей по полигональным профилям из многоканальных растровых данных в Arcview </h1>
<p class="ann">Описание работы со скриптом получения данных по полигональным объектам в Arcview GIS для сравнения приводится также описание как выполнить ту же операцию в ERDAS IMAGINE.</p>
<p class="discuss discuss_top"><span><!--#include virtual="/scripts/forum-comments-num.php?i=1746"--></span></p>
<p>Для некоторых задач, связанных со статистическим анализом тренировочных данных, таких как классификации при помощи деревьев регрессии (decision - regression trees) или метода максимального подобия (maximum likelihood) требуется извлечение данных о тренировочных (эталонных) объектах не по полигону в целом как в <a href="/qa/zonalstats.html">зональной статистике</a>, а по каждому пикселю изображения попадающему в этот полигон. Как правило, для этих задач используются многоканальные растровые данные, и, соответственно, каждый пиксель имеет N+2 значений, N = число каналов + координата X и координата Y. </p>
            <p>В качестве профиля используется полигон или полигоны в формате shape-файла. </p>
            <p align="center"><img src="/images/extract-pixel-data-02.gif" alt="получение значений по точкам" width="400" height="389" /></p>
            <p>Статистика подсчитывается для растрового файла, загруженного как Image Theme в содержание вида. Для того чтобы получить данные из растров в формате ERDAS IMAGINE нужно загрузить их как Image Theme предварительно включив расширение IMAGINE Image Support. </p>
            <p>Заметим, если растровые уже находятся в формате GRID и профили представляют из себя набор точек, то проще всего воспользоваться <a href="extract-values-grids.html">другой схемой работы и другим расширением</a>. </p>
            <p>В процессе работы, для каждого полигонального объекта в shape файле, для каждого канала растра, будет произведена операция получения данных из растрового слоя. Растр будет разбит поканально, каждый канал будет представлен в формате GRID, далее для каждого полигона будут определены попадающие в него ячейки растра (поканально) и полученные данные будут экспортированы в новый файл. При получении данных, если одна из точек попадает на пиксел со значением NODATA значение получено не будет. Сгенерированные в процессе работа наборы данных в формате GRID будут удалены в случае успешного выполнения операции. </p>
            <p>Если в полигональной теме присутствует поле Id и в нем есть значения, они будут использованы как названия классов и добавлены дополнительной, последней, колонкой в результирующий файл. <strong>Рассмотрим пример</strong>: для некого изображения оцифрованы области (полигоны) представляющие из себя участки растительности типа A и участки растительности типа B. Тип растительности указан в атрибутивной таблице кодом 1 или 2. С помощью данного расширения можно для каждого полигона в наборе эталонов получить значения всех пикселей попадающих в этот полигон поканально + добавить колонку с кодом из атрибутивной таблицы темы эталонов. Такие данные потом очень просто импортировать и использовать в любом статистическом пакете, <a href="/qa/rspatial.html">например R</a>. </p>
            <p>Скрипт может работать как со спроектированным, так и неспроектированным видом.</p>
            <p>Таким образом, для  получения пиксельных данных в Arcview GIS необходимо:</p>
            <ol>
              <li>Включить Spatial Analyst (File\Extensions\Spatial Analyst) </li>
              <li>Скачать и подключить скрипт <a href="/programs/avenue/extract-pixel-data.zip">extract-pixel-data.avx</a> (File\Extensions\Extract pixel data...) <br />
                <br />
                <img src="/images/extract-pixel-data-04.gif" width="376" height="305" alt="z" /><br />
                <br />
              </li>
              <li>Загрузить в содержание вида одну полигональную тему и растровый слой, из которого нужно извлечь значения, например <a href="/qa/gimms.html">матрицы NDVI</a>.</li>
              <li>Сделать активными  полигональную тему и растровый слой (выбрать их удерживая клавишу SHIFT) и нажать на кнопку <img src="/images/extract-pixel-data-03.gif" width="25" height="22" alt="z" />.</li>
              <li>Операцию можно произвести для часть объектов полигональной темы, для этого нужно просто их выделить и нажать на кнопку <img src="/images/extract-pixel-data-03.gif" width="25" height="22" alt="z" />.</li>
            </ol>
            <p><strong>Примечания: </strong></p>
            <ol>
              <li>Появление следующей ошибки означает, что географический охват полигонального слоя не совпадает с охватом растрового, что бывает если эти слои находятся в разных системах координат или используется неправильный (не соответствующий растровому географически) полигональный слой.<br />
                <img src="/images/extract-pixel-data-05.gif" width="381" height="135" alt="z" /></li>
              <li>Некоторые объекты  полигонального слоя могу частично или полностью не попадать в географический охват растрового, при этом общие охваты слоев должны пересекаться (см. первое примечание).</li>
              <li>Если значения пикселя во всех каналах равны 0, то данное значение пропускается. Данная ситуация возможна, когда часть эталонного полигона попадает на рамку изображения, которая обычно кодируется значением 0.</li>
              <li>При экспорте значений используемые разделители значений - пробелы.</li>
            </ol>
            <p><strong>ERDAS IMAGINE </strong></p>
            <p>Операцию экстракции попиксельных значений во всех каналов для набора полигонов-эталонов можно также осуществить в ERDAS IMAGINE. Utilities\Convert Pixels to ASCII... </p>
            <p align="center"><span><img src="/images/extract-pixel-data-01.gif" width="426" height="461" alt="z" /></span></p>
            <p>По сравнению с предложенным нами способом этот инструмент обладает следующими недостатками:</p>
            <ul>
              <li>Эталонам нельзя  назначить атрибут, поэтому если классов несколько, нужно иметь несколько наборов AOI, по одному на каждый класс;</li>
              <li>Как следствие, если нужно получить файл с добавленным значением кода, то их придется добавлять вручную.</li>
            </ul>
            <p class="discuss">
				<span><!--#include virtual="/scripts/forum-comments-num.php?i=1746"--></span>
			</p>
			<div class="links">
			<h2>Ссылки по теме</h2>
			<ul>
               <li><a href="/qa/zonalstats.html">Расчет зональной статистики в Arcview GIS</a></li>
			   <li><a href="/qa/extract-values-grids.html">Получение данных по точечным профилям из серий данных в формате GRID</a></li>
			</ul>
			</div>
<!--Contents end-->
<!--#include virtual="/scripts/date.php" -->
<p class="status"><span>Дата создания: 06.11.2007
<br>Автор(ы): <a href="/forum/memberlist.php?mode=viewprofile&u=2" target="_blank">Максим Дубинин</a></span></p>
<!--#include virtual="/inc/footer2.php" -->