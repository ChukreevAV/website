<!--#include virtual="/inc/header02.txt" -->
<title>GIS-Lab: Создание ЦСММ с использованием стереопар в ERDAS IMAGINE</title>
<!--#include virtual="/inc/header2.txt" -->
<div class="cont">
<div class="col1">

<ul class="path">
   <li class="first"><a href="/">Главная</a></li>
   <li><a href="/qa.html">Вопросы и ответы</a></li>
</ul>
<!--Contents start-->
<h1>Создание ЦСММ с использованием стереопар в ERDAS IMAGINE</h1>
<p class="ann">Описание процесса создание ЦСММ средствами пакета ERDAS IMAGINE</p>
<p class="discuss discuss_top"><span><!--#include virtual="/scripts/forum-comments-num.php?i=3334"--></span></p>
            <p>Цифровая стереомодель местности (ЦСММ) - цифровое представление пространственных  объектов, соответствующих объектовому составу топографических карт и планов, используемое для производства цифровых топографических карт.</p>
            <p>Цифровые  модели местности входят составной частью в информационное обеспечение  географических информационных систем, систем автоматизированного создания и  ведения кадастров различного назначения, систем навигации и позиционирования. </p>
            <p>В указанных системах ЦММ служат картографической  основой для пространственной привязки баз тематических данных, получаемых в  результате проведения инженерных изысканий, земельно-кадастровых работ,  межевания земель, статистических исследований, иных специальных работ и обследований.</p>
            <p>Одним из способов создания ЦММ является  использование стереопары, по перекрывающимся снимкам. Цифровая стереомодель  местности  может быть использована для  дешифрирования трехмерной географической информации, создания на ее основе  слоев ГИС, обновления и редактирования существующих двумерных векторных слоев  ГИС.</p>
            <p>Модуль Stereo Analyst Erdas IMAGINE специально разработан для  работы со стереоснимками. Модуль может создавать стереопары несколькими  способами (в том числе, простое согласование перекрывающихся необработанных  снимков, аналогичное использованию стереоскопа).</p>
            <p><strong>Оглавление</strong></p>
            <ol>
                  <li><a href="#01">Теоретическая справка</a></li>
                  <li><a href="#02">Создание цифровой стереомодели</a></li>
                  </ol>


<!-- Первый раздел -->
            <p><strong><img src="/images/1.gif" alt="1" width="33" height="41" align="left" /><a name="01" id="01"></a>Теоретическая справка</strong></p>
	    <p><strong>Виды цифровых стереомоделей</strong></p>
	    <p>1. <em>Относительная</em> стереопара на основе двух снимков с  перекрытием. Два перекрывающихся снимка приводятся к одному масштабу,  поворачиваются и преобразовываются для создания соответствующей стереопары.  Полученная таким образом ЦСМ, содержит опорные трехмерные координаты в  произвольной пространственной системе координат модели. Относительная  стереопара определяется как неориентированная стереомодель.</p>
	    <p>2. <em>Точная</em> ориентированная  стереомодель с использованием:</p>
	    <ul type="disc">
          <li>двух файлов, содержащих снимки с перекрытием;</li>
	      <li>названия проекции, сфероида и датума, в которых определены элементы внешнего ориентирования;</li>
	      <li>заданных линейных и угловых единиц измерения;</li>
	      <li>заданном направлении фотографирования (аэрофотосъемка, наземная или панорамная съемка);</li>
	      <li>заданной системы координат углов;</li>
	      <li>калибровочной информации о камере (фокусное расстояние, положение главной точки, дисторсию объектива и т.д.);</li>
	      <li>коэффициентов внутреннего ориентирования (параметры аффинного преобразования для каждого       изображения);</li>
	      <li>элементов внешнего ориентирования для каждого снимка, включая линейные и  угловые элементы ориентирования.</li>
	    </ul>
	    <p><strong>Внутреннее ориентирование</strong></p>
	    <p>Определяет внутреннюю  геометрию камеры или сенсора в момент съемки. Процесс внутреннего  ориентирования заключается в нахождении элементов, определяющих положение  снимка. Внутреннее ориентирование главным образом используется для  преобразования файловой или других систем координат снимка в систему  пространственных координат снимка.</p>
	    <p>Рисунок ниже показывает  элементы, определяющие положение снимка внутри камеры, где <em>о</em> это главная точка, и <em>а </em>является точкой на изображении.</p>
	    <p class="ill"><img src="../images/stereo-erdas-01.gif"><img src="../images/stereo-erdas-02.gif"><span>Элементы внутреннего ориентирования (Источник: LPS Project Manager User's Guide)</span></p>
	    <p align="center">&nbsp;</p>
	    <p>Внутренняя геометрия камеры  определяется следующими элементами:</p>
	    <ul type="disc">
          <li>главной точкой </li>
	      <li>фокусным       расстоянием </li>
	      <li>координатными       метками </li>
	      <li>дисторсией       объектив</li>
	      </ul>
	    <p><strong>Внешнее ориентирование</strong></p>
	    <p>Определяет  положение и угловую ориентацию снимка. Переменные, характеризующие положение и  ориентацию снимка, называются элементами внешнего ориентирования. Элементы  внешнего ориентирования определяют  параметры снимка на момент съемки. Линейными элементами внешнего ориентирования являются <em>Xo,</em> <em>Yo, Zo. </em>Они задают положение центра  проекции (<em>О</em>) относительно наземной системы  координат <em>(</em><em>X. У, </em>и <em>Z). </em><em>Zo</em> обычно определяет высоту камеры над уровнем моря,  которая задается датумом.</p>
	    <p>Угловые  элементы внешнего ориентирования характеризуют соотношение между наземной  системой координат (X <em>Y, </em>и <em>Z) </em>и системой пространственных  координат изображения  (x,y и z). Для определения углового  ориентирования обычно используются три угла поворота омега (ω), phi (φ), and kappa (κ). Рисунок ниже  демонстрирует элементы внешнего ориентирования.</p>
	    <p class="ill"><img src="../images/stereo-erdas-03.gif"><span>Элементы внешнего ориенторования  (Источник: LPS Project Manager User's Guide)</span></p>
	    <p align="center">&nbsp;</p>
	    <p align="justify"><strong><img src="/images/2.gif" alt="2" width="33" height="41" align="left" /><a name="02" id="02"></a>Создание цифровой стереомодели</strong></p>
	    <p><strong>Цель</strong>: создание точной цифровой стереомодели с помощью  модуля Stereo Analyst  в   среде Erdas Imagine.</p>
	    <p><strong>Входные данные:</strong> la_left.img – левый аэрофотоснимок, la_right.img – правый аэрофотоснимок.</p>
	    <p>Файлы снимков расположены в установочной директории  программы $IMAGINE_HOME/examples/la (при наличии установленных  данных с диска Data Erdas IMAGINE).</p>
	    <p>1. Выберите файлы la_left.img и la_right.img и скопируйте их  в свой рабочий  каталог.</p>
	    <p>2. Убедитесь, что файлы доступны для  редактирования, для этого откройте свойства файла, и снимите флажок &quot;только для чтения&quot;.</p>
	    <p>3. Откройте ERDAS IMAGINE, и выберите <em>STEREO ANALYST</em> на панели инструментов.</p>
	    <p align="center"><img src="../images/stereo-erdas-04.gif"></p>
	    <p align="justify">4. Нажмите на кнопку <em>Open Layer</em> (Открыть) на панели инструментов рабочей области:</p>
	    <p align="center"><img src="../images/stereo-erdas-05.gif"></p>
	    <p align="justify"><em><strong>Примечание:</strong></em> Откроется окно <em>Select layer to open </em>(выберите слой для открытия). Здесь  вы можете выбрать тип файла, который хотите открыть в  рабочей области.</p>
	    <p>5. Выберите  тип файла &quot;.img&quot;.</p>
	    <p>6. Найдите  свой рабочий каталог, где вы сохранили данные, и выберите la_left.img.</p>
	    <p>7. Нажмите <em>ОК</em>.</p>
	    <p><em><strong>Примечание:</strong></em> Изображение г. Лос-Анджелес, штат Калифорнии отобразится на рабочей  области. В настоящее время у аэрофотоснимков нет пространственной привязки,  поэтому в строке состояния будут отображаться строки и столбцы пикселей.</p>
	    <p>

8. Для того, чтобы открыть второе изображение нажмите <em>File -&gt; Open -&gt; Add a second image for stereo </em>(Файл -&gt; Открыть -&gt; Добавить  второе изображение для стерео).</p>
	    <p align="center"><img src="../images/stereo-erdas-06.gif"></p>
	    <p>9. Найдите  свой рабочий каталог, где хранятся данные, и выберите файл la_right.img.</p>
	    <p>10. Нажмите <em>OK</em>.</p>
	    <p>Изображение  отобразится в рабочей области окна Stereo Analyst:</p>
	    <p align="center"><img src="../images/stereo-erdas-07.gif"></p>
	    <p align="justify"><em><strong>Примечание: </strong></em>Stereo Analyst предусматривает создание стерео пары из двух изображений, в области их перекрытия.  Для создания используется функция Create stereo model. Результат   операции сохраняется в отдельном файле.</p>
	    <p>11. Нажмите <em>Utility</em> -&gt; <em>Create Stereo Model Tool</em> (Утилиты -&gt; Создать  Стерео Модель)</p>
	    <p align="center"><img src="../images/stereo-erdas-08.gif"></p>
	    <p>12. Нажмите на поле <em>Block filename </em>(Имя блок файла), перейдите в ваш  рабочий каталог и  введите имя &quot;la_create&quot;, в качестве разрешения  выберите &quot;.blk&quot;.</p>
	    <p>13. Нажмите <em>ОК</em></p>
	    <p>14. В диалоговом окне <em>Create Stereo Model</em>  нажмите на кнопку: </p>
	    <p align="center"><img src="../images/stereo-erdas-09.gif"> </p>
	    <p>Появится окно выбора проекции <em>Projection Chooser</em>.</p>
	    <p>15. Переключитесь на закладку <em>Custom</em> если это необходимо. В качестве проекции <em>&quot;Projection Type&quot; </em>выберите из ниспадающего списка &quot;UTM&quot;.</p>
	    <p>16. Для поля <em>&quot;Spheroid Name&quot;</em>  (имя Сфероида) выберите  из ниспадающего  списка <em>&quot;GRS 1980&quot;</em>.</p>
	    <p>17. Для поля <em>&quot;Datum Name&quot;</em> (Имя Датума)  выберите<em> &quot;NAD83&quot;.</em></p>
	    <p>18. Выберите 11 зону для <em>&quot;UTM Zone&quot;</em>  (номер зоны для UTM).</p>
	    <p>19. Выберите<em> &quot;NORTH&quot;</em> (северное) для   полушария.</p>
	    <p> 22. После окончания процедуры ввода сравните ваше окно с данными  представленными на изображении ниже.</p>
	    <p align="center"><img src="../images/stereo-erdas-10.gif" alt=""></p>
	    <p>23. Нажмите <em>ОК</em>.</p>
	    <p>24. Убедитесь, что в полях <em>&quot;Map X,Y Units&quot;</em>  (единицах карты по х,у) <strong> </strong>и <em>&quot;Сartesian Units&quot;</em> (еденицы декартовой системы координат) <strong> </strong>установлены  метры. </p>
	    <p>26. Введите значение 3925 для поля <em>&quot;Average Height&quot;</em>  (средняя высота) в метрах.</p>
	    <p align="left"><em><strong>Примечание: </strong></em>Средняя высота рассматривается как средняя высота полета.</p>
	    <p>27. Убедитесь, что поле<em> &quot;Angular Units&quot;</em> (угловые единицы) измеряются в  градусах (degrees).</p>
	    <p><em><strong>Примечание: </strong>Угловые единицы используются для определения единиц внешнего  ориентирования камеры/сенсора.</em></p>
	    <p>28. Установите  для <em>&quot;Rotation Order&quot;</em> (параметры  вращение) – <em>&quot;Omega,Phi,Kappa&quot;</em>, а в качестве направления съемки<em> &quot;Photo Direction&quot;</em>  выберите ось &quot;Z&quot;.</p>
	    <p>30. Когда вы закончите, закладка <em>&quot;Common&quot;</em> должна  выглядеть как на изображении ниже.</p>
	    <p align="center"><img src="../images/stereo-erdas-11.gif" alt=""></p>
	    <p align="left">	      Далее вам необходимо определить параметры камеры, для первого изображения в  блок - файле. Для того, чтобы добавить эту информации Вам необходимо открыть  закладку <em>Frame 1</em>.</p>
	    <p>31. Нажмите на  закладку <em>&quot;Frame1&quot;</em></p>
	    <p align="left"><em><strong>Примечание:</strong></em> Запись для поля <em>&quot;Image filename&quot;</em> уже заполнено записью <em>&quot;la_left.img&quot;</em>. Это поле автоматически  заполняется файлом первого изображения, которое вы открывали в рабочей области <em>Stereo Analyst Workspace</em>.</p>
	    <p align="left">32. Убедитесь, что<em> &quot;Interior Affine Type&quot; </em>(внутренний аффинный тип меток) определен как <em>&quot;Image to Film&quot;</em>.</p>
	    <p align="left"><em><strong>Примечание:</strong></em> Внутренний аффинный тип меток определяет настройки, используемые для  отображения шести коэффициентов, которые описывают отношение между системой  координат фотопленки и изображения. Система координат изображения измеряется в  пикселях, тогда как измерения по фотопленке производятся в миллиметрах,  микронах и т.д. Функция <em>&quot;Image to Film&quot;</em> описывается 6-ю  коэффициентами аффинного преобразования: при этом происходит конвертация  пикселей в линейные единицы - микроны и т.д. Функция <em>&quot;Film to Image&quot;</em> производит обратную операцию.</p>
	    <p>33.  Убедитесь, что в качестве <em>&quot;Camera Units&quot;</em> (единица измерения камеры)  установлены миллиметры. Единицы камеры должна  соответствовать калибровочному значению камеры, используемого для длины фокуса  и начальной точки оси х и у.</p>
	    <p>34. В поле  <em>&quot;Focal Length&quot;</em> (длина фокуса) введите 154.047. Длина  фокуса примет значение с учетом поправки.</p>
	    <p>35. В поле  начальная точка Хо (Principle Point Xо)  введите 0.002. Начальная точка перемещается в  направлении Х с учетом поправки.</p>
	    <p>36. В поле начальная точка Yо (Principle Point Yо) введите  -0.004. Начальная точка перемещается в направлении Y с учетом  поправки.</p>
	    <p><em><strong>Примечание: </strong></em>Вкладка &quot;interior&quot; (параметры  внутреннего ориентирования) дает возможность ввести шесть  аффинных коэффициентов внутреннего  преобразования (такие как а0,а1,а2,b0,b1,b2). Вкладка &quot;exterior&quot; (параметры внешнего ориентирования) дает возможность ввести шесть  внешних параметров изображения (такие как X,Y,Z, omega,phi,kappa).</p>
	    <p>37.  Используйте эти параметры для изображения la_left:</p>
	    <p><strong>Interior Parameters </strong>(параметры внутреннего ориентирования)</p>
	    <table width="35%" align="center">
          <tr>
            <th width="48%"><p align="center"><strong>a</strong></p></th>
            <th width="52%"><p align="center"><strong>b</strong></p></th>
            </tr>
          <tr>
            <td><p align="left">a0: 116.5926</p>
              <p align="left">a1: 0.000043</p>
              <p align="left">а2: -0.023991</p></td>
            <td><p align="left">b0: 116.5700</p>
              <p align="left">b1: -0.023995</p>
              <p align="left">b2: -0.000041</p></td>
            </tr>
        </table>
	    <p><strong>Exterior </strong><strong>Parameters</strong> (параметры внешнего  ориентирования)</p>
	    <p></p>
	    <table width="43%" align="center">
          <tr>
            <th width="61%"><p align="center"><strong>position</strong></p></th>
            <th width="39%"><p align="center"><strong>rotation</strong></p></th>
          </tr>
          <tr>
            <td><p align="left">X:  382496.9993</p>
                <p align="left">Y:  3765072.1510</p>
              <p align="left">Z:  3921.7234</p></td>
            <td><p align="left">omega: 0.3669</p>
                <p align="left">phi: -0.1824</p>
              <p align="left">kappa: 91.5355</p></td>
          </tr>
        </table>
	    <p>38. Откройте  вкладку <em>Frame2</em>. Поля длина фокуса и  начальные точки Хо и Уо заполнятся автоматически.</p>
	    <p> 39.  Воспользуйтесь следующими таблицами и заполните параметры для la_right.img:<br>
            <strong>Interior </strong><strong>Parameters</strong> (параметры внутреннего  ориентирования)</p>
	    <table width="35%" align="center">
          <tr>
            <th width="48%"><p align="center"><strong>a</strong></p></th>
            <th width="52%"><p align="center"><strong>b</strong></p></th>
          </tr>
          <tr>
            <td><p align="left">a0: 116.2486</p>
                <p align="left">a1: 0.000018</p>
              <p align="left">а2: -0.023987</p></td>
            <td><p align="left">b0: 116.8011</p>
                <p align="left">b1: -0.023992</p>
              <p align="left">b2: -0.000017</p></td>
          </tr>
        </table>
	    <p><strong>Exterior </strong><strong>Parameters </strong>(параметры  внешнего ориентирования)</p>
	    <table width="43%" align="center">
          <tr>
            <th width="61%"><p align="center"><strong>position</strong></p></th>
            <th width="39%"><p align="center"><strong>rotation</strong></p></th>
          </tr>
          <tr>
            <td><p align="left">X:  382484.8340</p>
                <p align="left">Y:  3762868.9323</p>
              <p align="left">Z:  3928.6787</p></td>
            <td><p align="left">omega: 0.1419</p>
                <p align="left">phi: 0.4291</p>
              <p align="left">kappa: 91.7508</p></td>
          </tr>
        </table>
	    <p>40. Нажмите <em>Apply</em>.<br>
Все  внесенные изменения сохранятся для блок-файла la_creat.blk</p>
	    <p>	      41. Нажмите <em>Close</em> (Закрыть) для выхода из окна создания стереомодели.</p>
	    <p>42. На  панели инструментов нажмите на кнопку <em>Close all displayed layer and clear the viewer </em>(Очистить рабочую область)</p>
	    <p align="center"> <img  src="../images/stereo-erdas-12.gif"></p>
	    <p>43.  Нажмите кнопку <em>Open Layer </em>(Открыть) </p>
	    <p align="center"> <img src="../images/stereo-erdas-13.gif" alt=""></p>
	    <p> 44. Выберите  расширение *.blk и  откройте блок-файл la_create.blk.</p>
	    <p> 45. Ваш  блок-файл отобразится  в окне <em>Digital Stereoscope Workspace</em>, используйте анаглифные  очки, для того, чтобы увидеть ЦСММ в области перекрытия снимков.</p>
	    <p align="center"><img src="../images/stereo-erdas-14.gif" alt=""></p>
	    <p><em><strong>Примечание:</strong></em> Для корректирования изображения по осям Х  и У, необходимо удерживая нажатой клавишу Х или У перемещать изображение мышью  по оси Х или У соответственно. Эта операция называется подстройкой параллакса.  Параллакс по оси X называется горизонтальным, а по оси Y–вертикальным. Вертикальный параллакс подстраивается один раз  для всей сцены, горизонтальный по мере необходимости.</p>
	    <!--#include virtual="/scripts/forum-comments-num.php?i=3334"-->
<!--Contents end-->
<!--#include virtual="/scripts/date.php" -->
<p class="status"><span>Дата создания: 27.05.2009
<br>
Автор(ы): <a href="/forum/memberlist.php?mode=viewprofile&u=7448" target="_blank">Ильмир Нугманов</a></span></p>
<!--#include virtual="/inc/footer2.php" -->