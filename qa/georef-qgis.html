<!--#include virtual="/inc/header02.txt" -->
<title>GIS-Lab: Географическая привязка данных в QGIS</title>
<!--#include virtual="/inc/header2.txt" -->
<div class="cont">
<div class="col1">

<ul class="path">
   <li class="first"><a href="/">Главная</a></li>
   <li><a href="/qa.html">Вопросы и ответы</a></li>
</ul>
<!--Contents start-->
<h1>Географическая привязка данных в QGIS</h1>
<p class="ann">Описание свободного инструмента для привязки данных</p>
<p class="discuss discuss_top"><span><!--#include virtual="/scripts/forum-comments-num.php?i=2490"--></span></p>
<p>QGIS - современная, активно развиваемая пользовательская ГИС, распространяемая бесплатно. В числе других функций этой программы - возможность географической привязки растровых данных. Эта статья является пошаговой иллюстрацией процесса привязки с помощью QGIS. Инструмент не так удобен, как хотелось бы, но даже в таком виде представляет работоспособную альтернативу проприетарным пакетам для работы с ГИС. </p>
<p>Инструмент использует ряд преобразований реализованных засчет <a href="/qa/georef-gdal.html">GDAL</a>. </p>
<p>Перед началом работы, убедитесь, что:</p>
<ul>
  <li>Разделитель целой и дробной части в системе - точка, а не запятая, иначе возможно появление ошибки &quot;Невозможно расчитать трансформацию&quot;, если привязка проходит без проблем, то разделитель можно не менять (замечено в Windows 7 64bit). </li>
  <li>Названия рабочих папок и самих растров не содержат кириллицы и пробелов.</li>
</ul>
<p>Оба этих совета носят рекомендательный характер и их стоит проверить, если у вас возникают проблемы при привязке. Вполне возможно, у вас не возникнет похожих проблем. </p>
<p>Растр используемый для примера в этой статье можно загрузить <a href="/data/samples/georef-test-topomap.tif">вот здесь</a>. </p>
<p><strong>Оглавление</strong></p>
<ol>
                  <li><a href="#01">Запуск QGIS и модуля привязки </a></li>
                  <li><a href="#02">Загрузка исходных данных</a></li>
                  <li><a href="#03">Сбор точек привязки</a></li>
                  <li><a href="#04">Трансформация</a></li>
            </ol>


<!-- Первый раздел -->
            <h2><strong><a name="01" id="01"></a></strong>1. Запуск QGIS и модуля привязки</h2>
            <p>QGIS можно загрузить с официального сайта или установить с помощью установщика OSGeo4W (рекомендуется, <a href="/qa/qgis-osgeo4w.html">описание установки</a>). Модуль географической привязки данных называется <strong>Привязка растров (GDAL)</strong> (Georeferencer GDAL) и запускается через <em>Модули\Привязка растров (Plugins\Georeferencer)</em>. Если этого модуля в меню Модули нет, необходимо сначала  подключить его через <em>Модули\Управление модулями</em> (<em>Plugins\Plugin manager</em>).</p>
	        <p align="center"><img src="/images/georef-qgis-09.gif" alt="модуль привязки" width="592" height="404" /> </p>
	        <p>А потом запустить: </p>
	        <p align="center"><img src="/images/georef-qgis-01.gif" alt="модуль привязки" width="591" height="147" /> </p>
	        <!-- Второй раздел -->
            <h2><strong><a name="02" id="02"></a></strong>2. Загрузка исходных данных</h2>
            <p>После запуска модуля привязки появится окно привязчика данных разделенное на две части: часть данных и часть таблицы точек привязки. В самом начале, так как никаких данных еще не загружено, окно и таблицы пустые. </p>
	    <p align="center">
          <!-- Конец текста статьи, начало ссылок -->
	      <img src="/images/georef-qgis-02.gif" alt="модуль привязки" width="576" height="522" /></p>
	    <p>Для начала привязки, загрузим в вид данных привязываемый растровый файл, он может находится в любом распространенном графическом формате (gif, jpeg, tif и др.), для этого выберем <em>Файл\Открыть растр</em>. Если ваш файл не может быть загружен, обычно это является свидетельством особенности растра, необычного сжатия или цветовой системы, в этом случае - просто пересохраните его в формат TIF:</p>
	    <p align="center"><img src="/images/georef-qgis-03.gif" alt="привязываемы файл" width="576" height="522" />  </p>
	    <h2><strong><a name="03" id="03"></a></strong>3. Сбор точек привязки</h2>
	    <p>Дальнейшая работа по сбору точек привязки происходит в  области с загруженным растром, поэтому вы можете захотеть его максимально увеличить. Процесс привязки заключается в увеличении области, для которой точно известные ее реальные координаты. В нашем примере это углы топокарты и указание этой точки с помощью инструмента Добавить точку (Add Point) <img src="/images/georef-qgis-05.gif" alt="добавить точку" width="32" height="31" />.</p>
	    <p>После увеличения нужного фрагмента и указания точки необходимо ввести соответсвующие ей координаты:</p>
	    <p align="center"><img src="/images/georef-qgis-06.gif" alt="добавить точку" width="596" height="539" /> </p>
	    <p>В случае привязки растра к другим слоям (векторным или растровым), необходимо сначала загрузить нужные слои в основное окно QGIS. Затем, вместо ввода координат с клавиатуры, для задания координат опорных точек нужно выбрать кнопку <em>С карты</em> (From map canvas)  и щелкнуть в нужном месте основной карты. В этом случае координаты опорных точек берутся с карты, которая может содержать любые другие слои, открытые в основном окне программы.</p>
	    <p>Для сохранения собираемых точек  нужно выбрать <em>Файл/Сохранить контрольные точки как </em>. Они будут сохранены в дополнительный файл, имеющий такое же имя как и привязываемый + расширение points. Содержимое файла легко отредактировать  в любом текстовом редакторе. Если, по некоторой причине, процесс расстановки точек пришлось прервать, то при следующей загрузке растра расставленные точки загрузятся вместе с ним. Для загрузки другого файла точек, нужно выбрать: <em>Файл/Загрузить контрольные точки</em>. </p>
	    <p>После расстановки необходимого количества точек, окно сбора точек должно выглядеть примерно таким образом:  </p>
	    <p align="center"><img src="/images/georef-qgis-07.gif" alt="добавить точку" width="576" height="522" /></p>
	    <h2><strong><a name="04" id="04"></a></strong>4. Трансформация</h2>
	    <p>После сбора необходимого количества точек, можно приступить к трансформации растра (пересчету) его в новую систему координат. Для этого необходимо выбрать настройки трансформации <em>Параметры/Параметры трансформации</em>. </p>
	    <p>В QGIS доступно несколько методов трансформации растров, в том числе:</p>
	    <ul>
	      <li>Линейное - аффинное преобразование, линейный сдвиг и масштабирование, пересчет (создание нового) растра при этом не происходит (поэтому пункт создания нового растра заблокирован), создается новый файл привязки;</li>
	      <li>Гельмерта -  сдвиг и поворот, создается новый файл в формате TIF и файл привязки;</li>
	      <li>Полиномиальное 1,2,3 - полиномиальное преобразование первого, второго или третьего порядка. Требуют соответственно минимум 4, 6, 10 точек.  Создается новый файл в формате TIF и файл привязки; Рекомендуем использовать для быстрой привязки Полиномиальное преобразование 1 порядка, для более точной Полиномиальное преобразование 2 порядка (<a href="polynom.html">подробнее</a>).</li>
	      <li>Thin plate spline - кусочно-линейное преобразование, аналогичное модели трансформации резинового листа (rubbersheet), используется в случае очень сильных локальных искажений исходного растра. </li>
	    </ul>
	    <p>Для начала, рекомендуется пользоваться  полиномиальной моделью соответствующей количеству созданных контрольных точек. </p>
	    <p align="center"><img src="/images/georef-qgis-08.gif" alt="добавить точку" width="364" height="456" /></p>
	    <p>После получения нового растра, рекомендуется проверить точность привязки независимым или тем же набором точек и, если необходимо, вернуться к процессу привязки еще раз, удалив неудачно|неправильно поставленные опорные точки.</p>
<p class="discuss"><span><!--#include virtual="/scripts/forum-comments-num.php?i=2490"--></span></p>
		<div class="links">
		<h2>Ссылки по теме</h2>
		<ul>
               <li><a href="georef-gdal.html">Использование GDAL для привязки растровых материалов</a></li>
			   <li><a href="georef-ag.html">Координатная привязка карты в ArcMap</a></li>
		</ul>
		</div>
<!--Contents end-->
<!--#include virtual="/scripts/date.php" -->
<p class="status"><span>Дата создания: 02.10.2008
<br>Автор(ы): <a href="/forum/memberlist.php?mode=viewprofile&u=2" target="_blank">Максим Дубинин</a></span></p>
<!--#include virtual="/inc/footer2.php" -->